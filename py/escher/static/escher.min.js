((t,e)=>{"object"==typeof exports&&"object"==typeof module?module.exports=e((()=>{try{return require("@jupyter-widgets/base")}catch(t){}})()):"function"==typeof define&&define.amd?define(["@jupyter-widgets/base"],e):"object"==typeof exports?exports.escher=e((()=>{try{return require("@jupyter-widgets/base")}catch(t){}})()):t.escher=e(t["@jupyter-widgets/base"])})(self,n=>{var r={284:(t,e,n)=>{n.d(e,{A:()=>c});var e=n(354),e=n.n(e),r=n(314),r=n.n(r),i=n(417),i=n.n(i),o=new URL(n(37),n.b),a=new URL(n(353),n.b),s=new URL(n(759),n.b),l=new URL(n(359),n.b),n=new URL(n(792),n.b),r=r()(e()),e=i()(o),o=i()(o,{hash:"#iefix"}),a=i()(a),s=i()(s),l=i()(l),i=i()(n,{hash:"#fontello"});r.push([t.id,`@font-face {
  font-family: 'fontello';
  src: url(${e});
  src: url(${o}) format('embedded-opentype'),
       url(${a}) format('woff2'),
       url(${s}) format('woff'),
       url(${l}) format('truetype'),
       url(${i}) format('svg');
  font-weight: normal;
  font-style: normal;
}
/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */
/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */
/*
@media screen and (-webkit-min-device-pixel-ratio:0) {
  @font-face {
    font-family: 'fontello';
    src: url('../font/fontello.svg?9130959#fontello') format('svg');
  }
}
*/
 
 [class^="icon-"]:before, [class*=" icon-"]:before {
  font-family: "fontello";
  font-style: normal;
  font-weight: normal;
  speak: none;
 
  display: inline-block;
  text-decoration: inherit;
  width: 1em;
  margin-right: .2em;
  text-align: center;
  /* opacity: .8; */
 
  /* For safety - reset parent styles, that can break glyph codes*/
  font-variant: normal;
  text-transform: none;
 
  /* fix buttons height, for twitter bootstrap */
  line-height: 1em;
 
  /* Animation center compensation - margins should be symmetric */
  /* remove if not needed */
  margin-left: .2em;
 
  /* you can be more comfortable with increased icons size */
  /* font-size: 120%; */
 
  /* Font smoothing. That was taken from TWBS */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
 
  /* Uncomment for 3D effect */
  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */
}
 
.icon-ok:before { content: '\\e800'; } /* '' */
.icon-cancel:before { content: '\\e801'; } /* '' */
.icon-plus:before { content: '\\e802'; } /* '' */
.icon-down-big:before { content: '\\e803'; } /* '' */
.icon-left-big:before { content: '\\e804'; } /* '' */
.icon-right-big:before { content: '\\e805'; } /* '' */
.icon-up-big:before { content: '\\e806'; } /* '' */
.icon-left-open:before { content: '\\e807'; } /* '' */
.icon-right-open:before { content: '\\e808'; } /* '' */
.icon-wrench:before { content: '\\e809'; } /* '' */
.icon-resize-full:before { content: '\\e80a'; } /* '' */
.icon-cw:before { content: '\\e80b'; } /* '' */
.icon-trash-empty:before { content: '\\e80e'; } /* '' */
.icon-font:before { content: '\\e80f'; } /* '' */
.icon-zoom-in:before { content: '\\e810'; } /* '' */
.icon-zoom-out:before { content: '\\e811'; } /* '' */
.icon-move:before { content: '\\f047'; } /* '' */
.icon-resize-full-alt:before { content: '\\f0b2'; } /* '' */
.icon-blank:before { content: '\\f0c8'; } /* '' */
.icon-sort-down:before { content: '\\f0dd'; } /* '' */
.icon-mouse-pointer:before { content: '\\f245'; } /* '' */`,"",{version:3,sources:["webpack://./icons/css/fontello.css"],names:[],mappings:"AAAA;EACE,uBAAuB;EACvB,4CAAwC;EACxC;;;;4DAI+D;EAC/D,mBAAmB;EACnB,kBAAkB;AACpB;AACA,gGAAgG;AAChG,2FAA2F;AAC3F;;;;;;;CAOC;;CAEA;EACC,uBAAuB;EACvB,kBAAkB;EAClB,mBAAmB;EACnB,WAAW;;EAEX,qBAAqB;EACrB,wBAAwB;EACxB,UAAU;EACV,kBAAkB;EAClB,kBAAkB;EAClB,iBAAiB;;EAEjB,gEAAgE;EAChE,oBAAoB;EACpB,oBAAoB;;EAEpB,8CAA8C;EAC9C,gBAAgB;;EAEhB,gEAAgE;EAChE,yBAAyB;EACzB,iBAAiB;;EAEjB,0DAA0D;EAC1D,qBAAqB;;EAErB,6CAA6C;EAC7C,mCAAmC;EACnC,kCAAkC;;EAElC,4BAA4B;EAC5B,uDAAuD;AACzD;;AAEA,kBAAkB,gBAAgB,EAAE,EAAE,QAAQ;AAC9C,sBAAsB,gBAAgB,EAAE,EAAE,QAAQ;AAClD,oBAAoB,gBAAgB,EAAE,EAAE,QAAQ;AAChD,wBAAwB,gBAAgB,EAAE,EAAE,QAAQ;AACpD,wBAAwB,gBAAgB,EAAE,EAAE,QAAQ;AACpD,yBAAyB,gBAAgB,EAAE,EAAE,QAAQ;AACrD,sBAAsB,gBAAgB,EAAE,EAAE,QAAQ;AAClD,yBAAyB,gBAAgB,EAAE,EAAE,QAAQ;AACrD,0BAA0B,gBAAgB,EAAE,EAAE,QAAQ;AACtD,sBAAsB,gBAAgB,EAAE,EAAE,QAAQ;AAClD,2BAA2B,gBAAgB,EAAE,EAAE,QAAQ;AACvD,kBAAkB,gBAAgB,EAAE,EAAE,QAAQ;AAC9C,2BAA2B,gBAAgB,EAAE,EAAE,QAAQ;AACvD,oBAAoB,gBAAgB,EAAE,EAAE,QAAQ;AAChD,uBAAuB,gBAAgB,EAAE,EAAE,QAAQ;AACnD,wBAAwB,gBAAgB,EAAE,EAAE,QAAQ;AACpD,oBAAoB,gBAAgB,EAAE,EAAE,QAAQ;AAChD,+BAA+B,gBAAgB,EAAE,EAAE,QAAQ;AAC3D,qBAAqB,gBAAgB,EAAE,EAAE,QAAQ;AACjD,yBAAyB,gBAAgB,EAAE,EAAE,QAAQ;AACrD,6BAA6B,gBAAgB,EAAE,EAAE,QAAQ",sourcesContent:["@font-face {\n  font-family: 'fontello';\n  src: url('../font/fontello.eot?9130959');\n  src: url('../font/fontello.eot?9130959#iefix') format('embedded-opentype'),\n       url('../font/fontello.woff2?9130959') format('woff2'),\n       url('../font/fontello.woff?9130959') format('woff'),\n       url('../font/fontello.ttf?9130959') format('truetype'),\n       url('../font/fontello.svg?9130959#fontello') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\n/*\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: 'fontello';\n    src: url('../font/fontello.svg?9130959#fontello') format('svg');\n  }\n}\n*/\n \n [class^=\"icon-\"]:before, [class*=\" icon-\"]:before {\n  font-family: \"fontello\";\n  font-style: normal;\n  font-weight: normal;\n  speak: none;\n \n  display: inline-block;\n  text-decoration: inherit;\n  width: 1em;\n  margin-right: .2em;\n  text-align: center;\n  /* opacity: .8; */\n \n  /* For safety - reset parent styles, that can break glyph codes*/\n  font-variant: normal;\n  text-transform: none;\n \n  /* fix buttons height, for twitter bootstrap */\n  line-height: 1em;\n \n  /* Animation center compensation - margins should be symmetric */\n  /* remove if not needed */\n  margin-left: .2em;\n \n  /* you can be more comfortable with increased icons size */\n  /* font-size: 120%; */\n \n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n \n  /* Uncomment for 3D effect */\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */\n}\n \n.icon-ok:before { content: '\\e800'; } /* '' */\n.icon-cancel:before { content: '\\e801'; } /* '' */\n.icon-plus:before { content: '\\e802'; } /* '' */\n.icon-down-big:before { content: '\\e803'; } /* '' */\n.icon-left-big:before { content: '\\e804'; } /* '' */\n.icon-right-big:before { content: '\\e805'; } /* '' */\n.icon-up-big:before { content: '\\e806'; } /* '' */\n.icon-left-open:before { content: '\\e807'; } /* '' */\n.icon-right-open:before { content: '\\e808'; } /* '' */\n.icon-wrench:before { content: '\\e809'; } /* '' */\n.icon-resize-full:before { content: '\\e80a'; } /* '' */\n.icon-cw:before { content: '\\e80b'; } /* '' */\n.icon-trash-empty:before { content: '\\e80e'; } /* '' */\n.icon-font:before { content: '\\e80f'; } /* '' */\n.icon-zoom-in:before { content: '\\e810'; } /* '' */\n.icon-zoom-out:before { content: '\\e811'; } /* '' */\n.icon-move:before { content: '\\f047'; } /* '' */\n.icon-resize-full-alt:before { content: '\\f0b2'; } /* '' */\n.icon-blank:before { content: '\\f0c8'; } /* '' */\n.icon-sort-down:before { content: '\\f0dd'; } /* '' */\n.icon-mouse-pointer:before { content: '\\f245'; } /* '' */"],sourceRoot:""}]);let c=r},982:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`/* Containers */

/* The top level container for an Escher Builder */
.escher-container {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;
  background-color: #F3F3F3;
  text-align: center;
  position: relative;
  font-size: 14px;
  color: #333333;
}

/* Applied to the body when Escher fills the screen. This stops browser from
showing scroll-end animations. */
html.fill-screen {
  height: 100%;
  width: 100%;
}
body.fill-screen {
  margin: 0;
  position: relative;
  overflow: hidden;
  height: 100%;
  width: 100%;
}

/* Applied to top level container (generally .escher-container) when Escher
fills the screen. These make sure Escher completely fills the screen, even after
resizes. */
.fill-screen-div {
  margin: 0;
  padding: 0;
  position: fixed;
  top: 0px;
  bottom: 0px;
  left: 0px;
  right: 0px;
  width: 100% !important;
  height: 100% !important;
  z-index: 1000;
}

/* The zoom container classes. */
.escher-container .escher-zoom-container,
.escher-container .escher-3d-transform-container,
.escher-container svg.escher-svg {
  width: 100% !important;
  height: 100% !important;
  overflow: hidden;
}

/* SVG text should not be selectable */
.escher-container svg text {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Status */
.escher-container #status {
  position:absolute;
  bottom:10px;
  left: 20px;
  color: red;
  background-color: white;
  font-size: 16px
}

/* Search & Menu */
.escher-container .search-menu-container {
  position: absolute;
  width: 100%;
  top: 0px;
  left: 0px;
  margin: 0;
  text-align: center;
  pointer-events: none;
  display: flex;
  justify-content: center;
  align-items: center;
}

.escher-container .search-menu-container .legend-container{
  display: none;
  width: 224px;
  height: 35.5px;
}

.escher-container .search-menu-container .vertical-legend-container{
  display: none;
}

.escher-container .search-menu-container-inline {
  box-sizing: border-box;
  width: 320px;
  display: inline-block;
  text-align: left;
  pointer-events: auto;
}
@media (min-width: 550px) {
  .escher-container .search-menu-container-inline {
    width: 470px;
  }
}

/* Reaction input */
.escher-container #rxn-input {
  z-index: 10;
  width: 200px;
}
.escher-container .input-close-button {
  position: absolute;
  right: 0px;
  width: 18px;
  bottom: 0px;
  padding: 0px;
  border-width: 0px;
  margin: 0px;
  background: none;
  font-size: 20px;
  font-weight: normal;
  top: -8px;
}
.escher-container .input-close-button:hover {
  color: #ff3333;
  font-weight: bold;
}

/* text edit input */
.escher-container #text-edit-input input {
  width: 500px;
  border: 1px solid #cccccc;
  font-size: 22px;
}

.escher-container #tooltip-container {
  -ms-touch-action: none;
  touch-action: none;
}

/* Buttons */
.escher-container .btn {
  color: white!important;
  border: 1px solid #2E2F2F;
  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);
  background-color: white;
  cursor: pointer;
}

.escher-container .btn:active {
  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);
}


/* Modal container */
#legend-config-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  padding: 20px;
  background-color: white;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 1001;
  display: none; /* Hidden by default */
  border-radius: 8px;
  border: 1px solid #ccc;
}

#legend-config-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
  z-index: 1000; /* Ensure the overlay is behind the modal */
  display: none; /* Hidden by default */
}

/* Modal content */
#legend-config-modal .modal-content h3 {
  font-size: 1.25em;
  margin-bottom: 20px;
  margin-top: 0;
}

#legend-config-modal .modal-content label {
  display: block;
  margin: 10px 0 5px;
  font-weight: bold;
  text-align: left;
}

#legend-config-modal .modal-content select {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* Modal actions */
#legend-config-modal .modal-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 20px;
}

#legend-config-modal .modal-button {
  padding: 8px 16px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-left: 10px;
}

#legend-config-modal .modal-button.confirm {
  background-color: #4CAF50;
  color: white;
}

#legend-config-modal .modal-button.cancel {
  background-color: #f2f2f2;
  color: #000;
}
`,"",{version:3,sources:["webpack://./src/Builder.css"],names:[],mappings:"AAAA,eAAe;;AAEf,kDAAkD;AAClD;EACE,sEAAsE;EACtE,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;EAClB,eAAe;EACf,cAAc;AAChB;;AAEA;gCACgC;AAChC;EACE,YAAY;EACZ,WAAW;AACb;AACA;EACE,SAAS;EACT,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;EACZ,WAAW;AACb;;AAEA;;UAEU;AACV;EACE,SAAS;EACT,UAAU;EACV,eAAe;EACf,QAAQ;EACR,WAAW;EACX,SAAS;EACT,UAAU;EACV,sBAAsB;EACtB,uBAAuB;EACvB,aAAa;AACf;;AAEA,gCAAgC;AAChC;;;EAGE,sBAAsB;EACtB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA,sCAAsC;AACtC;EACE,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA,WAAW;AACX;EACE,iBAAiB;EACjB,WAAW;EACX,UAAU;EACV,UAAU;EACV,uBAAuB;EACvB;AACF;;AAEA,kBAAkB;AAClB;EACE,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,SAAS;EACT,SAAS;EACT,kBAAkB;EAClB,oBAAoB;EACpB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,oBAAoB;AACtB;AACA;EACE;IACE,YAAY;EACd;AACF;;AAEA,mBAAmB;AACnB;EACE,WAAW;EACX,YAAY;AACd;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,WAAW;EACX,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,mBAAmB;EACnB,SAAS;AACX;AACA;EACE,cAAc;EACd,iBAAiB;AACnB;;AAEA,oBAAoB;AACpB;EACE,YAAY;EACZ,yBAAyB;EACzB,eAAe;AACjB;;AAEA;EACE,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA,YAAY;AACZ;EACE,sBAAsB;EACtB,yBAAyB;EACzB,+DAA+D;EAC/D,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,+DAA+D;AACjE;;;AAGA,oBAAoB;AACpB;EACE,eAAe;EACf,QAAQ;EACR,SAAS;EACT,gCAAgC;EAChC,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,0CAA0C;EAC1C,aAAa;EACb,aAAa,EAAE,sBAAsB;EACrC,kBAAkB;EAClB,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;EACZ,oCAAoC,EAAE,2BAA2B;EACjE,aAAa,EAAE,2CAA2C;EAC1D,aAAa,EAAE,sBAAsB;AACvC;;AAEA,kBAAkB;AAClB;EACE,iBAAiB;EACjB,mBAAmB;EACnB,aAAa;AACf;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA,kBAAkB;AAClB;EACE,aAAa;EACb,yBAAyB;EACzB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,yBAAyB;EACzB,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb",sourcesContent:['/* Containers */\n\n/* The top level container for an Escher Builder */\n.escher-container {\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;\n  background-color: #F3F3F3;\n  text-align: center;\n  position: relative;\n  font-size: 14px;\n  color: #333333;\n}\n\n/* Applied to the body when Escher fills the screen. This stops browser from\nshowing scroll-end animations. */\nhtml.fill-screen {\n  height: 100%;\n  width: 100%;\n}\nbody.fill-screen {\n  margin: 0;\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n}\n\n/* Applied to top level container (generally .escher-container) when Escher\nfills the screen. These make sure Escher completely fills the screen, even after\nresizes. */\n.fill-screen-div {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100% !important;\n  height: 100% !important;\n  z-index: 1000;\n}\n\n/* The zoom container classes. */\n.escher-container .escher-zoom-container,\n.escher-container .escher-3d-transform-container,\n.escher-container svg.escher-svg {\n  width: 100% !important;\n  height: 100% !important;\n  overflow: hidden;\n}\n\n/* SVG text should not be selectable */\n.escher-container svg text {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n/* Status */\n.escher-container #status {\n  position:absolute;\n  bottom:10px;\n  left: 20px;\n  color: red;\n  background-color: white;\n  font-size: 16px\n}\n\n/* Search & Menu */\n.escher-container .search-menu-container {\n  position: absolute;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n  margin: 0;\n  text-align: center;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.escher-container .search-menu-container .legend-container{\n  display: none;\n  width: 224px;\n  height: 35.5px;\n}\n\n.escher-container .search-menu-container .vertical-legend-container{\n  display: none;\n}\n\n.escher-container .search-menu-container-inline {\n  box-sizing: border-box;\n  width: 320px;\n  display: inline-block;\n  text-align: left;\n  pointer-events: auto;\n}\n@media (min-width: 550px) {\n  .escher-container .search-menu-container-inline {\n    width: 470px;\n  }\n}\n\n/* Reaction input */\n.escher-container #rxn-input {\n  z-index: 10;\n  width: 200px;\n}\n.escher-container .input-close-button {\n  position: absolute;\n  right: 0px;\n  width: 18px;\n  bottom: 0px;\n  padding: 0px;\n  border-width: 0px;\n  margin: 0px;\n  background: none;\n  font-size: 20px;\n  font-weight: normal;\n  top: -8px;\n}\n.escher-container .input-close-button:hover {\n  color: #ff3333;\n  font-weight: bold;\n}\n\n/* text edit input */\n.escher-container #text-edit-input input {\n  width: 500px;\n  border: 1px solid #cccccc;\n  font-size: 22px;\n}\n\n.escher-container #tooltip-container {\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n/* Buttons */\n.escher-container .btn {\n  color: white!important;\n  border: 1px solid #2E2F2F;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  cursor: pointer;\n}\n\n.escher-container .btn:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n\n/* Modal container */\n#legend-config-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  padding: 20px;\n  background-color: white;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n  z-index: 1001;\n  display: none; /* Hidden by default */\n  border-radius: 8px;\n  border: 1px solid #ccc;\n}\n\n#legend-config-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */\n  z-index: 1000; /* Ensure the overlay is behind the modal */\n  display: none; /* Hidden by default */\n}\n\n/* Modal content */\n#legend-config-modal .modal-content h3 {\n  font-size: 1.25em;\n  margin-bottom: 20px;\n  margin-top: 0;\n}\n\n#legend-config-modal .modal-content label {\n  display: block;\n  margin: 10px 0 5px;\n  font-weight: bold;\n  text-align: left;\n}\n\n#legend-config-modal .modal-content select {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n/* Modal actions */\n#legend-config-modal .modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20px;\n}\n\n#legend-config-modal .modal-button {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-left: 10px;\n}\n\n#legend-config-modal .modal-button.confirm {\n  background-color: #4CAF50;\n  color: white;\n}\n\n#legend-config-modal .modal-button.cancel {\n  background-color: #f2f2f2;\n  color: #000;\n}\n'],sourceRoot:""}]);let i=n},701:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .button-panel {
  position: absolute;
  left: 4px;
  top: 20%;
  margin-top: -32px;
  padding-left: 0;
  touch-action: none;
}

.escher-container .button-panel>li {
  margin-top: 5px;
  display: block;

  /* these sometimes get overridden */
  margin-left: 0 !important;
}

.escher-container .grouping {
  display: block;
}

.escher-container .buttonGroup {
  display: block;
  margin-bottom: -1px;
  padding: 5px 0px;
  border-radius: 0;
}

.escher-container .grouping>.buttonGroup:first-child {
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
}

.escher-container .grouping>.buttonGroup:last-child {
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
}

.escher-container .button-panel>.grouping:last-child {
  margin-top: 4px;
}

.escher-container #currentMode,
.escher-container .active-button {
  background-image: linear-gradient(#8F4F3F,#834c3c 6%,#8d3a2d) !important;
}

.escher-container .buttonGroup.btn {
  margin-top: -1px;
}

.escher-container .button {
  border-radius: 4px;
}

.escher-container .button.btn, .escher-container .buttonGroup.btn {
  padding: unset;
  color: white!important;
  border: 1px solid #474949;
  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);
  background-color: white;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  font-size: 14px!important;
  font-weight: 400;
  width: 40px;
  height: 40px;
}

.escher-container .button-panel .button:active, .escher-container .buttonGroup label:active, .escher-container .button-panel .buttonGroup:active {
  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);
}

.escher-container .button-panel .fa {
  font-size: 24px;
}

/* Icons */
.escher-container .button-panel [class^='icon-'] {
  font-size: 23px;
}
`,"",{version:3,sources:["webpack://./src/ButtonPanel.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,cAAc;;EAEd,mCAAmC;EACnC,yBAAyB;AAC3B;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,cAAc;EACd,mBAAmB;EACnB,gBAAgB;EAChB,gBAAgB;AAClB;;AAEA;EACE,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,8BAA8B;EAC9B,+BAA+B;AACjC;;AAEA;EACE,eAAe;AACjB;;AAEA;;EAEE,wEAAwE;AAC1E;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,sBAAsB;EACtB,yBAAyB;EACzB,+DAA+D;EAC/D,uBAAuB;EACvB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,yBAAyB;EACzB,gBAAgB;EAChB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,+DAA+D;AACjE;;AAEA;EACE,eAAe;AACjB;;AAEA,UAAU;AACV;EACE,eAAe;AACjB",sourcesContent:[".escher-container .button-panel {\n  position: absolute;\n  left: 4px;\n  top: 20%;\n  margin-top: -32px;\n  padding-left: 0;\n  touch-action: none;\n}\n\n.escher-container .button-panel>li {\n  margin-top: 5px;\n  display: block;\n\n  /* these sometimes get overridden */\n  margin-left: 0 !important;\n}\n\n.escher-container .grouping {\n  display: block;\n}\n\n.escher-container .buttonGroup {\n  display: block;\n  margin-bottom: -1px;\n  padding: 5px 0px;\n  border-radius: 0;\n}\n\n.escher-container .grouping>.buttonGroup:first-child {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n\n.escher-container .grouping>.buttonGroup:last-child {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n.escher-container .button-panel>.grouping:last-child {\n  margin-top: 4px;\n}\n\n.escher-container #currentMode,\n.escher-container .active-button {\n  background-image: linear-gradient(#8F4F3F,#834c3c 6%,#8d3a2d) !important;\n}\n\n.escher-container .buttonGroup.btn {\n  margin-top: -1px;\n}\n\n.escher-container .button {\n  border-radius: 4px;\n}\n\n.escher-container .button.btn, .escher-container .buttonGroup.btn {\n  padding: unset;\n  color: white!important;\n  border: 1px solid #474949;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  font-size: 14px!important;\n  font-weight: 400;\n  width: 40px;\n  height: 40px;\n}\n\n.escher-container .button-panel .button:active, .escher-container .buttonGroup label:active, .escher-container .button-panel .buttonGroup:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .button-panel .fa {\n  font-size: 24px;\n}\n\n/* Icons */\n.escher-container .button-panel [class^='icon-'] {\n  font-size: 23px;\n}\n"],sourceRoot:""}]);let i=n},471:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .default-tooltip {
  box-sizing: border-box;
  min-width: 300px;
  min-height: 100px;
  border-radius: 2px;
  border: 1px solid #b58787;
  padding: 7px;
  background-color: #fff;
  text-align: left;
  font-size: 16px;
  font-family: sans-serif;
  color: #111;
  box-shadow: 4px 6px 20px 0px rgba(0, 0, 0, 0.4);
}

.escher-container .default-tooltip .id{
  font-size: 18px;
  font-weight: bold;
}

.escher-container .default-tooltip button {
  border-radius: 3px;
  background-color: #eee;
  border: 1px solid #ddd;
  margin-top: 4px;
  font-size: 16px;
  padding: 3px 6px;
}

.escher-container .default-tooltip .top-right {
  position: absolute;
  top: 4px;
  right: 4px;
}

.escher-container .default-tooltip .top-right * {
  float: right;
  text-align: right;
}

.escher-container .default-tooltip .top-right a {
  font-size: 11px;
  color: #999;
  cursor: pointer;
}
.escher-container .default-tooltip .top-right a:hover {
  color: #444;
  text-decoration: underline;
}

.escher-container .default-tooltip .type-label {
  font-size: 15px;
  color: #d27066;
  background-color: #ffeded;
  border-radius: 2px;
  margin: 0 0 0 10px;
  padding: 0 5px;
}
`,"",{version:3,sources:["webpack://./src/DefaultTooltip.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,yBAAyB;EACzB,YAAY;EACZ,sBAAsB;EACtB,gBAAgB;EAChB,eAAe;EACf,uBAAuB;EACvB,WAAW;EACX,+CAA+C;AACjD;;AAEA;EACE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;EAClB,sBAAsB;EACtB,sBAAsB;EACtB,eAAe;EACf,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,QAAQ;EACR,UAAU;AACZ;;AAEA;EACE,YAAY;EACZ,iBAAiB;AACnB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,eAAe;AACjB;AACA;EACE,WAAW;EACX,0BAA0B;AAC5B;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;EAClB,cAAc;AAChB",sourcesContent:[".escher-container .default-tooltip {\n  box-sizing: border-box;\n  min-width: 300px;\n  min-height: 100px;\n  border-radius: 2px;\n  border: 1px solid #b58787;\n  padding: 7px;\n  background-color: #fff;\n  text-align: left;\n  font-size: 16px;\n  font-family: sans-serif;\n  color: #111;\n  box-shadow: 4px 6px 20px 0px rgba(0, 0, 0, 0.4);\n}\n\n.escher-container .default-tooltip .id{\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.escher-container .default-tooltip button {\n  border-radius: 3px;\n  background-color: #eee;\n  border: 1px solid #ddd;\n  margin-top: 4px;\n  font-size: 16px;\n  padding: 3px 6px;\n}\n\n.escher-container .default-tooltip .top-right {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n}\n\n.escher-container .default-tooltip .top-right * {\n  float: right;\n  text-align: right;\n}\n\n.escher-container .default-tooltip .top-right a {\n  font-size: 11px;\n  color: #999;\n  cursor: pointer;\n}\n.escher-container .default-tooltip .top-right a:hover {\n  color: #444;\n  text-decoration: underline;\n}\n\n.escher-container .default-tooltip .type-label {\n  font-size: 15px;\n  color: #d27066;\n  background-color: #ffeded;\n  border-radius: 2px;\n  margin: 0 0 0 10px;\n  padding: 0 5px;\n}\n"],sourceRoot:""}]);let i=n},248:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .menu-bar {
  box-sizing: border-box;
  list-style-type: none;
  padding: 0;
  padding-right: 20px;
  position: relative;
  margin: 5px 0px;
  background-color: white;
  border: 1px solid #ddd;
  display: inline-flex;
  box-sizing: border-box;
  width: 100%;
  justify-content: space-between;
}

.escher-container .dropdown {
  position: relative;
  float: left;
  box-sizing: border-box;
  font-size: 12px;
  border-radius: 3px;

  /* these sometimes get overridden */
  margin: 0 !important;
  font-weight: normal !important;

  text-align: center;
  vertical-align: middle;
  -ms-touch-action: none;
  touch-action: none;
  cursor: pointer;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.escher-container .dropdownButton {
  color: #d9230f!important;
  border: 1px solid transparent;
  padding: 6px 9px;
}

.escher-container .helpButton {
  color: #d9230f!important;
  padding: 0px 5px;
  background-color: #f5f5f5!important;
  border: 0!important;
  text-decoration: unset;
  height: fit-content;
  position: absolute;
  right: 0;
  font-size: 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.escher-container .dropdownButton:focus, .escher-container .helpButton:focus {
  color: #91170a!important;
  text-decoration: underline;
}

.escher-container .dropdownButton:hover, .escher-container .helpButton:hover {
  color: #91170a!important;
  text-decoration: underline;
}

.escher-container .menu-bar .icon-sort-down {
  position: absolute;
  font-size: 10px;
  margin-left: -5px;
}

@media (min-width: 550px) {
  .escher-container .menu-bar {
    padding-right: 25px;
  }

  .escher-container .dropdown {
    font-size: 18px;
  }

  .escher-container .dropdownButton {
    padding: 6px 10px;
    padding-right: 16px;
  }

  .escher-container .helpButton {
    font-size: 16px;
  }

  .escher-container .menu-bar .icon-sort-down {
    font-size: 14px;
  }
}

.escher-container .menu {
  box-sizing: border-box;
  font-weight: normal!important;
  word-spacing: 0;
  position: absolute;
  white-space: nowrap;
  top: 103%;
  left: -1%;
  z-index: 1000;
  display: block;
  float: none;
  min-width: 160px;
  padding: 5px 0;
  list-style: none;
  font-size: 13px;
  box-shadow: 0 6px 12px rgba(0,0,0,0.175);
  background-clip: padding-box;
  border: 1px solid #ddd;
  background-color: rgba(255, 255, 255, 0.95);
  border-radius: 0;
  margin: 0;
  text-align: left;
}

.escher-container #rightMenu {
  left: auto;
  right: -2%;
}

.escher-container .menu li:hover {
  background-color: #d9230f;
  color: #FFFFFF;
}

.escher-container .menu li, .menu label {
  font-size: 15px;
  display: block;
  color: #444444;

  /* these sometimes get overridden */
  font-weight: normal !important;
  margin: 0 !important;
}

.escher-container .menu.ul.li {
  background-color: rgba(255, 255, 255, 0.95);
}

.escher-container .menuButton {
  box-sizing: border-box;
  width: 100%;
  padding: 5px 20px;
  margin: 0;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.escher-container label:focus, .menuButton:focus {
  background-color: #d9230f;
  color: #FFFFFF;
}

.escher-container .menuButton:hover {
  background-color: #d9230f;
  color: #FFFFFF;
}

.escher-container input[type="file"] {
  display: none;
}

.escher-container #disabled {
  color: #e0e0e0;
}

.escher-container #disabled:hover, #disabled:focus {
  background-color: rgba(255, 255, 255, 0.95);
  cursor: default;
}

.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 25px;
  vertical-align: middle;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 25px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 19px;
  width: 19px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #d9230f;
}

input:checked + .slider:before {
  transform: translateX(25px);
}

.switch-container {
  display: flex;
  align-items: center;
}

.switch-description {
  margin-right: 10px;
  font-size: 16px;
}

/* Tooltip styling */
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px;
  position: absolute;
  z-index: 1;
  top: 125%; /* Position the tooltip below the switch */
  left: 50%;
  margin-left: -60px;
  opacity: 0;
  transition: opacity 0.3s;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  bottom: 100%; /* At the top of the tooltip */
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent black transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

`,"",{version:3,sources:["webpack://./src/Dropdown.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,qBAAqB;EACrB,UAAU;EACV,mBAAmB;EACnB,kBAAkB;EAClB,eAAe;EACf,uBAAuB;EACvB,sBAAsB;EACtB,oBAAoB;EACpB,sBAAsB;EACtB,WAAW;EACX,8BAA8B;AAChC;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,sBAAsB;EACtB,eAAe;EACf,kBAAkB;;EAElB,mCAAmC;EACnC,oBAAoB;EACpB,8BAA8B;;EAE9B,kBAAkB;EAClB,sBAAsB;EACtB,sBAAsB;EACtB,kBAAkB;EAClB,eAAe;EACf,2BAA2B;EAC3B,yBAAyB;EACzB,wBAAwB;EACxB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,wBAAwB;EACxB,6BAA6B;EAC7B,gBAAgB;AAClB;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,mCAAmC;EACnC,mBAAmB;EACnB,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;EAClB,QAAQ;EACR,eAAe;EACf,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,wBAAwB;EACxB,0BAA0B;AAC5B;;AAEA;EACE,wBAAwB;EACxB,0BAA0B;AAC5B;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE;IACE,mBAAmB;EACrB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,iBAAiB;IACjB,mBAAmB;EACrB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,eAAe;EACjB;AACF;;AAEA;EACE,sBAAsB;EACtB,6BAA6B;EAC7B,eAAe;EACf,kBAAkB;EAClB,mBAAmB;EACnB,SAAS;EACT,SAAS;EACT,aAAa;EACb,cAAc;EACd,WAAW;EACX,gBAAgB;EAChB,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,wCAAwC;EACxC,4BAA4B;EAC5B,sBAAsB;EACtB,2CAA2C;EAC3C,gBAAgB;EAChB,SAAS;EACT,gBAAgB;AAClB;;AAEA;EACE,UAAU;EACV,UAAU;AACZ;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,cAAc;;EAEd,mCAAmC;EACnC,8BAA8B;EAC9B,oBAAoB;AACtB;;AAEA;EACE,2CAA2C;AAC7C;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,iBAAiB;EACjB,SAAS;EACT,eAAe;EACf,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,2CAA2C;EAC3C,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,MAAM;EACN,OAAO;EACP,QAAQ;EACR,SAAS;EACT,sBAAsB;EACtB,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,WAAW;EACX,SAAS;EACT,WAAW;EACX,uBAAuB;EACvB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,2BAA2B;AAC7B;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,eAAe;AACjB;;AAEA,oBAAoB;AACpB;EACE,kBAAkB;EAClB,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,uBAAuB;EACvB,WAAW;EACX,kBAAkB;EAClB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,UAAU;EACV,SAAS,EAAE,0CAA0C;EACrD,SAAS;EACT,kBAAkB;EAClB,UAAU;EACV,wBAAwB;AAC1B;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY,EAAE,8BAA8B;EAC5C,SAAS;EACT,iBAAiB;EACjB,iBAAiB;EACjB,mBAAmB;EACnB,uDAAuD;AACzD;;AAEA;EACE,mBAAmB;EACnB,UAAU;AACZ",sourcesContent:['.escher-container .menu-bar {\n  box-sizing: border-box;\n  list-style-type: none;\n  padding: 0;\n  padding-right: 20px;\n  position: relative;\n  margin: 5px 0px;\n  background-color: white;\n  border: 1px solid #ddd;\n  display: inline-flex;\n  box-sizing: border-box;\n  width: 100%;\n  justify-content: space-between;\n}\n\n.escher-container .dropdown {\n  position: relative;\n  float: left;\n  box-sizing: border-box;\n  font-size: 12px;\n  border-radius: 3px;\n\n  /* these sometimes get overridden */\n  margin: 0 !important;\n  font-weight: normal !important;\n\n  text-align: center;\n  vertical-align: middle;\n  -ms-touch-action: none;\n  touch-action: none;\n  cursor: pointer;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton {\n  color: #d9230f!important;\n  border: 1px solid transparent;\n  padding: 6px 9px;\n}\n\n.escher-container .helpButton {\n  color: #d9230f!important;\n  padding: 0px 5px;\n  background-color: #f5f5f5!important;\n  border: 0!important;\n  text-decoration: unset;\n  height: fit-content;\n  position: absolute;\n  right: 0;\n  font-size: 12px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton:focus, .escher-container .helpButton:focus {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .dropdownButton:hover, .escher-container .helpButton:hover {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .menu-bar .icon-sort-down {\n  position: absolute;\n  font-size: 10px;\n  margin-left: -5px;\n}\n\n@media (min-width: 550px) {\n  .escher-container .menu-bar {\n    padding-right: 25px;\n  }\n\n  .escher-container .dropdown {\n    font-size: 18px;\n  }\n\n  .escher-container .dropdownButton {\n    padding: 6px 10px;\n    padding-right: 16px;\n  }\n\n  .escher-container .helpButton {\n    font-size: 16px;\n  }\n\n  .escher-container .menu-bar .icon-sort-down {\n    font-size: 14px;\n  }\n}\n\n.escher-container .menu {\n  box-sizing: border-box;\n  font-weight: normal!important;\n  word-spacing: 0;\n  position: absolute;\n  white-space: nowrap;\n  top: 103%;\n  left: -1%;\n  z-index: 1000;\n  display: block;\n  float: none;\n  min-width: 160px;\n  padding: 5px 0;\n  list-style: none;\n  font-size: 13px;\n  box-shadow: 0 6px 12px rgba(0,0,0,0.175);\n  background-clip: padding-box;\n  border: 1px solid #ddd;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 0;\n  margin: 0;\n  text-align: left;\n}\n\n.escher-container #rightMenu {\n  left: auto;\n  right: -2%;\n}\n\n.escher-container .menu li:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menu li, .menu label {\n  font-size: 15px;\n  display: block;\n  color: #444444;\n\n  /* these sometimes get overridden */\n  font-weight: normal !important;\n  margin: 0 !important;\n}\n\n.escher-container .menu.ul.li {\n  background-color: rgba(255, 255, 255, 0.95);\n}\n\n.escher-container .menuButton {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 5px 20px;\n  margin: 0;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container label:focus, .menuButton:focus {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menuButton:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container input[type="file"] {\n  display: none;\n}\n\n.escher-container #disabled {\n  color: #e0e0e0;\n}\n\n.escher-container #disabled:hover, #disabled:focus {\n  background-color: rgba(255, 255, 255, 0.95);\n  cursor: default;\n}\n\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 50px;\n  height: 25px;\n  vertical-align: middle;\n}\n\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  transition: .4s;\n  border-radius: 25px;\n}\n\n.slider:before {\n  position: absolute;\n  content: "";\n  height: 19px;\n  width: 19px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: .4s;\n  border-radius: 50%;\n}\n\ninput:checked + .slider {\n  background-color: #d9230f;\n}\n\ninput:checked + .slider:before {\n  transform: translateX(25px);\n}\n\n.switch-container {\n  display: flex;\n  align-items: center;\n}\n\n.switch-description {\n  margin-right: 10px;\n  font-size: 16px;\n}\n\n/* Tooltip styling */\n.tooltip {\n  position: relative;\n  display: inline-block;\n}\n\n.tooltip .tooltiptext {\n  visibility: hidden;\n  width: 120px;\n  background-color: black;\n  color: #fff;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px;\n  position: absolute;\n  z-index: 1;\n  top: 125%; /* Position the tooltip below the switch */\n  left: 50%;\n  margin-left: -60px;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.tooltip .tooltiptext::after {\n  content: "";\n  position: absolute;\n  bottom: 100%; /* At the top of the tooltip */\n  left: 50%;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent transparent black transparent;\n}\n\n.tooltip:hover .tooltiptext {\n  visibility: visible;\n  opacity: 1;\n}\n\n'],sourceRoot:""}]);let i=n},965:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .picker {
  top: 35px;
  margin-left: -7px;
  position: absolute;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.escher-container .pickerBox {
  position: absolute;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.375);
  width: 14px;
  height: 35px;
  top: -35px
}

.escher-container .scaleTrack .rightOptions {
  position: absolute;
  left: -76px;
}

.escher-container .pickerOptions {
  box-shadow: 0 2px 14px #c5c5c5;
  margin-top: 1px;
  display: inline-flex;
  flex-direction: column;
  width: 90px;
}

.escher-container .pickerOptions * {
  font-size: 12px;
}

.escher-container .pickerOptions .option {
  padding: 3px 0px;
}

.escher-container .pickerOptions .typePicker {
  width: 20px;
  position: absolute;
  left: 70px;
  top: 1px;
  right: 0px;
  height: 14px;
  background-color: rgb(232, 232, 232);
}

.escher-container .pickerOptions .colorOptions {
  display: inline-flex;
}

.escher-container .colorOptions .colorText {
  padding: 3px 0px;
  width: 100%;
}

.escher-container .colorOptions .colorWheel {
  padding: 0px;
  position: absolute;
  right: 0;
  height: 24px;
  width: 21px;
  border: 1px solid black;
}

.escher-container .picker .trashDiv {
  position: absolute;
  top: -56px;
  font-size: 17px;
}

.escher-container .picker .trashDiv * {
  font-size: 17px;
  cursor: pointer;
}

.escher-container .picker .icon-trash-empty {
  margin: -5px;
}

.escher-container .scaleEditor :disabled {
  background: #f1ecfa;
}

.escher-container .scaleEditor input[type=color]:disabled {
  margin-top: 1px;
}
`,"",{version:3,sources:["webpack://./src/Picker.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,iBAAiB;EACjB,kBAAkB;EAClB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,gCAAgC;EAChC,WAAW;EACX,YAAY;EACZ;AACF;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,8BAA8B;EAC9B,eAAe;EACf,oBAAoB;EACpB,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,UAAU;EACV,QAAQ;EACR,UAAU;EACV,YAAY;EACZ,oCAAoC;AACtC;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,kBAAkB;EAClB,QAAQ;EACR,YAAY;EACZ,WAAW;EACX,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,eAAe;AACjB",sourcesContent:[".escher-container .picker {\n  top: 35px;\n  margin-left: -7px;\n  position: absolute;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .pickerBox {\n  position: absolute;\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.375);\n  width: 14px;\n  height: 35px;\n  top: -35px\n}\n\n.escher-container .scaleTrack .rightOptions {\n  position: absolute;\n  left: -76px;\n}\n\n.escher-container .pickerOptions {\n  box-shadow: 0 2px 14px #c5c5c5;\n  margin-top: 1px;\n  display: inline-flex;\n  flex-direction: column;\n  width: 90px;\n}\n\n.escher-container .pickerOptions * {\n  font-size: 12px;\n}\n\n.escher-container .pickerOptions .option {\n  padding: 3px 0px;\n}\n\n.escher-container .pickerOptions .typePicker {\n  width: 20px;\n  position: absolute;\n  left: 70px;\n  top: 1px;\n  right: 0px;\n  height: 14px;\n  background-color: rgb(232, 232, 232);\n}\n\n.escher-container .pickerOptions .colorOptions {\n  display: inline-flex;\n}\n\n.escher-container .colorOptions .colorText {\n  padding: 3px 0px;\n  width: 100%;\n}\n\n.escher-container .colorOptions .colorWheel {\n  padding: 0px;\n  position: absolute;\n  right: 0;\n  height: 24px;\n  width: 21px;\n  border: 1px solid black;\n}\n\n.escher-container .picker .trashDiv {\n  position: absolute;\n  top: -56px;\n  font-size: 17px;\n}\n\n.escher-container .picker .trashDiv * {\n  font-size: 17px;\n  cursor: pointer;\n}\n\n.escher-container .picker .icon-trash-empty {\n  margin: -5px;\n}\n\n.escher-container .scaleEditor :disabled {\n  background: #f1ecfa;\n}\n\n.escher-container .scaleEditor input[type=color]:disabled {\n  margin-top: 1px;\n}\n"],sourceRoot:""}]);let i=n},342:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .scaleEditor * {
  font-size: 12px;
  color: #777;
  box-sizing: border-box;
}

.escher-container .scaleEditor {
  position: relative;
  display: flex;
  justify-content: center;
  flex-direction: column;
}

.escher-container .scaleTrack {
  position: relative;
  display: flex;
  height: 30px;
  margin-bottom: 9px;
  margin-top: 30px;
  margin-left: 55px;
  font-size: 15px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.escher-container .scaleTrack.disabled {
  background: #f1ecfa;
  color: #b19ec0;
  padding: 4px 0;
  justify-content: center;
}

.escher-container .gradient {
  position: absolute;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

.escher-container .scaleLabels {
  display: inline-flex;
  flex-direction: column;
  font-size: 12px;
}

.escher-container .scaleLabels label {
  padding: 4px 0;
}

.escher-container .noDataStyle {
  position: relative;
  margin-top: 20px;
}

.escher-container .noDataStyle .styleHeader {
  font-size: 12px;
  font-weight: bold;
}

.escher-container .noDataStyle label {
  margin-right: 5px;
}

.escher-container .noDataStyle input[type=text] {
  margin-right: 10px;
  padding: 3px 0px;
  width: 86px;
}

.escher-container .noDataStyle input[type=color] {
  position: absolute;
  padding: 0px;
  border: 1px solid black;
  left: 103px;
  height: 24px;
  width: 21px;
}

.escher-container .scaleEditor .icon-plus {
  cursor: pointer;
  position: absolute;
  font-size: 14px;
  right: 19px;
}
`,"",{version:3,sources:["webpack://./src/ScaleSlider.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,WAAW;EACX,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,eAAe;EACf,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,cAAc;EACd,cAAc;EACd,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,oBAAoB;EACpB,sBAAsB;EACtB,eAAe;AACjB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,uBAAuB;EACvB,WAAW;EACX,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,eAAe;EACf,WAAW;AACb",sourcesContent:[".escher-container .scaleEditor * {\n  font-size: 12px;\n  color: #777;\n  box-sizing: border-box;\n}\n\n.escher-container .scaleEditor {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.escher-container .scaleTrack {\n  position: relative;\n  display: flex;\n  height: 30px;\n  margin-bottom: 9px;\n  margin-top: 30px;\n  margin-left: 55px;\n  font-size: 15px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .scaleTrack.disabled {\n  background: #f1ecfa;\n  color: #b19ec0;\n  padding: 4px 0;\n  justify-content: center;\n}\n\n.escher-container .gradient {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n\n.escher-container .scaleLabels {\n  display: inline-flex;\n  flex-direction: column;\n  font-size: 12px;\n}\n\n.escher-container .scaleLabels label {\n  padding: 4px 0;\n}\n\n.escher-container .noDataStyle {\n  position: relative;\n  margin-top: 20px;\n}\n\n.escher-container .noDataStyle .styleHeader {\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.escher-container .noDataStyle label {\n  margin-right: 5px;\n}\n\n.escher-container .noDataStyle input[type=text] {\n  margin-right: 10px;\n  padding: 3px 0px;\n  width: 86px;\n}\n\n.escher-container .noDataStyle input[type=color] {\n  position: absolute;\n  padding: 0px;\n  border: 1px solid black;\n  left: 103px;\n  height: 24px;\n  width: 21px;\n}\n\n.escher-container .scaleEditor .icon-plus {\n  cursor: pointer;\n  position: absolute;\n  font-size: 14px;\n  right: 19px;\n}\n"],sourceRoot:""}]);let i=n},436:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .search-container {
  display: flex;
  flex-direction: row;
  background-color: rgba(255, 255, 255, 0.95);
  padding: 3px;
  border: 1px solid #DDD;
}

.escher-container .search-container .search-field {
  flex: 0 0 auto;
  color: #777;
  border: 1px solid #DDD;
  width: 114px;
  height: 29px;
  border-radius: 3px;
  font-size: 13px;
}

.escher-container .search-container .search-counter {
  flex: 1;
  color: #777;
  font-size: 13px;
  padding: 9px 0 0 6px;
}

.escher-container .search-container .search-bar-button {
  flex: 0 0 auto;
  border-radius: 4px;
  text-align: center;
  vertical-align: middle;
  font-size: 14px;
  font-weight: 400;
  height: 29px;
  width: 34px;
  margin: 3px;
}

.escher-container .search-container .search-bar-button.left {
  border-top-right-radius: 0px;
  border-bottom-right-radius: 0px;
  margin-right: 0;
}

.escher-container .search-container .search-bar-button.right {
  border-top-left-radius: 0px;
  border-bottom-left-radius: 0px;
  margin-left: 0;
}

.escher-container .search-container .search-bar-button:active {
  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);
}
`,"",{version:3,sources:["webpack://./src/SearchBar.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,2CAA2C;EAC3C,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,cAAc;EACd,WAAW;EACX,sBAAsB;EACtB,YAAY;EACZ,YAAY;EACZ,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,OAAO;EACP,WAAW;EACX,eAAe;EACf,oBAAoB;AACtB;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,WAAW;EACX,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,+BAA+B;EAC/B,eAAe;AACjB;;AAEA;EACE,2BAA2B;EAC3B,8BAA8B;EAC9B,cAAc;AAChB;;AAEA;EACE,+DAA+D;AACjE",sourcesContent:[".escher-container .search-container {\n  display: flex;\n  flex-direction: row;\n  background-color: rgba(255, 255, 255, 0.95);\n  padding: 3px;\n  border: 1px solid #DDD;\n}\n\n.escher-container .search-container .search-field {\n  flex: 0 0 auto;\n  color: #777;\n  border: 1px solid #DDD;\n  width: 114px;\n  height: 29px;\n  border-radius: 3px;\n  font-size: 13px;\n}\n\n.escher-container .search-container .search-counter {\n  flex: 1;\n  color: #777;\n  font-size: 13px;\n  padding: 9px 0 0 6px;\n}\n\n.escher-container .search-container .search-bar-button {\n  flex: 0 0 auto;\n  border-radius: 4px;\n  text-align: center;\n  vertical-align: middle;\n  font-size: 14px;\n  font-weight: 400;\n  height: 29px;\n  width: 34px;\n  margin: 3px;\n}\n\n.escher-container .search-container .search-bar-button.left {\n  border-top-right-radius: 0px;\n  border-bottom-right-radius: 0px;\n  margin-right: 0;\n}\n\n.escher-container .search-container .search-bar-button.right {\n  border-top-left-radius: 0px;\n  border-bottom-left-radius: 0px;\n  margin-left: 0;\n}\n\n.escher-container .search-container .search-bar-button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n"],sourceRoot:""}]);let i=n},605:(t,e,n)=>{n.d(e,{A:()=>i});var e=n(354),e=n.n(e),r=n(314),n=n.n(r)()(e());n.push([t.id,`.escher-container .settingsBackground {
  box-sizing: border-box;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9;
  background: rgba(0,0,0,.4);
  padding: 5% 0 80px;
  text-align: center;
}

.escher-container .scale-editor .domain-input {
  color: #333;
}

.escher-container .settingsBoxContainer button {
  position: absolute;
  top: 5px;
  right: 20px;
  z-index: 10;
  text-align: center;
  vertical-align: middle;
  font-weight: normal!important;
  width: 34px;
  height: 30px;
  margin: 0;
  padding: unset;
  font-size: 14px!important;
  border-radius: 3px;
  -ms-touch-action: none;
  touch-action: none;
}

.escher-container .settingsBoxContainer button:active {
  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);
}

.escher-container .settingsBoxContainer .discardChanges {
  right: 60px;
}

.escher-container .settingsBoxContainer {
  color: rgb(119, 119, 119);
  display: inline-block;
  position: relative;
  width: 90%;
  max-width: 520px;
  height: 100%;
  z-index: 10;
}

.escher-container .settingsBox {
  font-size: 13px;
  box-sizing: border-box;
  display: inline-block;
  max-height: 100%;
  width: 100%;
  overflow-y: scroll;
  overflow-x: hidden;
  background: rgba(255, 255, 255, 0.953);
  padding: 8px;
  margin: 0;
  border: 1px solid #ddd;
  text-align: left;
}

.escher-container .settingsBox * {
  box-sizing: border-box;
}

.escher-container .settingsBox .title {
  font-size: 17px;
  font-weight: 700;
  color: #777777;
}

.escher-container .settingsBox .subheading {
  font-size: 13px;
  font-weight: 700;
  margin-top: 15px;
  color: #777777;
}

.escher-container .settingsBox table {
  border-collapse: collapse;
}

.escher-container .settingsBox label {
  display: inline;
}

.escher-container .settingsBox .radioSelection {
  cursor: default;
}

.escher-container .radioSelection td {
  padding: 3px 5px;
}

.escher-container .radioSelection input[type=radio] {
  margin: 0;
  margin-top: 4px;
  margin-right: 4px;
}

.escher-container .radioSelection .optionLabel {
  width: 88px;
}

.escher-container .radioSelection .optionLabelWide {
  width: 192px;
}

.escher-container .radioSelection .optionGroup {
  margin-right: 10px
}

.escher-container .settingsBox .singleLine {
  display: flex;
}

.escher-container .settingsContainer label {
  display: block;
  margin-bottom: 0;
}

.escher-container .settingsBoxContainer input[type=checkbox] {
  margin: 0;
  margin-top: 4px;
  margin-right: 4px;
}

.escher-container .settingsTip {
  font-size: 13px;
}

.escher-container .settingsBoxContainer hr {
  margin: 18px 0;
  border: 0;
  border-top: 1px solid #dddddd;
}

.escher-container .scaleTitle {
  margin-top: 15px;
  display: flex;
  justify-content: space-between;
}

.escher-container .selector {
  position: relative;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  padding-top: 2px;
}

.escher-container .selectorTitle {
  background-color: white;
  border: 1px solid #a9a9a9;
  padding-left: 4px;
  cursor: default;
  width: 162px;
}

.escher-container .selectorTitle:hover:not(.disabled) {
  border-color: black;
}

.escher-container .selectorTitle.disabled {
  background-color: #f1ecfa;
}

.escher-container .selectorMenu {
  position: absolute;
  z-index: 4;
  background-color: white;
  border: 1px solid #a9a9a9;
  min-width: 162px;
}

.escher-container .scaleSelection {
  cursor: default;
  padding: 0 6px;
  display: flex;
  justify-content: space-between;
}

.escher-container .scaleSelection:hover {
  background-color: dodgerblue;
  color: white;
}

.escher-container .settingsBox .icon-sort-down {
  position: absolute;
  top: 0;
}

.escher-container .settingsBox .tooltipOption {
  margin-left: 10px;
}
`,"",{version:3,sources:["webpack://./src/SettingsMenu.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;EACZ,UAAU;EACV,0BAA0B;EAC1B,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,QAAQ;EACR,WAAW;EACX,WAAW;EACX,kBAAkB;EAClB,sBAAsB;EACtB,6BAA6B;EAC7B,WAAW;EACX,YAAY;EACZ,SAAS;EACT,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA;EACE,+DAA+D;AACjE;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,yBAAyB;EACzB,qBAAqB;EACrB,kBAAkB;EAClB,UAAU;EACV,gBAAgB;EAChB,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,eAAe;EACf,sBAAsB;EACtB,qBAAqB;EACrB,gBAAgB;EAChB,WAAW;EACX,kBAAkB;EAClB,kBAAkB;EAClB,sCAAsC;EACtC,YAAY;EACZ,SAAS;EACT,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,SAAS;EACT,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,YAAY;AACd;;AAEA;EACE;AACF;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,SAAS;EACT,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,cAAc;EACd,SAAS;EACT,6BAA6B;AAC/B;;AAEA;EACE,gBAAgB;EAChB,aAAa;EACb,8BAA8B;AAChC;;AAEA;EACE,kBAAkB;EAClB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,uBAAuB;EACvB,yBAAyB;EACzB,iBAAiB;EACjB,eAAe;EACf,YAAY;AACd;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,uBAAuB;EACvB,yBAAyB;EACzB,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,aAAa;EACb,8BAA8B;AAChC;;AAEA;EACE,4BAA4B;EAC5B,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,MAAM;AACR;;AAEA;EACE,iBAAiB;AACnB",sourcesContent:[".escher-container .settingsBackground {\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9;\n  background: rgba(0,0,0,.4);\n  padding: 5% 0 80px;\n  text-align: center;\n}\n\n.escher-container .scale-editor .domain-input {\n  color: #333;\n}\n\n.escher-container .settingsBoxContainer button {\n  position: absolute;\n  top: 5px;\n  right: 20px;\n  z-index: 10;\n  text-align: center;\n  vertical-align: middle;\n  font-weight: normal!important;\n  width: 34px;\n  height: 30px;\n  margin: 0;\n  padding: unset;\n  font-size: 14px!important;\n  border-radius: 3px;\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n.escher-container .settingsBoxContainer button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .settingsBoxContainer .discardChanges {\n  right: 60px;\n}\n\n.escher-container .settingsBoxContainer {\n  color: rgb(119, 119, 119);\n  display: inline-block;\n  position: relative;\n  width: 90%;\n  max-width: 520px;\n  height: 100%;\n  z-index: 10;\n}\n\n.escher-container .settingsBox {\n  font-size: 13px;\n  box-sizing: border-box;\n  display: inline-block;\n  max-height: 100%;\n  width: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  background: rgba(255, 255, 255, 0.953);\n  padding: 8px;\n  margin: 0;\n  border: 1px solid #ddd;\n  text-align: left;\n}\n\n.escher-container .settingsBox * {\n  box-sizing: border-box;\n}\n\n.escher-container .settingsBox .title {\n  font-size: 17px;\n  font-weight: 700;\n  color: #777777;\n}\n\n.escher-container .settingsBox .subheading {\n  font-size: 13px;\n  font-weight: 700;\n  margin-top: 15px;\n  color: #777777;\n}\n\n.escher-container .settingsBox table {\n  border-collapse: collapse;\n}\n\n.escher-container .settingsBox label {\n  display: inline;\n}\n\n.escher-container .settingsBox .radioSelection {\n  cursor: default;\n}\n\n.escher-container .radioSelection td {\n  padding: 3px 5px;\n}\n\n.escher-container .radioSelection input[type=radio] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .radioSelection .optionLabel {\n  width: 88px;\n}\n\n.escher-container .radioSelection .optionLabelWide {\n  width: 192px;\n}\n\n.escher-container .radioSelection .optionGroup {\n  margin-right: 10px\n}\n\n.escher-container .settingsBox .singleLine {\n  display: flex;\n}\n\n.escher-container .settingsContainer label {\n  display: block;\n  margin-bottom: 0;\n}\n\n.escher-container .settingsBoxContainer input[type=checkbox] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .settingsTip {\n  font-size: 13px;\n}\n\n.escher-container .settingsBoxContainer hr {\n  margin: 18px 0;\n  border: 0;\n  border-top: 1px solid #dddddd;\n}\n\n.escher-container .scaleTitle {\n  margin-top: 15px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .selector {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  padding-top: 2px;\n}\n\n.escher-container .selectorTitle {\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  padding-left: 4px;\n  cursor: default;\n  width: 162px;\n}\n\n.escher-container .selectorTitle:hover:not(.disabled) {\n  border-color: black;\n}\n\n.escher-container .selectorTitle.disabled {\n  background-color: #f1ecfa;\n}\n\n.escher-container .selectorMenu {\n  position: absolute;\n  z-index: 4;\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  min-width: 162px;\n}\n\n.escher-container .scaleSelection {\n  cursor: default;\n  padding: 0 6px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .scaleSelection:hover {\n  background-color: dodgerblue;\n  color: white;\n}\n\n.escher-container .settingsBox .icon-sort-down {\n  position: absolute;\n  top: 0;\n}\n\n.escher-container .settingsBox .tooltipOption {\n  margin-left: 10px;\n}\n"],sourceRoot:""}]);let i=n},314:t=>{t.exports=function(r){var u=[];return u.toString=function(){return this.map(function(t){var e="",n=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),n&&(e+="@layer".concat(0<t[5].length?" ".concat(t[5]):""," {")),e+=r(t),n&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},u.i=function(t,e,n,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(n)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(o[s]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);n&&o[c[0]]||(void 0!==i&&(void 0!==c[5]&&(c[1]="@layer".concat(0<c[5].length?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),e&&(c[2]&&(c[1]="@media ".concat(c[2]," {").concat(c[1],"}")),c[2]=e),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),u.push(c))}},u}},417:t=>{t.exports=function(t,e){return e=e||{},t&&(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},354:t=>{t.exports=function(t){var e=t[1],t=t[3];return t?("function"==typeof btoa?(t=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t),t="/*# ".concat(t," */"),[e].concat([t])):[e]).join("\n"):e}},280:(t,e,n)=>{n.d(e,{Pq:()=>f,Qq:()=>p});var r="$";function s(){}function i(t,e){var n=new s;if(t instanceof s)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}s.prototype=i.prototype={constructor:s,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){t=r+t;return t in this&&delete this[t]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t,e=[];for(t in this)t[0]===r&&e.push(t.slice(1));return e},values:function(){var t,e=[];for(t in this)t[0]===r&&e.push(this[t]);return e},entries:function(){var t,e=[];for(t in this)t[0]===r&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var t,e=0;for(t in this)t[0]===r&&++e;return e},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}};let g=i;function o(){}n=g.prototype;o.prototype={constructor:o,has:n.has,add:function(t){return this[r+(t+="")]=t,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each};var a={value:function(){}};function l(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new c(r)}function c(t){this._=t}function u(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}c.prototype=l.prototype={constructor:c,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=u(i[n],t.name,e);else if(null==e)for(n in i)i[n]=u(i[n],t.name,null);return this}for(;++a<s;)if(n=(n=(t=o[a]).type)&&((t,e)=>{for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value})(i[n],t.name))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new c(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};let m=l;function h(i,t){var o,a,s,l,c=m("beforesend","progress","load","error"),u=g(),h=new XMLHttpRequest,d=null,f=null,p=0;function e(t){var e,n,r,i=h.status;if(!i&&((r=(n=h).responseType)&&"text"!==r?n.response:n.responseText)||200<=i&&i<300||304===i){if(s)try{e=s.call(o,h)}catch(t){return void c.call("error",o,t)}else e=h;c.call("load",o,e)}else c.call("error",o,t)}if("onload"in(h="undefined"==typeof XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(i)?h:new XDomainRequest)?h.onload=h.onerror=h.ontimeout=e:h.onreadystatechange=function(t){3<h.readyState&&e(t)},h.onprogress=function(t){c.call("progress",o,t)},o={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==e?u.remove(t):u.set(t,e+""),o)},mimeType:function(t){return arguments.length?(a=null==t?null:t+"",o):a},responseType:function(t){return arguments.length?(l=t,o):l},timeout:function(t){return arguments.length?(p=+t,o):p},user:function(t){return arguments.length<1?d:(d=null==t?null:t+"",o)},password:function(t){return arguments.length<1?f:(f=null==t?null:t+"",o)},response:function(t){return s=t,o},get:function(t,e){return o.send("GET",t,e)},post:function(t,e){return o.send("POST",t,e)},send:function(t,e,n){var r;return h.open(t,i,!0,d,f),null==a||u.has("accept")||u.set("accept",a+",*/*"),h.setRequestHeader&&u.each(function(t,e){h.setRequestHeader(e,t)}),null!=a&&h.overrideMimeType&&h.overrideMimeType(a),null!=l&&(h.responseType=l),0<p&&(h.timeout=p),null==n&&"function"==typeof e&&(n=e,e=null),null!=n&&1===n.length&&(r=n,n=function(t,e){r(null==t?e:null)}),null!=n&&o.on("error",n).on("load",function(t){n(null,t)}),c.call("beforesend",o,h),h.send(null==e?null:e),o},abort:function(){return h.abort(),o},on:function(){var t=c.on.apply(c,arguments);return t===c?o:t}},null==t)return o;if("function"!=typeof t)throw new Error("invalid callback: "+t);return o.get(t)}function d(n,r){return function(t,e){t=h(t).mimeType(n).response(r);if(null==e)return t;if("function"!=typeof e)throw new Error("invalid callback: "+e);return t.get(e)}}d("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)});let f=d("application/json",function(t){return JSON.parse(t.responseText)}),p=d("text/plain",function(t){return t.responseText});d("application/xml",function(t){t=t.responseXML;if(t)return t;throw new Error("parse error")});var _={},b={};function y(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function v(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}function A(t,e){var t=t+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function w(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+A(-e,6):9999<e?"+"+A(e,6):A(e,4))+"-"+A(t.getUTCMonth()+1,2)+"-"+A(t.getUTCDate(),2)+(o?"T"+A(n,2)+":"+A(r,2)+":"+A(i,2)+"."+A(o,3)+"Z":i?"T"+A(n,2)+":"+A(r,2)+":"+A(i,2)+"Z":r||n?"T"+A(n,2)+":"+A(r,2)+"Z":"")}function x(r){var e=new RegExp('["'+r+"\n\r]"),h=r.charCodeAt(0);function n(r,t){var e,n=[],i=r.length,o=0,a=0,s=i<=0,l=!1;function c(){if(s)return b;if(l)return l=!1,_;var t,e,n=o;if(34===r.charCodeAt(n)){for(;o++<i&&34!==r.charCodeAt(o)||34===r.charCodeAt(++o););return(t=o)>=i?s=!0:10===(e=r.charCodeAt(o++))?l=!0:13===e&&(l=!0,10===r.charCodeAt(o))&&++o,r.slice(n+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(e=r.charCodeAt(t=o++)))l=!0;else if(13===e)l=!0,10===r.charCodeAt(o)&&++o;else if(e!==h)continue;return r.slice(n,t)}return s=!0,r.slice(n,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(e=c())!==b;){for(var u=[];e!==_&&e!==b;)u.push(e),e=c();t&&null==(u=t(u,a++))||n.push(u)}return n}function i(t,n){return t.map(function(e){return n.map(function(t){return a(e[t])}).join(r)})}function o(t){return t.map(a).join(r)}function a(t){return null==t?"":t instanceof Date?w(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,o){var a,s;return(t=n(t,function(t,e){if(a)return a(t,e-1);var n,r,i;s=t,a=o?(r=o,i=y(n=t),function(t,e){return r(i(t),e,n)}):y(t)})).columns=s||[],t},parseRows:n,format:function(t,e){return[(e=null==e?v(t):e).map(a).join(r)].concat(i(t,e)).join("\n")},formatBody:function(t,e){return i(t,e=null==e?v(t):e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}e=x(","),n=e.parse;function E(n,o){return function(t,r,e){arguments.length<3&&(e=r,r=null);var i=h(t).mimeType(n);return i.row=function(t){return arguments.length?i.response((e=o,n=r=t,function(t){return e(t.responseText,n)})):r;var e,n},i.row(r),e?i.get(e):i}}E("text/csv",n);e=x("\t"),n=e.parse;E("text/tab-separated-values",n)},213:function(t,e,n){var r;void 0!==(e="function"==typeof(r=function(){"use strict";function i(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function u(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var h="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,d=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=h.saveAs||("object"!=typeof window||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(t,e,n){var r=h.URL||h.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin===location.origin?a(i):o(i.href)?u(t,e,n):a(i,i.target="_blank")):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){a(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(i(t,n),e);else if(o(t))u(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){a(r)})}}:function(t,e,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return u(t,e,n);var i="application/octet-stream"===t.type,o=/constructor/i.test(h.HTMLElement)||h.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||d)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},s.readAsDataURL(t)}else{var l=h.URL||h.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});h.saveAs=s.saveAs=s,true&&(t.exports=s)})?r.apply(e,[]):r)&&(t.exports=e)},529:t=>{t.exports=function r(i,o,a){function s(n,t){if(!o[n]){if(!i[n]){if(l)return l(n,!0);var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}e=o[n]={exports:{}};i[n][0].call(e.exports,function(t){var e=i[n][1][t];return s(e||t)},e,e.exports,r,i,o,a)}return o[n].exports}for(var l=void 0,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,i,o,a,s;if((this._events||(this._events={}),"error"===t)&&(!this._events.error||c(this._events.error)&&!this._events.error.length))throw(s=arguments[1])instanceof Error?s:((a=new Error('Uncaught, unspecified "error" event. ('+s+")")).context=s,a);if(u(e=this._events[t]))return!1;if(l(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),e.apply(this,r)}else if(c(e))for(r=Array.prototype.slice.call(arguments,1),n=(o=e.slice()).length,i=0;i<n;i++)o[i].apply(this,r);return!0},r.prototype.on=r.prototype.addListener=function(t,e){if(l(e))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,l(e.listener)?e.listener:e),this._events[t]?c(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,c(this._events[t])&&!this._events[t].warned&&(e=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<e&&this._events[t].length>e&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(t,e){var n;if(l(e))return n=!1,r.listener=e,this.on(t,r),this;throw TypeError("listener must be a function");function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}},r.prototype.removeListener=function(t,e){var n,r,i,o;if(!l(e))throw TypeError("listener must be a function");if(this._events&&this._events[t])if(i=(n=this._events[t]).length,r=-1,n===e||l(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(c(n)){for(o=i;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);this.removeAllListeners("removeListener"),this._events={}}else{if(l(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);delete this._events[t]}else 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t];return this},r.prototype.listeners=function(t){t=this._events&&this._events[t]?l(this._events[t])?[this._events[t]]:this._events[t].slice():[];return t},r.prototype.listenerCount=function(t){if(this._events){t=this._events[t];if(l(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){var r=navigator.userAgent.toLowerCase(),i=navigator.platform.toLowerCase(),o=r.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],a="ie"===o[1]&&document.documentMode,a={name:"version"===o[1]?o[3]:o[1],version:a||parseFloat("opera"===o[1]&&o[4]?o[4]:o[2]),platform:{name:r.match(/ip(?:ad|od|hone)/)?"ios":(r.match(/(?:webos|android)/)||i.match(/mac|win|linux/)||["other"])[0]}};a[a.name]=!0,a[a.name+parseInt(a.version,10)]=!0,a.platform[a.platform.name]=!0,e.exports=a},{}],3:[function(t,e,n){var s={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice,u=t("events").EventEmitter,h=t("./browser.coffee"),t=(()=>{var i,o,t,e=a,n=u;for(t in n)s.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}function a(t){var e,n,r;for(n in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),i)r=i[n],null==(e=this.options)[n]&&(e[n]=r)}return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,o={delay:500,copy:!(i={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1})},a.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},a.prototype.setOptions=function(t){var e,n,r=[];for(e in t)s.call(t,e)&&(n=t[e],r.push(this.setOption(e,n)));return r},a.prototype.addFrame=function(t,e){var n,r;for(r in null==e&&(e={}),(n={}).transparent=this.options.transparent,o)n[r]=e[r]||o[r];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)n.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?n.data=this.getContextData(t):n.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?n.data=this.getImageData(t):n.image=t}return this.frames.push(n)},a.prototype.render=function(){var t,e,n;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,n=[];for(t=0,e=this.frames.length;0<=e?t<e:e<t;0<=e?++t:--t)n.push(null);return n}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,n=e;0<=n?t<n:n<t;0<=n?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},a.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},a.prototype.spawnWorkers=function(){var e,n,r,i=Math.min(this.options.workers,this.frames.length);return function(){n=[];for(var t=e=this.freeWorkers.length;e<=i?t<i:i<t;e<=i?t++:t--)n.push(t);return n}.apply(this).forEach((r=this,function(t){var e;return r.log("spawning worker "+t),(e=new Worker(r.options.workerScript)).onmessage=function(t){return r.activeWorkers.splice(r.activeWorkers.indexOf(e),1),r.freeWorkers.push(e),r.frameFinished(t.data)},r.freeWorkers.push(e)})),i},a.prototype.frameFinished=function(t){var e,n;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),2<this.frames.length))for(e=1,n=this.freeWorkers.length;1<=n?e<n:n<e;1<=n?++e:--e)this.renderNextFrame();return 0<=l.call(this.imageParts,null)?this.renderNextFrame():this.finishRendering()},a.prototype.finishRendering=function(){for(var t,e,n,r,i,o,a,s,l,c,u,h,d=0,f=this.imageParts,p=0,g=f.length;p<g;p++)d+=((e=f[p]).data.length-1)*e.pageSize+e.cursor;for(d+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(d/1e3)+"kb"),t=new Uint8Array(d),i=l=0,a=(u=this.imageParts).length;i<a;i++)for(n=o=0,s=(h=(e=u[i]).data).length;o<s;n=++o)c=h[n],t.set(c,l),n===e.data.length-1?l+=e.cursor:l+=e.pageSize;return r=new Blob([t],{type:"image/gif"}),this.emit("finished",r,t)},a.prototype.renderNextFrame=function(){var t,e;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],e=this.freeWorkers.shift(),t=this.getTask(t),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(e),e.postMessage(t)},a.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},a.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},a.prototype.getTask=function(t){var e=this.frames.indexOf(t),e={index:e,last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===h.name};if(null!=t.data)e.data=t.data;else if(null!=t.context)e.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");e.data=this.getImageData(t.image)}return e},a.prototype.log=function(){var t=1<=arguments.length?c.call(arguments,0):[];if(this.options.debug)return console.log.apply(console,t)},a})();e.exports=t},{"./browser.coffee":2,events:1}]},{},[3])(3)},894:(t,e)=>{function a(t){return"object"!=typeof t||"toString"in t?t:Object.prototype.toString.call(t).slice(8,-1)}Object.defineProperty(e,"__esModule",{value:!0});var n="object"==typeof process&&!0;function s(t,e){if(!t){if(n)throw new Error("Invariant failed");throw new Error(e())}}e.invariant=s;var l=Object.prototype.hasOwnProperty,o=Array.prototype.splice,r=Object.prototype.toString;function c(t){return r.call(t).slice(8,-1)}var i=Object.assign||function(e,n){return u(n).forEach(function(t){l.call(n,t)&&(e[t]=n[t])}),e},u="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function h(t){return Array.isArray(t)?i(t.constructor(t.length),t):"Map"===c(t)?new Map(t):"Set"===c(t)?new Set(t):t&&"object"==typeof t?i(Object.create(Object.getPrototypeOf(t)),t):t}Object.defineProperty(f.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),f.prototype.extend=function(t,e){this.commands[t]=e},f.prototype.update=function(r,t){var i=this,o="function"==typeof t?{$apply:t}:t,a=(Array.isArray(r)&&Array.isArray(o)||s(!Array.isArray(o),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),s("object"==typeof o&&null!==o,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(i.commands).join(", ")+"."}),r);return u(o).forEach(function(t){var e,n;l.call(i.commands,t)?(e=r===a,a=i.commands[t](o[t],a,o,r),e&&i.isEquals(a,r)&&(a=r)):(e="Map"===c(r)?i.update(r.get(t),o[t]):i.update(r[t],o[t]),n="Map"===c(a)?a.get(t):a[t],i.isEquals(e,n)&&(void 0!==e||l.call(r,t))||("Map"===c(a=a===r?h(r):a)?a.set(t,e):a[t]=e))}),a};var d=f;function f(){this.commands=i({},p),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new f).update}}e.Context=d;var p={$push:function(t,e,n){return g(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return g(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,r){var i;return i=e,n=n,s(Array.isArray(i),function(){return"Expected $splice target to be an array; got "+a(i)}),_(n.$splice),t.forEach(function(t){_(t),e===r&&t.length&&(e=h(r)),o.apply(e,t)}),e},$set:function(t,e,n){return s(1===Object.keys(n).length,function(){return"Cannot have more than one key in an object with $set"}),t},$toggle:function(t,e){m(t,"$toggle");var n=t.length?h(e):e;return t.forEach(function(t){n[t]=!e[t]}),n},$unset:function(t,e,n,r){return m(t,"$unset"),t.forEach(function(t){Object.hasOwnProperty.call(e,t)&&delete(e=e===r?h(r):e)[t]}),e},$add:function(t,n,e,r){return b(n,"$add"),m(t,"$add"),"Map"===c(n)?t.forEach(function(t){var e=t[0],t=t[1];(n=n===r&&n.get(e)!==t?h(r):n).set(e,t)}):t.forEach(function(t){(n=n!==r||n.has(t)?n:h(r)).add(t)}),n},$remove:function(t,e,n,r){return b(e,"$remove"),m(t,"$remove"),t.forEach(function(t){(e=e===r&&e.has(t)?h(r):e).delete(t)}),e},$merge:function(e,n,t,r){var i,o;return i=n,s((o=e)&&"object"==typeof o,function(){return"update(): $merge expects a spec of type 'object'; got "+a(o)}),s(i&&"object"==typeof i,function(){return"update(): $merge expects a target of type 'object'; got "+a(i)}),u(e).forEach(function(t){e[t]!==n[t]&&((n=n===r?h(r):n)[t]=e[t])}),n},$apply:function(t,e){var n;return s("function"==typeof(n=t),function(){return"update(): expected spec of $apply to be a function; got "+a(n)+"."}),t(e)}},d=new d;function g(t,e,n){s(Array.isArray(t),function(){return"update(): expected target of "+a(n)+" to be an array; got "+a(t)+"."}),m(e[n],n)}function m(t,e){s(Array.isArray(t),function(){return"update(): expected spec of "+a(e)+" to be an array; got "+a(t)+". Did you forget to wrap your parameter in an array?"})}function _(t){s(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+a(t)+". Did you forget to wrap your parameters in an array?"})}function b(t,e){var n=c(t);s("Map"===n||"Set"===n,function(){return"update(): "+a(e)+" expects a target of type Set or Map; got "+a(n)})}e.isEquals=d.update.isEquals,e.extend=d.extend,e.default=d.update,e.default.default=t.exports=i(e.default,e)},411:(t,e,n)=>{var r="undefined"!=typeof window?window:null,i="undefined"!=typeof window?document:null;if(r){for(var o,a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;u<20;++u)a[111+u]="f"+u;for(u=0;u<=9;++u)a[u+96]=u.toString();w.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},w.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},w.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},w.prototype.reset=function(){return this._callbacks={},this._directMap={},this},w.prototype.stopCallback=function(t,e){var n;return!(-1<(" "+e.className+" ").indexOf(" mousetrap ")||function t(e,n){return null!==e&&e!==i&&(e===n||t(e.parentNode,n))}(e,this.target))&&("INPUT"==(e="composedPath"in t&&"function"==typeof t.composedPath&&(n=t.composedPath()[0])!==t.target?n:e).tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable)},w.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},w.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);o=null},(w.init=function(){var t,e=w(i);for(t in e)"_"!==t.charAt(0)&&(w[t]=(t=>function(){return e[t].apply(e,arguments)})(t))})(),r.Mousetrap=w,t.exports&&(t.exports=w),void 0!==(r=function(){return w}.call(e,n,e,t))&&(t.exports=r)}function b(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function y(t){var e;return"keypress"==t.type?(e=String.fromCharCode(t.which),t.shiftKey?e:e.toLowerCase()):a[t.which]||s[t.which]||String.fromCharCode(t.which).toLowerCase()}function v(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function h(t,e,n){return n="keypress"==(n=n||((()=>{if(!o)for(var t in o={},a)95<t&&t<112||a.hasOwnProperty(t)&&(o[a[t]]=t);return o})()[t]?"keydown":"keypress"))&&e.length?"keydown":n}function A(t,e){for(var n,r=[],i="+"===(t=t)?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+"),o=0;o<i.length;++o)n=i[o],c[n]&&(n=c[n]),e&&"keypress"!=e&&l[n]&&(n=l[n],r.push("shift")),v(n)&&r.push(n);return{key:n,modifiers:r,action:e=h(n,r,e)}}function w(t){var d=this;if(t=t||i,!(d instanceof w))return new w(t);d.target=t,d._callbacks={};var l,f={},c=!(d._directMap={}),u=!1,h=!1;function p(t){t=t||{};var e,n=!1;for(e in f)t[e]?n=!0:f[e]=0;n||(h=!1)}function g(t,e,n,r,i,o){var a,s=[],l=n.type;if(!d._callbacks[t])return[];for("keyup"==l&&v(t)&&(e=[t]),a=0;a<d._callbacks[t].length;++a){var c,u,h=d._callbacks[t][a];!r&&h.seq&&f[h.seq]!=h.level||l!=h.action||("keypress"!=l||n.metaKey||n.ctrlKey)&&(c=e,u=h.modifiers,c.sort().join(",")!==u.sort().join(","))||(c=!r&&h.combo==i,u=r&&h.seq==r&&h.level==o,(c||u)&&d._callbacks[t].splice(a,1),s.push(h))}return s}function m(t,e,n,r){d.stopCallback(e,e.target||e.srcElement,n,r)||!1===t(e,n)&&((r=e).preventDefault?r.preventDefault():r.returnValue=!1,(t=e).stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function e(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e,n=y(t);n&&("keyup"==t.type&&c===n?c=!1:d.handleKey(n,(n=[],(e=t).shiftKey&&n.push("shift"),e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),n),t))}function a(e,t,n,r){function i(t){return function(){h=t,++f[e],clearTimeout(l),l=setTimeout(p,1e3)}}function o(t){m(n,t,e),"keyup"!==r&&(c=y(t)),setTimeout(p,10)}for(var a=f[e]=0;a<t.length;++a){var s=a+1===t.length?o:i(r||A(t[a+1]).action);_(t[a],s,r,e,a)}}function _(t,e,n,r,i){d._directMap[t+":"+n]=e;var o=(t=t.replace(/\s+/g," ")).split(" ");1<o.length?a(t,o,e,n):(o=A(t,n),d._callbacks[o.key]=d._callbacks[o.key]||[],g(o.key,o.modifiers,{type:o.action},r,t,i),d._callbacks[o.key][r?"unshift":"push"]({callback:e,modifiers:o.modifiers,action:o.action,seq:r,level:i,combo:t}))}d._handleKey=function(t,e,n){for(var r=g(t,e,n),i={},o=0,a=!1,s=0;s<r.length;++s)r[s].seq&&(o=Math.max(o,r[s].level));for(s=0;s<r.length;++s)r[s].seq?r[s].level==o&&(a=!0,i[r[s].seq]=1,m(r[s].callback,n,r[s].combo,r[s].seq)):a||m(r[s].callback,n,r[s].combo);e="keypress"==n.type&&u;n.type!=h||v(t)||e||p(i),u=a&&"keydown"==n.type},d._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)_(t[r],e,n)},b(t,"keypress",e),b(t,"keydown",e),b(t,"keyup",e)}},72:t=>{var c=[];function u(t){for(var e=-1,n=0;n<c.length;n++)if(c[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s=n[a]||0,l="".concat(a," ").concat(s),a=(n[a]=s+1,u(l)),s={css:o[1],media:o[2],sourceMap:o[3],supports:o[4],layer:o[5]};-1!==a?(c[a].references++,c[a].updater(s)):(o=((e,t)=>{var n=t.domAPI(t);return n.update(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer||n.update(e=t):n.remove()}})(s,e),e.byIndex=i,c.splice(i,0,{identifier:l,updater:o,references:1})),r.push(l)}return r}t.exports=function(t,o){var a=s(t=t||[],o=o||{});return function(t){t=t||[];for(var e=0;e<a.length;e++){var n=u(a[e]);c[n].references--}for(var t=s(t,o),r=0;r<a.length;r++){var i=u(a[r]);0===c[i].references&&(c[i].updater(),c.splice(i,1))}a=t}}},659:t=>{var n={};t.exports=function(t,e){if(!(t=(t=>{if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]})(t)))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(o){var a;return"undefined"==typeof document?{update:function(){},remove:function(){}}:(a=o.insertStyleElement(o),{update:function(t){var e,n,r,i;e=a,n=o,r="",(t=t).supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {")),(i=void 0!==t.layer)&&(r+="@layer".concat(0<t.layer.length?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}"),(i=t.sourceMap)&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)},remove:function(){var t;null!==(t=a).parentNode&&t.parentNode.removeChild(t)}})}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},587:t=>{
/**
* vkBeautify - javascript plugin to pretty-print or minify text in XML, JSON, CSS and SQL formats.
*
* Copyright (c) 2012 Vadim Kiryukhin
* vkiryukhin @ gmail.com
* http://www.eslinstructor.net/vkbeautify/
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*   Pretty print
*
*        vkbeautify.xml(text [,indent_pattern]);
*        vkbeautify.json(text [,indent_pattern]);
*        vkbeautify.css(text [,indent_pattern]);
*        vkbeautify.sql(text [,indent_pattern]);
*
*        @text - String; text to beatufy;
*        @indent_pattern - Integer | String;
*                Integer:  number of white spaces;
*                String:   character string to visualize indentation ( can also be a set of white spaces )
*   Minify
*
*        vkbeautify.xmlmin(text [,preserve_comments]);
*        vkbeautify.jsonmin(text);
*        vkbeautify.cssmin(text [,preserve_comments]);
*        vkbeautify.sqlmin(text);
*
*        @text - String; text to minify;
*        @preserve_comments - Bool; [optional];
*                Set this flag to true to prevent removing comments from @text ( minxml and mincss functions only. )
*
*   Examples:
*        vkbeautify.xml(text); // pretty print XML
*        vkbeautify.json(text, 4 ); // pretty print JSON
*        vkbeautify.css(text, '. . . .'); // pretty print CSS
*        vkbeautify.sql(text, '----'); // pretty print SQL
*
*        vkbeautify.xmlmin(text, true);// minify XML, preserve comments
*        vkbeautify.jsonmin(text);// minify JSON
*        vkbeautify.cssmin(text);// minify CSS, remove comments ( default )
*        vkbeautify.sqlmin(text);// minify SQL
*
*/
function p(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+e);return n}function e(){this.step="    ",this.shift=p(this.step)}e.prototype.xml=function(t,e){for(var n=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,i=!1,o=0,a="",s=0,l=e?p(e):this.shift,s=0;s<r;s++)-1<n[s].search(/<!/)?(a+=l[o]+n[s],i=!0,(-1<n[s].search(/-->/)||-1<n[s].search(/\]>/)||-1<n[s].search(/!DOCTYPE/))&&(i=!1)):-1<n[s].search(/-->/)||-1<n[s].search(/\]>/)?(a+=n[s],i=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(a+=n[s],i||o--):-1<n[s].search(/<\w/)&&-1==n[s].search(/<\//)&&-1==n[s].search(/\/>/)?a=i?a+n[s]:a+(l[o++]+n[s]):-1<n[s].search(/<\w/)&&-1<n[s].search(/<\//)?a=i?a+n[s]:a+(l[o]+n[s]):-1<n[s].search(/<\//)?a=i?a+n[s]:a+(l[--o]+n[s]):-1<n[s].search(/\/>/)?a=i?a+n[s]:a+(l[o]+n[s]):-1<n[s].search(/<\?/)||-1<n[s].search(/xmlns\:/)||-1<n[s].search(/xmlns\=/)?a+=l[o]+n[s]:a+=n[s];return"\n"==a[0]?a.slice(1):a},e.prototype.json=function(t,e){e=e||this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},e.prototype.css=function(t,e){for(var n=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=n.length,i=0,o="",a=0,s=e?p(e):this.shift,a=0;a<r;a++)/\{/.exec(n[a])?o+=s[i++]+n[a]:/\}/.exec(n[a])?o+=s[--i]+n[a]:(/\*\\/.exec(n[a]),o+=s[i]+n[a]);return o.replace(/^\n{1,}/,"")},e.prototype.sql=function(t,e){for(var n,r,i,o=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),a=o.length,s=[],l=0,c=this.step,u=0,h="",d=0,f=e?p(e):this.shift,d=0;d<a;d++)s=d%2?s.concat(o[d]):s.concat((n=o[d],r=c,n.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+r+r+"AND ").replace(/ BETWEEN /gi,"~::~"+r+"BETWEEN ").replace(/ CASE /gi,"~::~"+r+"CASE ").replace(/ ELSE /gi,"~::~"+r+"ELSE ").replace(/ END /gi,"~::~"+r+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+r+"ON ").replace(/ OR /gi,"~::~"+r+r+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+r+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+r).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+r+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")));for(a=s.length,d=0;d<a;d++)i=s[d],u=u-(i.replace(/\(/g,"").length-i.replace(/\)/g,"").length),/\s{0,}\s{0,}SELECT\s{0,}/.exec(s[d])&&(s[d]=s[d].replace(/\,/g,",\n"+c+c)),/\s{0,}\s{0,}SET\s{0,}/.exec(s[d])&&(s[d]=s[d].replace(/\,/g,",\n"+c+c)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(s[d])?h+=f[++l]+s[d]:/\'/.exec(s[d])?(u<1&&l&&l--,h+=s[d]):(h+=f[l]+s[d],u<1&&l&&l--);return h=h.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},e.prototype.xmlmin=function(t,e){return(e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},e.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},e.prototype.cssmin=function(t,e){return(e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},e.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},t.exports=new e},37:(t,e,n)=>{t.exports=n.p+"539f46271b6b7d9eced4.eot?9130959"},792:t=>{t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxtZXRhZGF0YT5Db3B5cmlnaHQgKEMpIDIwMTcgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbTwvbWV0YWRhdGE+CjxkZWZzPgo8Zm9udCBpZD0iZm9udGVsbG8iIGhvcml6LWFkdi14PSIxMDAwIiA+Cjxmb250LWZhY2UgZm9udC1mYW1pbHk9ImZvbnRlbGxvIiBmb250LXdlaWdodD0iNDAwIiBmb250LXN0cmV0Y2g9Im5vcm1hbCIgdW5pdHMtcGVyLWVtPSIxMDAwIiBhc2NlbnQ9Ijg1MCIgZGVzY2VudD0iLTE1MCIgLz4KPG1pc3NpbmctZ2x5cGggaG9yaXotYWR2LXg9IjEwMDAiIC8+CjxnbHlwaCBnbHlwaC1uYW1lPSJvayIgdW5pY29kZT0iJiN4ZTgwMDsiIGQ9Ik05MzMgNTM0cTAtMjItMTYtMzhsLTQwNC00MDQtNzYtNzZxLTE2LTE1LTM4LTE1dC0zOCAxNWwtNzYgNzYtMjAyIDIwMnEtMTUgMTYtMTUgMzh0MTUgMzhsNzYgNzZxMTYgMTYgMzggMTZ0MzgtMTZsMTY0LTE2NSAzNjYgMzY3cTE2IDE2IDM4IDE2dDM4LTE2bDc2LTc2cTE2LTE1IDE2LTM4eiIgaG9yaXotYWR2LXg9IjEwMDAiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iY2FuY2VsIiB1bmljb2RlPSImI3hlODAxOyIgZD0iTTcyNCAxMTJxMC0yMi0xNS0zOGwtNzYtNzZxLTE2LTE1LTM4LTE1dC0zOCAxNWwtMTY0IDE2NS0xNjQtMTY1cS0xNi0xNS0zOC0xNXQtMzggMTVsLTc2IDc2cS0xNiAxNi0xNiAzOHQxNiAzOGwxNjQgMTY0LTE2NCAxNjRxLTE2IDE2LTE2IDM4dDE2IDM4bDc2IDc2cTE2IDE2IDM4IDE2dDM4LTE2bDE2NC0xNjQgMTY0IDE2NHExNiAxNiAzOCAxNnQzOC0xNmw3Ni03NnExNS0xNSAxNS0zOHQtMTUtMzhsLTE2NC0xNjQgMTY0LTE2NHExNS0xNSAxNS0zOHoiIGhvcml6LWFkdi14PSI3ODUuNyIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJwbHVzIiB1bmljb2RlPSImI3hlODAyOyIgZD0iTTc4NiA0Mzl2LTEwN3EwLTIyLTE2LTM4dC0zOC0xNWgtMjMydi0yMzNxMC0yMi0xNi0zN3QtMzgtMTZoLTEwN3EtMjIgMC0zOCAxNnQtMTUgMzd2MjMzaC0yMzJxLTIzIDAtMzggMTV0LTE2IDM4djEwN3EwIDIzIDE2IDM4dDM4IDE2aDIzMnYyMzJxMCAyMiAxNSAzOHQzOCAxNmgxMDdxMjMgMCAzOC0xNnQxNi0zOHYtMjMyaDIzMnEyMyAwIDM4LTE2dDE2LTM4eiIgaG9yaXotYWR2LXg9Ijc4NS43IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9ImRvd24tYmlnIiB1bmljb2RlPSImI3hlODAzOyIgZD0iTTg5OSAzODZxMC0zMC0yMS01MGwtMzYzLTM2NHEtMjItMjEtNTEtMjEtMjkgMC01MCAyMWwtMzYzIDM2NHEtMjEgMjAtMjEgNTAgMCAyOSAyMSA1MWw0MSA0MXEyMiAyMSA1MSAyMSAyOSAwIDUwLTIxbDE2NC0xNjR2MzkzcTAgMjkgMjEgNTB0NTEgMjJoNzFxMjkgMCA1MC0yMnQyMS01MHYtMzkzbDE2NSAxNjRxMjAgMjEgNTAgMjEgMjkgMCA1MS0yMWw0MS00MXEyMS0yMiAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJsZWZ0LWJpZyIgdW5pY29kZT0iJiN4ZTgwNDsiIGQ9Ik04NTcgMzUwdi03MXEwLTMwLTE4LTUxdC00Ny0yMWgtMzkzbDE2NC0xNjRxMjEtMjAgMjEtNTB0LTIxLTUwbC00Mi00M3EtMjEtMjAtNTEtMjAtMjkgMC01MCAyMGwtMzY0IDM2NHEtMjAgMjEtMjAgNTAgMCAyOSAyMCA1MWwzNjQgMzYzcTIxIDIxIDUwIDIxIDI5IDAgNTEtMjFsNDItNDFxMjEtMjIgMjEtNTF0LTIxLTUxbC0xNjQtMTY0aDM5M3EyOSAwIDQ3LTIwdDE4LTUxeiIgaG9yaXotYWR2LXg9Ijg1Ny4xIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9InJpZ2h0LWJpZyIgdW5pY29kZT0iJiN4ZTgwNTsiIGQ9Ik04MjEgMzE0cTAtMzAtMjAtNTBsLTM2My0zNjRxLTIyLTIwLTUxLTIwLTI5IDAtNTAgMjBsLTQyIDQycS0yMiAyMS0yMiA1MXQyMiA1MWwxNjMgMTYzaC0zOTNxLTI5IDAtNDcgMjF0LTE4IDUxdjcxcTAgMzAgMTggNTF0NDcgMjBoMzkzbC0xNjMgMTY1cS0yMiAyMC0yMiA1MHQyMiA1MGw0MiA0MnEyMSAyMSA1MCAyMSAyOSAwIDUxLTIxbDM2My0zNjNxMjAtMjAgMjAtNTF6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0idXAtYmlnIiB1bmljb2RlPSImI3hlODA2OyIgZD0iTTg5OSAzMDhxMC0yOC0yMS01MGwtNDEtNDJxLTIyLTIxLTUxLTIxLTMwIDAtNTAgMjFsLTE2NSAxNjR2LTM5M3EwLTI5LTIwLTQ3dC01MS0xOWgtNzFxLTMwIDAtNTEgMTl0LTIxIDQ3djM5M2wtMTY0LTE2NHEtMjAtMjEtNTAtMjF0LTUwIDIxbC00MiA0MnEtMjEgMjEtMjEgNTAgMCAzMCAyMSA1MWwzNjMgMzYzcTIwIDIxIDUwIDIxIDMwIDAgNTEtMjFsMzYzLTM2M3EyMS0yMiAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJsZWZ0LW9wZW4iIHVuaWNvZGU9IiYjeGU4MDc7IiBkPSJNNjU0IDY4MmwtMjk3LTI5NiAyOTctMjk3cTEwLTEwIDEwLTI1dC0xMC0yNWwtOTMtOTNxLTExLTEwLTI1LTEwdC0yNSAxMGwtNDE0IDQxNXEtMTEgMTAtMTEgMjV0MTEgMjVsNDE0IDQxNHExMCAxMSAyNSAxMXQyNS0xMWw5My05M3ExMC0xMCAxMC0yNXQtMTAtMjV6IiBob3Jpei1hZHYteD0iNzE0LjMiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0icmlnaHQtb3BlbiIgdW5pY29kZT0iJiN4ZTgwODsiIGQ9Ik02MTggMzYxbC00MTQtNDE1cS0xMS0xMC0yNS0xMHQtMjUgMTBsLTkzIDkzcS0xMSAxMS0xMSAyNXQxMSAyNWwyOTYgMjk3LTI5NiAyOTZxLTExIDExLTExIDI1dDExIDI1bDkzIDkzcTEwIDExIDI1IDExdDI1LTExbDQxNC00MTRxMTAtMTEgMTAtMjV0LTEwLTI1eiIgaG9yaXotYWR2LXg9IjcxNC4zIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9IndyZW5jaCIgdW5pY29kZT0iJiN4ZTgwOTsiIGQ9Ik0yMTQgMjlxMCAxNC0xMCAyNXQtMjUgMTAtMjUtMTAtMTEtMjUgMTEtMjUgMjUtMTEgMjUgMTEgMTAgMjV6IG0zNjAgMjM0bC0zODEtMzgxcS0yMS0yMC01MC0yMC0yOSAwLTUxIDIwbC01OSA2MXEtMjEgMjAtMjEgNTAgMCAyOSAyMSA1MWwzODAgMzgwcTIyLTU1IDY0LTk3dDk3LTY0eiBtMzU0IDI0M3EwLTIyLTEzLTU5LTI3LTc1LTkyLTEyMnQtMTQ0LTQ2cS0xMDQgMC0xNzcgNzN0LTczIDE3NyA3MyAxNzYgMTc3IDc0cTMyIDAgNjctMTB0NjAtMjZxOS02IDktMTV0LTktMTZsLTE2My05NHYtMTI1bDEwOC02MHEyIDIgNDQgMjd0NzUgNDUgNDAgMjBxOCAwIDEzLTV0NS0xNHoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJyZXNpemUtZnVsbCIgdW5pY29kZT0iJiN4ZTgwYTsiIGQ9Ik00MjEgMjYxcTAtNy01LTEzbC0xODUtMTg1IDgwLTgxcTEwLTEwIDEwLTI1dC0xMC0yNS0yNS0xMWgtMjUwcS0xNSAwLTI1IDExdC0xMSAyNXYyNTBxMCAxNSAxMSAyNXQyNSAxMSAyNS0xMWw4MC04MCAxODYgMTg1cTUgNiAxMiA2dDEzLTZsNjQtNjNxNS02IDUtMTN6IG00MzYgNDgydi0yNTBxMC0xNS0xMC0yNXQtMjYtMTEtMjUgMTFsLTgwIDgwLTE4NS0xODVxLTYtNi0xMy02dC0xMyA2bC02NCA2NHEtNSA1LTUgMTJ0NSAxM2wxODYgMTg1LTgxIDgxcS0xMCAxMC0xMCAyNXQxMCAyNSAyNSAxMWgyNTBxMTUgMCAyNi0xMXQxMC0yNXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJjdyIgdW5pY29kZT0iJiN4ZTgwYjsiIGQ9Ik04NTcgNzA3di0yNTBxMC0xNC0xMC0yNXQtMjYtMTFoLTI1MHEtMjMgMC0zMiAyMy0xMCAyMiA3IDM4bDc3IDc3cS04MiA3Ny0xOTQgNzctNTggMC0xMTEtMjN0LTkxLTYxLTYxLTkxLTIzLTExMSAyMy0xMTEgNjEtOTEgOTEtNjEgMTExLTIzcTY2IDAgMTI1IDI5dDEwMCA4MnE0IDYgMTMgNyA4IDAgMTQtNWw3Ni03N3E1LTQgNi0xMXQtNS0xM3EtNjAtNzQtMTQ3LTExNHQtMTgyLTQxcS04NyAwLTE2NyAzNHQtMTM2IDkyLTkyIDEzNy0zNCAxNjYgMzQgMTY2IDkyIDEzNyAxMzYgOTIgMTY3IDM0cTgyIDAgMTU4LTMxdDEzNy04OGw3MiA3MnExNyAxOCAzOSA4IDIyLTkgMjItMzN6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0idHJhc2gtZW1wdHkiIHVuaWNvZGU9IiYjeGU4MGU7IiBkPSJNMjg2IDQzOXYtMzIxcTAtOC01LTEzdC0xMy01aC0zNnEtOCAwLTEzIDV0LTUgMTN2MzIxcTAgOCA1IDEzdDEzIDVoMzZxOCAwIDEzLTV0NS0xM3ogbTE0MyAwdi0zMjFxMC04LTUtMTN0LTEzLTVoLTM2cS04IDAtMTMgNXQtNSAxM3YzMjFxMCA4IDUgMTN0MTMgNWgzNnE4IDAgMTMtNXQ1LTEzeiBtMTQyIDB2LTMyMXEwLTgtNS0xM3QtMTItNWgtMzZxLTggMC0xMyA1dC01IDEzdjMyMXEwIDggNSAxM3QxMyA1aDM2cTcgMCAxMi01dDUtMTN6IG03Mi00MDR2NTI5aC01MDB2LTUyOXEwLTEyIDQtMjJ0OC0xNSA2LTVoNDY0cTIgMCA2IDV0OCAxNSA0IDIyeiBtLTM3NSA2MDFoMjUwbC0yNyA2NXEtNCA1LTkgNmgtMTc3cS02LTEtMTAtNnogbTUxOC0xOHYtMzZxMC04LTUtMTN0LTEzLTVoLTU0di01MjlxMC00Ni0yNi04MHQtNjMtMzRoLTQ2NHEtMzcgMC02MyAzM3QtMjcgNzl2NTMxaC01M3EtOCAwLTEzIDV0LTUgMTN2MzZxMCA4IDUgMTN0MTMgNWgxNzJsMzkgOTNxOSAyMSAzMSAzNXQ0NCAxNWgxNzhxMjMgMCA0NC0xNXQzMC0zNWwzOS05M2gxNzNxOCAwIDEzLTV0NS0xM3oiIGhvcml6LWFkdi14PSI3ODUuNyIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJmb250IiB1bmljb2RlPSImI3hlODBmOyIgZD0iTTQwNSA1MzhsLTk1LTI1MXExOCAwIDc2LTF0ODktMXExMSAwIDMyIDEtNDggMTQxLTEwMiAyNTJ6IG0tNDA1LTYxN2wxIDQ0cTEzIDQgMzEgN3QzMiA2IDI4IDggMjUgMTcgMTcgMjhsMTMyIDM0NCAxNTYgNDA0aDcycTQtOCA2LTEybDExNC0yNjhxMTktNDMgNjAtMTQ0dDYzLTE1M3E5LTE5IDMzLTgwdDQwLTk0cTExLTI2IDE5LTMyIDExLTkgNDktMTd0NDctMTFxNC0yMiA0LTMyIDAtMy0xLTh0MC03cS0zNSAwLTEwNiA1dC0xMDcgNHEtNDIgMC0xMjAtNHQtOTktNHEwIDI0IDIgNDNsNzMgMTZxMSAwIDcgMXQ5IDIgOCAzIDkgNCA2IDQgNSA2IDEgOHEwIDktMTcgNTR0LTQwIDk5LTI0IDU2bC0yNTEgMXEtMTQtMzItNDMtMTA5dC0yOC05MXEwLTEyIDgtMjF0MjQtMTQgMjctNyAzMi01IDIzLTJxMS0xMSAxLTMyIDAtNS0xLTE2LTMzIDAtOTggNnQtOTcgNnEtNSAwLTE1LTN0LTEyLTJxLTQ1LTgtMTA1LTh6IiBob3Jpei1hZHYteD0iOTI4LjYiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iem9vbS1pbiIgdW5pY29kZT0iJiN4ZTgxMDsiIGQ9Ik01NzEgNDA0di0zNnEwLTctNS0xM3QtMTItNWgtMTI1di0xMjVxMC03LTYtMTN0LTEyLTVoLTM2cS03IDAtMTMgNXQtNSAxM3YxMjVoLTEyNXEtNyAwLTEyIDV0LTYgMTN2MzZxMCA3IDYgMTJ0MTIgNWgxMjV2MTI1cTAgOCA1IDEzdDEzIDVoMzZxNyAwIDEyLTV0Ni0xM3YtMTI1aDEyNXE3IDAgMTItNXQ1LTEyeiBtNzItMThxMCAxMDMtNzMgMTc2dC0xNzcgNzQtMTc3LTc0LTczLTE3NiA3My0xNzcgMTc3LTczIDE3NyA3MyA3MyAxNzd6IG0yODYtNDY1cTAtMjktMjEtNTB0LTUxLTIxcS0zMCAwLTUwIDIxbC0xOTEgMTkxcS0xMDAtNjktMjIzLTY5LTgwIDAtMTUzIDMxdC0xMjUgODQtODQgMTI1LTMxIDE1MyAzMSAxNTIgODQgMTI2IDEyNSA4NCAxNTMgMzEgMTUzLTMxIDEyNS04NCA4NC0xMjYgMzEtMTUycTAtMTIzLTY5LTIyM2wxOTEtMTkxcTIxLTIxIDIxLTUxeiIgaG9yaXotYWR2LXg9IjkyOC42IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9Inpvb20tb3V0IiB1bmljb2RlPSImI3hlODExOyIgZD0iTTU3MSA0MDR2LTM2cTAtNy01LTEzdC0xMi01aC0zMjJxLTcgMC0xMiA1dC02IDEzdjM2cTAgNyA2IDEydDEyIDVoMzIycTcgMCAxMi01dDUtMTJ6IG03Mi0xOHEwIDEwMy03MyAxNzZ0LTE3NyA3NC0xNzctNzQtNzMtMTc2IDczLTE3NyAxNzctNzMgMTc3IDczIDczIDE3N3ogbTI4Ni00NjVxMC0yOS0yMS01MHQtNTEtMjFxLTMwIDAtNTAgMjFsLTE5MSAxOTFxLTEwMC02OS0yMjMtNjktODAgMC0xNTMgMzF0LTEyNSA4NC04NCAxMjUtMzEgMTUzIDMxIDE1MiA4NCAxMjYgMTI1IDg0IDE1MyAzMSAxNTMtMzEgMTI1LTg0IDg0LTEyNiAzMS0xNTJxMC0xMjMtNjktMjIzbDE5MS0xOTFxMjEtMjEgMjEtNTF6IiBob3Jpei1hZHYteD0iOTI4LjYiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0ibW92ZSIgdW5pY29kZT0iJiN4ZjA0NzsiIGQ9Ik0xMDAwIDM1MHEwLTE0LTExLTI1bC0xNDItMTQzcS0xMS0xMS0yNi0xMXQtMjUgMTEtMTAgMjV2NzJoLTIxNXYtMjE1aDcycTE0IDAgMjUtMTB0MTEtMjUtMTEtMjVsLTE0My0xNDNxLTEwLTExLTI1LTExdC0yNSAxMWwtMTQzIDE0M3EtMTEgMTAtMTEgMjV0MTEgMjUgMjUgMTBoNzJ2MjE1aC0yMTV2LTcycTAtMTQtMTAtMjV0LTI1LTExLTI1IDExbC0xNDMgMTQzcS0xMSAxMS0xMSAyNXQxMSAyNWwxNDMgMTQzcTEwIDExIDI1IDExdDI1LTExIDEwLTI1di03MmgyMTV2MjE1aC03MnEtMTQgMC0yNSAxMHQtMTEgMjUgMTEgMjZsMTQzIDE0MnExMSAxMSAyNSAxMXQyNS0xMWwxNDMtMTQycTExLTExIDExLTI2dC0xMS0yNS0yNS0xMGgtNzJ2LTIxNWgyMTV2NzJxMCAxNCAxMCAyNXQyNSAxMSAyNi0xMWwxNDItMTQzcTExLTEwIDExLTI1eiIgaG9yaXotYWR2LXg9IjEwMDAiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0icmVzaXplLWZ1bGwtYWx0IiB1bmljb2RlPSImI3hmMGIyOyIgZD0iTTcxNiA1NDhsLTE5OC0xOTggMTk4LTE5OCA4MCA4MHExNyAxOCAzOSA4IDIyLTkgMjItMzN2LTI1MHEwLTE0LTEwLTI1dC0yNi0xMWgtMjUwcS0yMyAwLTMyIDIzLTEwIDIxIDcgMzhsODEgODEtMTk4IDE5OC0xOTgtMTk4IDgwLTgxcTE3LTE3IDgtMzgtMTAtMjMtMzMtMjNoLTI1MHEtMTUgMC0yNSAxMXQtMTEgMjV2MjUwcTAgMjQgMjIgMzMgMjIgMTAgMzktOGw4MC04MCAxOTggMTk4LTE5OCAxOTgtODAtODBxLTExLTExLTI1LTExLTcgMC0xNCAzLTIyIDktMjIgMzN2MjUwcTAgMTQgMTEgMjV0MjUgMTFoMjUwcTIzIDAgMzMtMjMgOS0yMS04LTM4bC04MC04MSAxOTgtMTk4IDE5OCAxOTgtODEgODFxLTE3IDE3LTcgMzggOSAyMyAzMiAyM2gyNTBxMTUgMCAyNi0xMXQxMC0yNXYtMjUwcTAtMjQtMjItMzMtNy0zLTE0LTMtMTQgMC0yNSAxMXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJibGFuayIgdW5pY29kZT0iJiN4ZjBjODsiIGQ9Ik04NTcgNjE4di01MzZxMC02Ni00Ny0xMTN0LTExNC00OGgtNTM1cS02NyAwLTExNCA0OHQtNDcgMTEzdjUzNnEwIDY2IDQ3IDExM3QxMTQgNDhoNTM1cTY3IDAgMTE0LTQ4dDQ3LTExM3oiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJzb3J0LWRvd24iIHVuaWNvZGU9IiYjeGYwZGQ7IiBkPSJNNTcxIDI0M3EwLTE1LTEwLTI1bC0yNTAtMjUwcS0xMS0xMS0yNS0xMXQtMjUgMTFsLTI1MCAyNTBxLTExIDEwLTExIDI1dDExIDI1IDI1IDExaDUwMHExNCAwIDI1LTExdDEwLTI1eiIgaG9yaXotYWR2LXg9IjU3MS40IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9Im1vdXNlLXBvaW50ZXIiIHVuaWNvZGU9IiYjeGYyNDU7IiBkPSJNNjMyIDI2OHExOC0xNyA4LTM4LTktMjMtMzMtMjNoLTIxM2wxMTItMjY2cTYtMTMgMC0yN3QtMTktMTlsLTk5LTQycS0xNC02LTI3IDB0LTE5IDE5bC0xMDcgMjUyLTE3NC0xNzRxLTExLTExLTI1LTExLTcgMC0xNCAzLTIyIDEwLTIyIDMzdjgzOXEwIDI0IDIyIDMzIDcgMyAxNCAzIDE1IDAgMjUtMTF6IiBob3Jpei1hZHYteD0iNzE0LjMiIC8+CjwvZm9udD4KPC9kZWZzPgo8L3N2Zz4="},359:(t,e,n)=>{t.exports=n.p+"a7bd2b418ecebc012361.ttf?9130959"},353:t=>{t.exports="data:font/woff2;base64,d09GMgABAAAAABKUAA8AAAAAJPQAABI7AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGVgCFOAggCZZwEQgKnxyaVAE2AiQDWAsuAAQgBYVNB4IDDIEGG3UhBdwYumHjAJ55bgvZ/4fjjpUVOJbYEKqpuEgYY4RGw1xkC9qrly7T8mghbhYrHvTL5IwNHzluZQ3s/HCVNusnK5jg8CFWfFBkvTioSxtKCf//2Urv+7+qurp7ehZQRDgCgBHBamXAIATMnJkjPDmm9skdQkgQJAqA+X83/ZvWE3QrSdsBnVBzmECdpkbPg5YESkVhVGbOdk7YHGaVFFLmZRK6vlPazZ+IIE/sz2VGAQQczmWuiClj+qMnysBNTbpZ81pOz0xVSbnUgoMG4ofZ7U+7e5KNchL4f7R9s6IEn+aGt2IZzAbLN/B1EjRZK2qKerrqZPAGQMZdus1WakWb8u1Mq3/vtWfZIHcsYUI4+1+bZSvpECqqEIr62m70x/L6f82ClrU8PvLYPpj10hwAB6G7LsT2oX1oBxCqvPTY5aWt0jR9IJ2tR5+ipFk7hvjQYGz2h6tg6aIQsUlh20e/FwRULLeV7d7bTID2w2vbNoCJAvSuguNAPbxn7QO530DgTBG5JjGu6Wf0FhHsZfsKeC0O6RdWNDwy0aFXPHYbN4Ptv/6P+4knw1yYJt4tzwfo9cGBxfI06VNm+ye+x8WxrljhwMtA7+IWHX6tv+v7rfPv8Fu/ffkH/iTyaxymfbUrVhS95loM+F95hhOIJAoyJRU1LRra9NCrT78Bg4agBM1pAWizFTCEX1kZFCsYDApuGykYQqRgiFAwJCgYCigYMhQMJRQMFRQMNRQMLXhtGBp4PSCuvV4Q8PqAoPHfeiBo/Hcehn54b8AwAO9LLMUg/sfvliHUG13I4CZr9BuVewDBK06S9OYf7eNvSI9PkdUL5v/kM/WnI6blf3YJDBzbUeMc/ABtPOBR5+ARmB7PPAadiO90hPTTMN8rnBxPdj9HZ67pz4lj29GxPTVi/T67/ieppvDLCfMv1ZkVyzv1LBdi36EaEHnlmqiuMV/RdDZVe7GWra3LSR9bgywlg2s8Tcnj0EQELScicjsSJZAkND2aUPQEmEy9dVLjJ4gZqxg2URQnx3hwrFaqr/CXsrq81KmUbyfm7abspmiJY7fvxQE1CqlaL+SJoODmQGIWTKfvRIIJJBTsc4Z+USQGTwE1cLOax/+C61fuJNtzSm7IY3K5jKFoOPUkbDhDn6aE4b2qhFIyAxI0a9LPyp3gWqmehSU3Mn3Bdtv0wdXKuPijqbMaZuc4iYVau4xY6xMECUNdL2TRNebShvM0qJZk3CxjTxsoSrT4OpK7tIREc8bvvMn19ED0miPQv+AG6vzMaDOr74q2BPP04s1+rOFvnJZo/u2Hpw9vduKbvRumccNhAwv3o9LZdZDomdIoD/RYAmIaamvNm0JobMJ1O1bDBQQNvWuhShucZYkfvYYH6RtMJ5i0wJnsOGPsxk1747wrVNw5GyPCYZDcdvoFDGDOn+zZj/RI0IRaApWgGJRR/ru3O4941IS+W/vLhKc3m2vJM4jKYNMzhKqYDQtjI8LZqAhsgohsokhskijYZJHZFFG2TsUcx9sawafxNZ8OBGcAgDMBwFkA4GwAcA4AOBcAnAcAzgdg1QKoCyW2sFemN2pUvR7ZO6nIAo9KLQILzS9M8CyGNJOpk1Ye2OvU3nNlqHR7lth/S41ZHNDohmKHLLXIbm6vWgbdlbF1OeY4QlbwPSOrEFhJxr+gecdP7UFd5r0Nzwqdz0YzGVPA8oAXaSXaS51nVTof8ThtidWo5tBltZqB+GzqVf9Kx8oWxdfrMhOSMKzyMDq/4VkDGBN06SbnpeTmab9UpK4v56C1SQ1q+2kRJAi0ie6dPHT7Tvxp28Wymauki3EKwUSm+lmCj9GmmcBHJJuF7FU8jzGfGM5ykuQbS3Ok/HTZrXi0mERIbdpuaKX7U0y3bg1nzOp49hyzgTn2iVpWu00hSwNttDZAbrzt59dO9SSTZ53+CamTmCLHugee9bd8sgR2YgpUBC2lN5gLGq+sGeUZW3Xmmqv4UBa0k7lN0rNDXr2txpy0x6BVrSLl6/RsrL2GbqH8vrtb9eJuTG+CqbXYzaa7UV1q6yKPNz2bb620fZgtgnvmn3srWGMFhraBtdZXCp4iJd0DuQyBLYvMsz244pYFz+pv6tTag6Ke2ju2ai5q8MP/xCzwoOnwmmI6e27s3NZNLslHOw0R113sanLWVTpUqct3e6M7s37gEXxBzrWsCJ49rOjerYofPMfKo9/ZYvWW7YsynphaTXsJVK9+/5YvGvZNQge2BtyLHT8oPDukdYWH4YKO8HkQR4HQMQDoOAB0Avyp8Cd6ABEAEAkAGcCpMAKoDQAyAUDt4J+iA0CdAFAXANQNfhc9AOoFgPoAWNefN7fKxDRwYuZU+2FmXqYtoSQJL2dra1cLkhUu9OAeoIcAMzY8ag2NzF3odRFArweAbRilpI1zF3pTBNCbARiwJW8hMSbqU1GBmty5BMtctEy3672kdz6AgCKRz/aSan/DlwvUgD0BEOcAwK8jP3J4WLQ7sO+58G3wIGddEU2XpUnT0kSiRE5qSnKxQEM5CbKERlliisAV4nUCvsRGJZknHOjaSTtmdDlFpHUd0BupJIKhDYDbNQaeS5AeOSxiA9S1DHgRGezwLYEWSYXsM5nIIgjiZFPA27BRWeZrjpy1Pntu5Ywzm4y2P5+JOJ8FjPHMlLPZt3kG5pAslVUmoK2sHiqL4KIy8oqFjBzHcxDUmc41FEOWciGHb4iinql9zXNQNJFSW5NW7zRbaBVAsZhOndRWszY1Vm1ligJGu897zc1enhmoireWtvqDA5Q4EDA4Qvaw0RlMJ1sC0qUy3nfSVs0tdS0JHPWuWsS20FY7eF6DjWg1M9gEjLQpDDuezjSGJhHQaCoYIM6w2pVrCE0nBQKEIwQP50OcwRbjzF1rFDWROpiEou0uM94Wmjyv0BTLiaEYGuE6XZ5hxDCJwhNJfYC/eQwVgDmOkDRWUEDW6LlvfXs3hczTM0KQr+63kxkyp7luX706g3V0ICLTbLCYCUoYER0UMfmvIHKE5I4AbF9ixFxYpp0pD7WHSkoM7oCIYi6L0i9jNPhNcmjle9EbW1M3oPB6umMSgzRaoYvpTloEfNIeCqkfhMMW6pmWaw7AimPYJBmSIki2hGpOvmPmCmubk5M+CII9TnkuTYYgQd6pPDhwOVmArpocPk8muk0IeCuc2J0EaXcPOCpInco1GkrtSHbDLrb3s8mLPhOwA70CBbefwmQRc+tb4jlJs0mAknHQZu7RBM9AsUHzIL4zuFGSDMZ1sltLsybazWi+go6mxdszXeWL5IKyFUUjX3/9ZHkiEv2a96tGE9mKTHvXb9hGNJonko83or92e/KeTHtLkhhPUhe7HKf+UvBLkV+kxctuj6AR3Xffo491uyEx3/+KfRk3gl2p775Dv8YY/XWs06+Uvbp4v1Q9PEIoa8NXq/Cj+Aamp49JmA/qJR7xMe+0XEUcxZcqRrvrpWskx6an1WXqKbVKPTIiVypGhmuVhBtX4sJlrpKVtiilpcMjeqWaIcqIS5eOSdZIc0ReOHbJqy/TM2JFhodLZauL5WL8GKGSe0ehrd/US2lxkUPlZXKmVlU7PHzk+pbwpSfYrMysLEbKdHayYvbsOVYaPWenpFPfgJHmDw3268TsE/aJfZlZmZlbB5kguWWJ84NinuLD4rTN47stf+/dq1bqr6v0VdpsBr3e/QX6SmqTvespMDg6+sHoKSu0FF986tCiw5e69o2ohO6mvGg+Y/LGxON37mh1jLT0mwemgrveot4/o9XevYPzyCf4wmcPzNLfnVrtnTskj4yMefhvtU7sLZDFirGXHxgKwQMsj9/c3NK8STmUr9HkD22zs53341fWbF9zUAEITbNaQqoaZ7XdwHhevXFr/dno2cqzO7e61B2trvI36uuh+XLJreoE5mntLBWf7mT8hTgxKv6dxDP1HuFfQs7W3VEf2O6tO8wPUqvkVX6d/IdW/sVXCgtK1ekfpJdWcxcrCnmF6xmdB+/r5rGzB86vcTaBMU+kdD/QgNNpSFXh8bf+V19ec/OuseeA0TPe0LEZyWl5U7+/cPdv7PZrGv5+BRydAq04kViU44kXJS9q4PfqlsYVC/EVixOXmSw7H4CvjwyX8/v/F/+qEcCiWHiZHVkaqxC8vqAcl8V7evfti7+vizF346X8DiwuNnavvsv6ZOvo6PvQKP3WqOv92FGnxCJhyuTPPTdQa9ONlluHKk9BF1UnRtafWDMdfaJ6xKKiQbOtduC552q7yq6uKfGE1ZRTpqrC3s3znTjpkyp4DeFwA08vZU+e9DGnO1ip/pIUZ9L3gFUl4CSduHR6p0gWEbC6t1e8SrNaLTSfHCCZwxNAp7vO6MDBSSzQssnzkFYrEvh48f1tw9Ekb+bkQaBlujEThzn5j7T1x/N8JYqx4eSarq4agLGrp/oQFir/4DP//98Mp2Vj38EHfxkkthMRTBxODm5M7Lz/Sn920NM5/HB2to42E1ZfVA5/atn6b+IQzesfmxue/GoBOxzPet8PODLrqJvsr1l+P2DfznnB3F47bFs5O/w9R7ZPNIXUwWTjDN/pOHB7MMBsHCF0Uh1ZYsDUcRk2LiWcP8WYi6OEzkXBQ4bI4ygHP7V9ReecCefQrHXnyzRCnEjolNC0Cppd3Y6hbVDI3BnI3DQdokN01swN/IY/2c1l12GaSTbZTH1lOjTc9WVEplii4eoMrubjJsQ40u0Rb8treEhNOvjjWGMVUswOUkv7J9FS7d/5+RsBxsRh8ihTjk0XFae9PQSfPzisBSQ8D68KpiIPPk6wMI7tqmkONUUczWhC8dvnb6crVqHDxwmELh2LqMBt+jV3ZB1B7ndyubMyG3EQ7+fpjStQlFumLIpc+BhucntA7OdGdbEQTMeCLCr30LzBHdq1kwpfM+JRKS+oIltWyo4x20eZSGIsmFEkige0KXO77PY0lluVJeV0haKui1MUu/UcdVdy6Ja5r7vDpG/VNjfWV1fiFve0RGPxUwgtt+4qOUS3K1e8HAVkLUM82hgW3IkHyAb+ux+BOycAP4PjByZ9f6kKp4IseZ7jQaGUsN+KTp03VS2WlDhWhQ5pmhpVp7lJfnLL/jQvpIWMhwEHHG+SiV0qtBLKInYIyVPwMUSBijEqUqhSN8pNyOlSUOai7JJzk/dvuWzX2PVw07u+UW0RWS9nOVq2vsWpo3uHhClZF4GLbhQhBo9dQmjC/pEm6y32jRgnEXoYUVkVVVmMNSpylVs8SEImLIKOT/BBSzlKZF2hqlr7cG98/46q8sv5uFk/LW7g2p1XudhoRsXLbtt1zZmvrsrEsS1GJWadoIfuoHj358w97ZPT0Vtq28HXsGZ9FzQOomdJ/Na4udhONdR1qAiToTGkR5i1bP/8pHmVUf8HvjF+/kpiuMrf/Jdr/xXgxyPBi6/5/yRi9V+9FcgYCLv/9Vn8Vw6LVE3jFIevZbQGvG/F3xtxXh4b7QfsxGp58kQE3ysPooN+FR9vm9xa5gy7S7qGMd1yzwDP1Y+h3f1+kqV6jXAAIp/FevOMgi3znMxuHkYcmhepOTUvkbk6r2KRO9evGfCOo1AC9/n4ZZ7o3TPPaGsaOmvEEgwYsWVeZPhhTBhxY17FGT3ztmrm/v6FpLRlb53A3ds99Lu9CVRboMsP4qMKoIo44gzPYCgKhkBtTQ0Z+I22BMXDeHypf+TsKUKv3Y02/8KIrATrkq+TV7YvYsAwNfDJ/VuQmBaope1E0rzTqavMvTck2WKe5Qi4YxS7h363N4GKdAIJhL1ICchVCuGYmIHPEZp+EAkk4YC0de/wDQu/ibVK/+4V5uz2vP0flq8967FDr90V4F86CmnFqK3lttmqh33SLoyEmiW6O/jst0Nib7mANNG2SFgkZGy0bLFXusXutUcBFfSXNNzkCopKKpRVqlKtlhq11aNe6IN+GIBBGIJhGEFGHi1PtIoaw1EKJZ/VtI6tytuzgEZ2+jysYN9+UtKFy8xSwnjRhcMncbJmjNpdMma/w5YpIRzo9aWwyq6FTZLtkS9sebojalo+nsXPTEWOGlrhbY6SLRXkuAoqLs8zsbRkeY/XDZWMrUQ+CvLenr3dmdv8EHTSNAf96pvc5Af87371YOEuuwBHQQndcTwQFWruRb0QlH0mjgc0Eg12+2XQ0ZafKlNH2/zR5ltk5LmXQAGIqTo6QNywYLeJll7gREGcnDtQ5BAxJ/xRYDcAAA=="},759:t=>{t.exports="data:font/woff;base64,d09GRgABAAAAABXUAA8AAAAAJPQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+I1MqY21hcAAAAdgAAADTAAACuIda97BjdnQgAAACrAAAABMAAAAgBtX+/mZwZ20AAALAAAAFkAAAC3CKkZBZZ2FzcAAACFAAAAAIAAAACAAAABBnbHlmAAAIWAAACf0AAA+aE9DL/mhlYWQAABJYAAAAMgAAADYPoZfIaGhlYQAAEowAAAAfAAAAJAc7A2hobXR4AAASrAAAAC0AAABYSVz//GxvY2EAABLcAAAALgAAAC4p+yYIbWF4cAAAEwwAAAAgAAAAIAElDApuYW1lAAATLAAAAXcAAALNzJ0dH3Bvc3QAABSkAAAAswAAAQOd6TSHcHJlcAAAFVgAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZA5jnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGD65Mgf9z2KIYg5imAkUZgTJAQDhCgvVAHic7ZLBccIwEEWfwCEBjMFJ3AIn2mDoiYI4caIKmvB9jxoaIH+9mwM9sJrnGf2RZM0+AR/AXBxEA+VKweuitEz5nNWUN5w132lova2tr6d6q/c6Po7PpxKse01eqmjfXqf9D09mOqnRDRZ88sVS/1nTsqFjq9U93/zwy6ClC97V+qe0ORu844F7skQ9xZLJU+JuLXHnlqj3WCILWCIfWCIzWOJvwRLZ0jsI/HbWBTKIbQM82wV41gfySz0FMk29BXJOvQeyTx0DvQMex4DhD8NHSkgAeJxjYEADEhDIHPQ/HYQBEloD1wB4nK1WaXfTRhQdeUmchCwlCy1qYcTEabBGJmzBgAlBsmMgXZytlaCLFDvpvvGJ3+Bf82Tac+g3flrvGy8kkLTncJqTo3fnzdXM22USWpLYC+uRlJsvxdTWJo3sPAnphk3LUXwoO3shZYrJ3wVREK2W2rcdh0REIlC1rrBEEPseWZpkfOhRRsu2pFdNyi096S5b40G9Vd9+GjrKsTuhpGYzdGg9siVVGFWiSKY9UtKmZaj6K0krvL/CzFfNUMKITiJpvBnG0EjeG2e0ymg1tuMoimyy3ChSJJrhQRR5lNUS5+SKCQzKB82Q8sqnEeXD/Iis2KOcVrBLttP8vi95p3c5P7Ffb1G25EAfyI7s4Ox0JV+EW1th3LST7ShUEXbXd0Js2exU/2aP8ppGA7crMr3QjGCpfIUQKz+hzP4hWS2cT/mSR6NaspETQetlTuxLPoHW44gpcc0YWdDd0QkR1P2SMwz2mD4e/PHeKZYLEwJ4HMt6RyWcCBMpYXM0SdowcmAlZYsqqfWumDjldVrEW8J+7drRl85o41B3YjxbDx1bOVHJ8WhSp5lMndpJzaMpDaKUdCZ4zK8DKD+iSV5tYzWJlUfTOGbGhEQiAi3cS1NBLDuxpCkEzaMZvbkbprl2LVqkyQP13KP39OZWuLnTU9oO9LNGf1anYjrYC9PpaeQv8Wna5SJF6frpGX5M4kHWAjKRLTbDlIMHb/0O0svXlhyF1wbY7u3zK6h91kTwpAH7G9AeT9UpCUyFmFWIVkBirWtZlsnVrBapyNR3Q5pWvqzTBIpyHBfHvoxx/V8zM5aYEr7fidOzIy49c+1LCNMcfJt1PZrXqcVyAXFmeU6nWZbv6zTH8gOd5lme1+kIS1unoyw/1GmB5Uc6HWN5QQuadN/BkIsw5AIOkDCEpQNDWF6CISwVDGG5CENYFmEIyyUYwvJjGMJyGYawvKxl1dRTSePamVgGbEJgYo4eucxF5WoquVRCu2hUakOeEm6VVBTPqn9loF488oY5sBZIl8iaXzHOlY9G5fjWFS1vGjtXwLHqbx+O9jnxUtaLhT8F/9XWVCW9Ys3Dk6vwG4aebCeqNql4dE2Xz1U9uv5fVFRYC/QbSIVYKMqybHBnIoSPOp2GaqCVQ8xszDy063XLmp/D/TcxQhZQ/fg3FBoL3INOWUlZ7eCs1dfbstw7g3I4EyxJMTfz+lb4IiOz0n6RWcqej3wecAWMSmXYagOtFbzZJzEPmd4kzwRxW1E2SNrYzgSJDRzzgHnznQQmYeqqDeRO4YYN+AVhbsF5J1yieqMsh+5F7PMopPxbp+JE9qhojMCz2Rthr+9Cym9xDCQ0+aV+DFQVoakYNRXQNFJuqAZfxtm6bULGDvQjKnbDsqziw8cW95WSbRmEfKSI1aOjn9Zeok6q3H5mFJfvnb4FwSA1MX9733RxkMq7WskyR20DU7calVPXmkPjVYfq5lH1vePsEzlrmm66Jx56X9Oq28HFXCyw9m0O0lImF9T1YYUNosvFpVDqZTRJ77gHGBYY0O9Qio3/q/rYfJ4rVYXRcSTfTtS30edgDPwP2H9H9QPQ92Pocg0uz/eaE59u9OFsma6iF+un6Dcwa625WboG3NB0A+IhR62OuMoNfKcGcXqkuRzpIeBj3RXiAcAmgMXgE921jOZTAKP5jDk+wOfMYdBkDoMt5jDYZs4awA5zGOwyh8Eecxh8wZx1gC+ZwyBkDoOIOQyeMCcAeMocBl8xh8HXzGHwDXPuA3zLHAYxcxgkzGGwr+nWMMwtXtBdoLZBVaADU09Y3MPiUFNlyP6OF4b9vUHM/sEgpv6o6faQ+hMvDPVng5j6i0FM/VXTnSH1N14Y6u8GMfUPg5j6TL8Yy2UGv4x8lwoHlF1sPufvifcP28VAuQABAAH//wAPeJyVV1tsXMUZnn/m3M96r3POWdu7x3vzrr12nODd9cLacTa32iYb4YSoxCAb04ZA7VysKgJUmhdSVU3VGmQFlCKU0sZ+qdoIWioEDw1SJR5QpfIADVLV54ZWFQ9FSDXNSf+ZXSdpIwRdrebMnPln/vv3/4cAwR/boBeJQ9LNnggQgClCgZ4mOD2Nm8e5x5nqDQHXQcuVoFjdBWOjfSAHl21Eg0x0OBr8LRJp4XMdTuHYilLXxY1IBFy5jG7A6Wi0FcFLyc1P6Af0+6RA/GZvrjuqK8huigEl9DSA4JfiXFGTQ/08ggy3gy4GwbW0xbouWeO259IP2mzX22zwGb29jkTW1yMrrphsbETuJoyMCAIp079YnNkkTwabRaIwRWq/ogJD4xzBByNHKRBGWvlKf76S19SeIXC4VsrjoOdzxXoNh1KtOlav4DAOo67nVEZdFs+41zPuspuB654PuPC9ZZyIxZvi7ccuvnU+7rx1M4JcyvNHdg7l8UmmmU5G6C2nMNjyilPzpJX+1y0xIcOo68TaRmLnnOBFt4GD4wzic73sT6XLG3zcHXTgOZ8HFxwHTsilsw7n02UYTgVPrwtiKccP2Bz9B0mTQjNLKGtHxQqRZiHCKkQYpei5eSkLWiOf9VzpOCFSHbY8lUVjzBXS8uqyM+4EFziHE07DLbf5FmBhyi+v8wk+1NmAZSmxuz4gQrQtSw1l8aUsjLLT4u0KmgXoEUIpHCVAoeX2F++wSztwsrniTqiOedlOBHlolxqXdim77uXg6XShkIbzl12URjDm0BCW4bzsTDiX0WJ+GTZQNJQ1eJFLWV5n5+hf2/6J6pQw9A8j7DQGCRA0Ehz3nFpHjnYUx9qBUot1wrnekeMcKjnONwb6OuojDxRgAgcHqilpHiEfFFNwvmM7YRkUXsrxDr3I9hFOtv0WZOoeeK0we7Rpt00DEIKZ3qZ5K5Xn3vA8qrpDJr3bR3Q1uAaDljVvp+zgG7YNlyzfmrfoL4KPgmtyasFP8QmXbHve8js+eYee6fA3vxL/VFzy77imbsItj3C6hGxT9jyyHgg+kkyQmQXfCh5rSwWDMNAmEIQi8sjNp9irmCcGSjBC5prRIihsoBRnVEHmhKE4WRSnhzAFw0WhmNcCZkjHSV1CuuQXbB6fezOV35aMq2r3UL1aDFMfxvq35AYf+rkehlKuiPmG2S7s6XhjQhf3T9znNNmThOPBOYyncfTod90j8JOu3uceeHJt7cnM17pN8/IJWj6QjVjpsEvjmbjS81lwjvOdmInw3fqRv7j9BxZg7f0XKI9qcX3h7ATt3sYtghKK2HsYdU6SHeSe5shAXzdqGw9hMgKd6qghEpUBu43hDe711IUmIFGzHYuIV5OwhaaYu2H4b7CVQAIb6luzFo9sRji4KXv2bTWsNVV4g2fM2bc0MVffPiT3XVB17a1Dlo+EYSSnISTQdmnw51uLJh7uUIj4uRmgLnOoyw6ys9nYBqCKIEItCDD03knMcmB0maiohwqLhCqKTHXlqNCzVSolSoXKFhYPQa64C4r5XJhyn1ZGx+pCOR/QS3puhE4yVMarjyEM8eiml4gdPLzSWGqNjLSWGnueGlRiWkul2sSVRx96dWVaaT5z8ZHDF3dOx4bp7zfD7rbowYNIeAbpGzUN1INKWLt/FvaduXTl0pl9k/dNxxOojyZ9I+pIhPSR7WSc7CVPkGPNxx7aTzVjMNsdw7gX+qmol0Y0ICcVSomuEX2ZhIlphM3FSBc1QhbVwNAWiG7b+hGi6/ZRYut26/Fjjy08Mvfg4QdaM1O7d/ECL4pfPqqmhwS8CAPUYp3q8yXrRCwb4z5UsqOTAJVSsZTXdFUaMSYgHGMjlm+D5jigHUUg9IGIBt8yCoYlh+dvT1ctvT3VrekgZBgU3qeGEZzf7FXU1zUF/m4ZY9X+YEd/FWqC7pclc9j9tVc2S78yLHgzuCpewm4xfsE8OEZjNz4Jccvi9PHdKobKg8jxxicj+/aM0IQUYt5Jgc/nrU6O/Az9oJNZ8pumOTmWNRWVCXSyEA7K7bRALzCVnsSowgRa1jWMrlNEFLXDoiX6usDz+3sPvGbfdUIBqjGqLWOB0e4+8f9cPzfXTBiGMWvMtg7cPzPeKOd7DxmIj6B7bmW0XkTbK/VeqHgJH7BB8Fw5oJ+8XFHPafnqLiogB/+lanE7DYOHTsVkriONnsNc0EoavPhoq9FnOzuCGnQVUilX+94r09q3E4ddc0fUNuyWqVDIrxbKrzh0RtdYTKEoes5Lfh5uQDRjZxyssNnnMiqn22jP5wDw40AbVjTNSkbhKFwIBZ8OvVdNfCfbo5lR5lrMohYYyUQUKXVKNUUxHx67FzIvh0NxC68G21HtEAY4YTdv3lxCP3Vh3zVM9pP55sN9ScqURBz7LtalYTHdCzqMgqmriGwa0xTEBECvgn6SWERTLG0RmzNRdBlZxPemoZuLxDC6jJmdE7UKTzg8X+T5vC1SZKtfK93Zr43Dnf2aVx0BjbuYE1zgoJYXwKH41OPoEDpu6WdDWkEPwVndgpB2Vga8WEyvvb+Gf/DLE/zqsWdn155s0okTq+urJyZg/1UHLrQPhcAy2ofOisA+a3U/sUZfeu+i9qPg5XTZubp/cumFn6+eaih7jr908NljVx1yh40iiPj3kPHmvaaB2iJUM+KDytgU4g7CCV0U9RhhcxEjS1WYukgUpUuZ8fJohWJeV3vbFsi29cbM/3Jtg99JPWHPV9RQqvblSom+YYldZ4fJPjLbPGiDaemWqZ/sAt2wdGNZE0UAiEw0/C5gyyEwMOOJAQvEskLTmERdbGZ3c+fE+H3VyshwAtG838kmeFi4WTY2CF154dBO81WUjhbO71Q3rNJpqIgg6LTNrsA+RzTvsmu+bq/aPr82HXbt57ENed52w9PXuJiIdWcDe5GtDSSHhbD9VejuvJl0eklRz/eT0eb2yVolp1BWzWZ647EoBROr3ZQCottVb38hFRv13sZ9svDpoqSlQaJ7CetfCV2nS6gXXsbiXtLRr6UOlI96Lpb/eqlYlzGvI0qIXfqHd9+djQ2LumhasUNiYVqeqPjDsVlc2WFdd7Gme5Yp1odilumJeu/qetimBaSIJ5JYJj1HHD4UczwkTibi8iwz794yUd8t3edkvYw1w7ealVpF9IiyY862S1Zdfj4s7L3x8d6Fhb3U27tAl25c37MAi7tpUjzkXR/SCfCwkHpN0aOLT6atG4tc3Nh/OxrEhRjhm+iaTXQNfBp2/xnBpb3ZaU7EfU/QH2KMpki26YdFd419CX6DEUAMglPomBCdGejNy29jafOEqyGDomiihMlR8PpYZdSjz8QtM/nhihbq+ma4R1u+0janrkcwudAgwWddKbWMu/++YjPLY1PSPP8B8cyO5QAAAHicY2BkYGAA4vf7ZCPi+W2+MnAzvwCKMFzz0xKF0f///U9nfsEcBORyMDCBRAFSLwwtAAB4nGNgZGBgDvqfBSRf/P/3/z/zCwagCAoQAwC2mQeoAHicY37BwMAMwoJQvACII6EYyGY6BcEI8f//4OoW/P8Pxi8QepisIeoBt34RkgAAAAAAAAAAOACCAMoBDgFUAZoB3gIeAl4C2AM+A6YEagU+BdAGOgbABz4HZAeMB80AAAABAAAAFgBoAAYAAAAAAAIAIAAwAHMAAAB1C3AAAAAAeJx1kN1qwjAYht/Mn20K29hgp8vRUMbqDwxBEASHnmwnMjwdtda2UhtJo+Bt7B52MbuJXcte2ziGspY0z/fky5evAXCNbwjkzxNHzgJnjHI+wSl6lgv0z5aL5BfLJVTxZrlM/265ggcElqu4wQcriOI5owU+LQtciUvLJ7gQd5YL9I+Wi+Se5RJuxavlMr1nuYKJSC1XcS++Bmq11VEQGlkb1GW72erI6VYqqihxY+muTah0KvtyrhLjx7FyPLXc89gP1rGr9+F+nvg6jVQiW05zr0Z+4mvX+LNd9XQTtI2Zy7lWSzm0GXKl1cL3jBMas+o2Gn/PwwAKK2yhEfGqQhhI1GjrnNtoooUOacoMycw8K0ICFzGNizV3hNlKyrjPMWeU0PrMiMkOPH6XR35MCrg/ZhV9tHoYT0i7M6LMS/blsLvDrBEpyTLdzM5+e0+x4WltWsNduy511pXE8KCG5H3s1hY0Hr2T3Yqh7aLB95//+wHmboRRAHicbY5JDsIwFEPjUkoH5vEUOVQpvzQizY8yUMHpUcuGBd74yZYli0R8VYr/OiPBDCnmyLBAjgIlKiyxwhobbLHDHgccccIZF5HwI2tq05BOrY4+v/Fg5FXdc01tGKFw6t5NlEU7BVPDlkz5rUbMBkem6SpHXr1JtlHrpBmq4GrfSepteKUtm7B4M/dSmXxyjiHt+Umbn5WsdZhfdW0ehWcX5Phn1XP0JC0rE8gJ8QFXpkEUAHicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA="},51:t=>{var e;if(void 0===n)throw(e=new Error("Cannot find module '@jupyter-widgets/base'")).code="MODULE_NOT_FOUND",e;t.exports=n}},i={};function Le(t){var e=i[t];return void 0!==e||(e=i[t]={id:t,exports:{}},r[t].call(e.exports,e,e.exports,Le)),e.exports}Le.m=r,Le.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return Le.d(e,{a:e}),e},Le.d=(t,e)=>{for(var n in e)Le.o(e,n)&&!Le.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},Le.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),Le.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Le.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},Le.g.importScripts&&(t=Le.g.location+"");var t,vn=Le.g.document;if(!t&&vn&&!(t=vn.currentScript&&"SCRIPT"===vn.currentScript.tagName.toUpperCase()?vn.currentScript.src:t)){var e=vn.getElementsByTagName("script");if(e.length)for(var o=e.length-1;-1<o&&(!t||!/^http(s?):/.test(t));)t=e[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),Le.p=t,Le.b=document.baseURI||self.location.href,Le.nc=void 0,vn={};{Le.r(vn),Le.d(vn,{Behavior:()=>p_,Builder:()=>je,CobraModel:()=>Jt,DataMenu:()=>function(t){var i=V.set_options(t,{selection:null,getdatafiles:null,datafiles:null,update_callback:null,target:null});if(null===i.selection)throw new Error("No selection provided for DataMenu");t=i.selection.select(".data-menu");t.empty()&&(t=i.selection.append("div").attr("class","data-menu"));var n=t.append("form").append("select").attr("class","dropdown-menu");i.getdatafiles?(i.datafiles&&console.warn("DataMenu: getdatafiles option overrides datafiles"),nv(i.getdatafiles,function(t,e){return t?console.warn(t):(r(i.target,e.data,n,i.update_callback,i.selection),null)})):i.datafiles?r(i.target,i.datafiles,n,i.update_callback,i.selection):console.warn("DataMenu: No datafiles given");return{update:a};function r(t,e,n,r){n.node().addEventListener("change",function(){o(t,this.value,0,r)},!1);var i=e[0];a(e,n),o(t,i,0,r)}function o(t,e,n,r){V.load_the_file(t,e,function(t,e){if(t)return console.warn(t);i.data=e,r&&r(e)})}function a(t,e){e.selectAll(".menu-option").data(t).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),e.node().focus()}},EscherMapModel:()=>_v,EscherMapView:()=>mv,KeyManager:()=>C_,Map:()=>R_,SearchIndex:()=>z_,Settings:()=>_b,UndoStack:()=>A_,ZoomContainer:()=>Xm,dataStyles:()=>xn,default:()=>je,libs:()=>yv,utils:()=>V,version:()=>bv});var Pe={},An=(Le.r(Pe),Le.d(Pe,{VERSION:()=>En,after:()=>function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},all:()=>Qr,allKeys:()=>ir,any:()=>qr,assign:()=>K,before:()=>jr,bind:()=>it,bindAll:()=>ot,chain:()=>function(t){t=Ve(t);return t._chain=!0,t},chunk:()=>function(t,e){if(null==e||e<1)return[];var n=[],r=0,i=t.length;for(;r<i;)n.push(Tn.call(t,r,r+=e));return n},clone:()=>function(t){return Un(t)?u(t)?t.slice():J({},t):t},collect:()=>Yr,compact:()=>function(t){return Vr(t,Boolean)},compose:()=>function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},constant:()=>Zn,contains:()=>Hr,countBy:()=>bt,create:()=>function(t,e){t=dr(t);e&&K(t,e);return t},debounce:()=>function(e,n,r){function i(){var t=p()-a;t<n?o=setTimeout(i,n-t):(o=null,r||(l=e.apply(c,s)),o||(s=c=null))}var o,a,s,l,c,t=We(function(t){return c=this,s=t,a=p(),o||(o=setTimeout(i,n),r&&(l=e.apply(c,s))),l});return t.cancel=function(){clearTimeout(o),o=s=c=null},t},default:()=>kt,defaults:()=>$,defer:()=>st,delay:()=>at,detect:()=>Wr,difference:()=>wt,drop:()=>ii,each:()=>Ur,escape:()=>tt,every:()=>Qr,extend:()=>J,extendOwn:()=>K,filter:()=>Vr,find:()=>Wr,findIndex:()=>ct,findKey:()=>Lr,findLastIndex:()=>ut,findWhere:()=>function(t,e){return Wr(t,br(e))},first:()=>ri,flatten:()=>function(t,e){return Ir(t,e,!1)},foldl:()=>ft,foldr:()=>pt,forEach:()=>Ur,functions:()=>ur,get:()=>mr,groupBy:()=>mt,has:()=>function(t,e){for(var n=(e=pr(e)).length,r=0;r<n;r++){var i=e[r];if(!Qn(t,i))return!1;t=t[i]}return!!n},head:()=>ri,identity:()=>_r,include:()=>Hr,includes:()=>Hr,indexBy:()=>_t,indexOf:()=>ht,initial:()=>ni,inject:()=>ft,intersection:()=>function(t){for(var e,n=[],r=arguments.length,i=0,o=f(t);i<o;i++){var a=t[i];if(!Hr(n,a)){for(e=1;e<r&&Hr(arguments[e],a);e++);e===r&&n.push(a)}}return n},invert:()=>cr,invoke:()=>gt,isArguments:()=>R,isArray:()=>u,isArrayBuffer:()=>F,isBoolean:()=>Gn,isDataView:()=>d,isDate:()=>D,isElement:()=>function(t){return!(!t||1!==t.nodeType)},isEmpty:()=>function(t){var e;return null==t||("number"==typeof(e=f(t))&&(u(t)||O(t)||R(t))?0===e:0===f(Ge(t)))},isEqual:()=>function(t,e){return rr(t,e)},isError:()=>L,isFinite:()=>function(t){return!P(t)&&Pn(t)&&!isNaN(parseFloat(t))},isFunction:()=>h,isMap:()=>q,isMatch:()=>tr,isNaN:()=>Hn,isNull:()=>function(t){return null===t},isNumber:()=>I,isObject:()=>Un,isRegExp:()=>j,isSet:()=>Z,isString:()=>O,isSymbol:()=>P,isTypedArray:()=>Q,isUndefined:()=>Yn,isWeakMap:()=>H,isWeakSet:()=>X,iteratee:()=>wr,keys:()=>Ge,last:()=>function(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:ii(t,Math.max(0,t.length-e))},lastIndexOf:()=>dt,map:()=>Yr,mapObject:()=>function(t,e,n){e=Qe(e,n);for(var r=Ge(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o},matcher:()=>br,matches:()=>br,max:()=>Xr,memoize:()=>function(n,r){function i(t){var e=i.cache,t=""+(r?r.apply(this,arguments):t);return Qn(e,t)||(e[t]=n.apply(this,arguments)),e[t]}return i.cache={},i},methods:()=>ur,min:()=>function(t,r,e){var n,i,o=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t){t=g(t)?t:lr(t);for(var s=0,l=t.length;s<l;s++)null!=(n=t[s])&&n<o&&(o=n)}else r=Qe(r,e),Ur(t,function(t,e,n){((i=r(t,e,n))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},mixin:()=>li,negate:()=>Dr,noop:()=>xr,now:()=>p,object:()=>function(t,e){for(var n={},r=0,i=f(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},omit:()=>At,once:()=>lt,pairs:()=>function(t){for(var e=Ge(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},partial:()=>rt,partition:()=>yt,pick:()=>vt,pluck:()=>Zr,property:()=>yr,propertyOf:()=>function(e){return null==e?xr:function(t){return mr(e,t)}},random:()=>Er,range:()=>function(t,e,n){null==e&&(e=t||0,t=0);n=n||(e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},reduce:()=>ft,reduceRight:()=>pt,reject:()=>function(t,e,n){return Vr(t,Dr(Qe(e)),n)},rest:()=>ii,restArguments:()=>We,result:()=>function(t,e,n){var r=(e=pr(e)).length;if(!r)return h(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=h(o)?o.call(t):o}return t},sample:()=>$r,select:()=>Vr,shuffle:()=>function(t){return $r(t,1/0)},size:()=>function(t){return null==t?0:(g(t)?t:Ge(t)).length},some:()=>qr,sortBy:()=>function(t,r,e){var i=0;return r=Qe(r,e),Zr(Yr(t,function(t,e,n){return{value:t,index:i++,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")},sortedIndex:()=>Fr,tail:()=>ii,take:()=>ri,tap:()=>function(t,e){return e(t),t},template:()=>function(o,t,e){!t&&e&&(t=e);t=$({},t,Ve.templateSettings);var n,e=RegExp([(t.escape||kr).source,(t.interpolate||kr).source,(t.evaluate||kr).source].join("|")+"|$","g"),a=0,s="__p+='",e=(o.replace(e,function(t,e,n,r,i){return s+=o.slice(a,i).replace(Br,Tr),a=i+t.length,e?s+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t}),s+="';\n",t.variable);if(e){if(!Sr.test(e))throw new Error("variable is not a bare identifier: "+e)}else s="with(obj||{}){\n"+s+"}\n",e="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(e,"_",s)}catch(t){throw t.source=s,t}function r(t){return n.call(this,t,Ve)}return r.source="function("+e+"){\n"+s+"}",r},templateSettings:()=>nt,throttle:()=>function(n,r,i){var o,a,s,l,c=0;i=i||{};function u(){c=!1===i.leading?0:p(),o=null,l=n.apply(a,s),o||(a=s=null)}function t(){var t=p(),e=(c||!1!==i.leading||(c=t),r-(t-c));return a=this,s=arguments,e<=0||r<e?(o&&(clearTimeout(o),o=null),c=t,l=n.apply(a,s),o||(a=s=null)):o||!1===i.trailing||(o=setTimeout(u,e)),l}return t.cancel=function(){clearTimeout(o),c=0,o=a=s=null},t},times:()=>function(t,e,n){var r=Array(Math.max(0,t));e=vr(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},toArray:()=>Kr,toPath:()=>fr,transpose:()=>ai,unescape:()=>et,union:()=>Et,uniq:()=>oi,unique:()=>oi,uniqueId:()=>function(t){var e=++zr+"";return t?t+e:e},unzip:()=>ai,values:()=>lr,where:()=>function(t,e){return Vr(t,br(e))},without:()=>xt,wrap:()=>function(t,e){return rt(e,t)},zip:()=>Ct}),{}),wn=(Le.r(An),Le.d(An,{Component:()=>Ze,Fragment:()=>Mi,cloneElement:()=>function(t,e,n){var r,i,o,a,s=Ei({},t.props);for(o in t.type&&t.type.defaultProps&&(a=t.type.defaultProps),e)"key"==o?r=e[o]:"ref"==o?i=e[o]:s[o]=(void 0===e[o]&&void 0!==a?a:e)[o];return 2<arguments.length&&(s.children=3<arguments.length?ci.call(arguments,2):n),ki(t.type,s,r||t.key,i||t.ref,null)},createContext:()=>function(t,r){t={__c:r="__cC"+yi++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,e;return this.getChildContext||(n=new Set,((e={})[r]=this).getChildContext=function(){return e},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.forEach(function(t){t.__e=!0,Ti(t)})},this.sub=function(t){n.add(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n&&n.delete(t),e&&e.call(t)}}),t.children}};return t.Provider.__=t.Consumer.contextType=t},createElement:()=>He,createRef:()=>function(){return{current:null}},h:()=>He,hydrate:()=>Ri,isValidElement:()=>hi,options:()=>qe,render:()=>Fi,toChildArray:()=>function e(t,n){return n=n||[],null!=t&&"boolean"!=typeof t&&(xi(t)?t.some(function(t){e(t,n)}):n.push(t)),n}}),{}),xn=(Le.r(wn),Le.d(wn,{$:()=>Dt,Bus:()=>Fv,CompositeUnsubscribe:()=>Bv,Desc:()=>bn,End:()=>kv,Error:()=>Mv,Event:()=>Av,EventStream:()=>yn,Initial:()=>Ev,Next:()=>xv,Observable:()=>jv,Property:()=>Lv,Value:()=>wv,_:()=>Xe,combine:()=>St,combineAsArray:()=>na,combineTemplate:()=>Da,combineTwo:()=>ia,combineWith:()=>ra,concatAll:()=>function(...t){t=Ko(t);return(t.length?Hi(Ki(t),t[0].toEventStream(),(t,e)=>t.concat(e)):Ro()).withDesc(new bn("Bacon","concatAll",t))},constant:()=>Jo,fromArray:()=>function(s){{var l,c;return(t=>{if(!m(t))throw new Error("not an array : "+t)})(s),s.length?(l=0,c=new yn(new bn("Bacon","fromArray",[s]),function(n){var r=!1,i=_,o=!1,a=!1;return Je.soonButNotYet(c,function t(){if(a=!0,!o){if(l===s.length)return n(Ke()),!1;for(o=!0;a;){var e;a=!1,i===b||r||(e=s[l++],(i=n(xo(e)))!==b&&(l===s.length?n(Ke()):Je.afterTransaction(c,t)))}return o=!1}}),function(){return r=!0}})):Ro().withDesc(new bn("Bacon","fromArray",s))}},fromBinder:()=>sa,fromCallback:()=>function(e,...n){return sa(function(t){return qa(e,n)(t),Wi},function(t){return[t,Ke()]}).withDesc(new bn("Bacon","fromCallback",[e,...n]))},fromESObservable:()=>function(t){var n;n=t[Ra("observable")]?t[Ra("observable")]():t;t=new bn("Bacon","fromESObservable",[n]);return new yn(t,function(e){var t=n.subscribe({error:function(t){e(new Mv(t)),e(new kv)},next:function(t){e(new xv(t))},complete:function(){e(new kv)}});return t.unsubscribe?function(){t.unsubscribe()}:t})},fromEvent:()=>Ga,fromEventTarget:()=>Ga,fromNodeCallback:()=>function(e,...n){return sa(function(t){return qa(e,n)(t),Wi},function(t,e){return t?[new Mv(t),Ke()]:[e,Ke()]}).withDesc(new bn("Bacon","fromNodeCallback",[e,...n]))},fromPoll:()=>la,fromPromise:()=>function(n,r,t=function(t){return[xo(t),Ke()]}){return sa(function(e){var t=n.then(e,t=>e(new Mv(t)));return t&&"function"==typeof t.done&&t.done(),r?function(){if("function"==typeof n.abort)return n.abort()}:function(){}},t).withDesc(new bn("Bacon","fromPromise",[n]))},getScheduler:()=>function(){return c.scheduler},groupSimultaneous:()=>function(...t){return ea(Ko(t))},hasValue:()=>$e,interval:()=>ca,isEnd:()=>Mo,isError:()=>ko,isEvent:()=>Eo,isInitial:()=>Co,isNext:()=>function(t){return t.isNext},isProperty:()=>La,later:()=>Ta,mergeAll:()=>Ba,more:()=>_,never:()=>Ro,noMore:()=>b,nullSink:()=>n,nullVoidSink:()=>Tt,onValues:()=>function(...t){return na(t.slice(0,t.length-1)).onValues(t[arguments.length-1])},once:()=>Io,repeat:()=>Va,repeatedly:()=>function(t,e){var n=0;return la(t,function(){return e[n++%e.length]}).withDesc(new bn("Bacon","repeatedly",[t,e]))},retry:()=>function(t){var r,i,o,a,s,l,c;if(Xe.isFunction(t.source))return r=t.source,i=t.retries||0,o=0,a=t.delay||function(){return 0},s=t.isRetryable||function(){return!0},l=!1,c=null,Va(function(t){function e(){return r(t).endOnError().transform(function(t,e){return ko(t)?s((c=t).error)&&(0===i||o<i)?_:(l=!0,e(t)):($e(t)&&(l=!(c=null)),e(t))})}var n;if(!l)return c?(n={error:c.error,retriesDone:o},n=Qa(a(n)),o++,n.concat(Io(null).flatMap(e))):e()}).withDesc(new bn("Bacon","retry",[t]));throw new Error("'source' option has to be a function")},sequentially:()=>function(t,e){var n=0;return la(t,function(){var t=e[n++];return n<e.length?t:n===e.length?[xo(t),Ke()]:Ke()}).withDesc(new bn("Bacon","sequentially",[t,e]))},setScheduler:()=>function(t){c.scheduler=t},silence:()=>Qa,spy:()=>Nt,try:()=>function(e){return function(t){try{return Io(e(t))}catch(t){return Io(new Mv(t))}}},update:()=>function(t,...e){var n=Go(e);for(var r=0;r<n.length;r++){var i=n[r];i[1]=(n=>function(...e){return function(t){return n(...[t].concat(e))}})(i[1])}return Wo(...n).scan(t,function(t,e){return e(t)}).withDesc(new bn("Bacon","update",[t,...e]))},version:()=>jt,when:()=>Wo,zipAsArray:()=>function(...t){var e=Xe.map(t=>t.toEventStream(),Ko(t));return Wo([e,(...t)=>t]).withDesc(new bn("Bacon","zipAsArray",t))},zipWith:()=>Ia}),{}),En=(Le.r(xn),Le.d(xn,{default:()=>v}),"1.13.7"),Fe="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},Cn=Array.prototype,kn=Object.prototype,Mn="undefined"!=typeof Symbol?Symbol.prototype:null,Bn=Cn.push,Tn=Cn.slice,Sn=kn.toString,zn=kn.hasOwnProperty,Nn="undefined"!=typeof ArrayBuffer,Re="undefined"!=typeof DataView,On=Array.isArray,In=Object.keys,Dn=Object.create,jn=Nn&&ArrayBuffer.isView,Ln=isNaN,Pn=isFinite,Fn=!{toString:null}.propertyIsEnumerable("toString"),Rn=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Wn=Math.pow(2,53)-1;function We(i,o){return o=null==o?i.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+o];switch(o){case 0:return i.call(this,e);case 1:return i.call(this,arguments[0],e);case 2:return i.call(this,arguments[0],arguments[1],e)}for(var r=Array(o+1),n=0;n<o;n++)r[n]=arguments[n];return r[o]=e,i.apply(this,r)}}function Un(t){var e=typeof t;return"function"==e||"object"==e&&!!t}function Yn(t){return void 0===t}function Gn(t){return!0===t||!1===t||"[object Boolean]"===Sn.call(t)}function Ue(t){var e="[object "+t+"]";return function(t){return Sn.call(t)===e}}let O=Ue("String"),I=Ue("Number"),D=Ue("Date"),j=Ue("RegExp"),L=Ue("Error"),P=Ue("Symbol"),F=Ue("ArrayBuffer");var Ye=Ue("Function"),Fe=Fe.document&&Fe.document.childNodes;let h=Ye="object"!=typeof Int8Array&&"function"!=typeof Fe?function(t){return"function"==typeof t||!1}:Ye;var Fe=Ue("Object"),Vn=Re&&(!/\[native code\]/.test(String(DataView))||Fe(new DataView(new ArrayBuffer(8)))),Ye="undefined"!=typeof Map&&Fe(new Map),Re=Ue("DataView");let d=Vn?function(t){return null!=t&&h(t.getInt8)&&F(t.buffer)}:Re,u=On||Ue("Array");function Qn(t,e){return null!=t&&zn.call(t,e)}var qn=Ue("Arguments");!function(){qn(arguments)||(qn=function(t){return Qn(t,"callee")})}();let R=qn;function Hn(t){return I(t)&&Ln(t)}function Zn(t){return function(){return t}}function Xn(e){return function(t){t=e(t);return"number"==typeof t&&0<=t&&t<=Wn}}function Jn(e){return function(t){return null==t?void 0:t[e]}}let Y=Jn("byteLength"),G=Xn(Y);var Kn=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;let Q=Nn?function(t){return jn?jn(t)&&!d(t):G(t)&&Kn.test(Sn.call(t))}:Zn(!1),f=Jn("length");function $n(t,e){e=(e=>{for(var n={},t=e.length,r=0;r<t;++r)n[e[r]]=!0;return{contains:function(t){return!0===n[t]},push:function(t){return n[t]=!0,e.push(t)}}})(e);var n=Rn.length,r=t.constructor,i=h(r)&&r.prototype||kn,o="constructor";for(Qn(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=Rn[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function Ge(t){if(!Un(t))return[];if(In)return In(t);var e,n=[];for(e in t)Qn(t,e)&&n.push(e);return Fn&&$n(t,n),n}function tr(t,e){var n=Ge(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0}function Ve(t){return t instanceof Ve?t:this instanceof Ve?void(this._wrapped=t):new Ve(t)}function er(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Y(t))}Ve.VERSION=En,Ve.prototype.valueOf=Ve.prototype.toJSON=Ve.prototype.value=function(){return this._wrapped},Ve.prototype.toString=function(){return String(this._wrapped)};var nr="[object DataView]";function rr(t,e,n,r){var i;return t===e?0!==t||1/t==1/e:null!=t&&null!=e&&(t!=t?e!=e:("function"==(i=typeof t)||"object"==i||"object"==typeof e)&&function t(e,n,r,i){e instanceof Ve&&(e=e._wrapped);n instanceof Ve&&(n=n._wrapped);var o=Sn.call(e);if(o!==Sn.call(n))return!1;if(Vn&&"[object Object]"==o&&d(e)){if(!d(n))return!1;o=nr}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return Mn.valueOf.call(e)===Mn.valueOf.call(n);case"[object ArrayBuffer]":case nr:return t(er(e),er(n),r,i)}o="[object Array]"===o;if(!o&&Q(e)){var a=Y(e);if(a!==Y(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof n)return!1;var a=e.constructor,s=n.constructor;if(a!==s&&!(h(a)&&a instanceof a&&h(s)&&s instanceof s)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];i=i||[];var l=r.length;for(;l--;)if(r[l]===e)return i[l]===n;r.push(e);i.push(n);if(o){if((l=e.length)!==n.length)return!1;for(;l--;)if(!rr(e[l],n[l],r,i))return!1}else{var c,u=Ge(e);if(l=u.length,Ge(n).length!==l)return!1;for(;l--;)if(c=u[l],!Qn(n,c)||!rr(e[c],n[c],r,i))return!1}r.pop();i.pop();return!0}(t,e,n,r))}function ir(t){if(!Un(t))return[];var e,n=[];for(e in t)n.push(e);return Fn&&$n(t,n),n}function or(r){var i=f(r);return function(t){if(null==t)return!1;var e=ir(t);if(f(e))return!1;for(var n=0;n<i;n++)if(!h(t[r[n]]))return!1;return r!==sr||!h(t[ar])}}var ar="forEach",On=(Fe=["clear","delete"]).concat(ar,Re=["get","has","set"]),sr=Fe.concat(Re),Nn=["add"].concat(Fe,ar,"has");let q=Ye?or(On):Ue("Map"),H=Ye?or(sr):Ue("WeakMap"),Z=Ye?or(Nn):Ue("Set"),X=Ue("WeakSet");function lr(t){for(var e=Ge(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function cr(t){for(var e={},n=Ge(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function ur(t){var e,n=[];for(e in t)h(t[e])&&n.push(e);return n.sort()}function hr(l,c){return function(t){var e=arguments.length;if(c&&(t=Object(t)),!(e<2||null==t))for(var n=1;n<e;n++)for(var r=arguments[n],i=l(r),o=i.length,a=0;a<o;a++){var s=i[a];c&&void 0!==t[s]||(t[s]=r[s])}return t}}let J=hr(ir),K=hr(Ge),$=hr(ir,!0);function dr(t){var e;return Un(t)?Dn?Dn(t):((e=function(){}).prototype=t,t=new e,e.prototype=null,t):{}}function fr(t){return u(t)?t:[t]}function pr(t){return Ve.toPath(t)}function gr(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function mr(t,e,n){t=gr(t,pr(e));return Yn(t)?n:t}function _r(t){return t}function br(e){return e=K({},e),function(t){return tr(t,e)}}function yr(e){return e=pr(e),function(t){return gr(t,e)}}function vr(i,o,t){if(void 0===o)return i;switch(null==t?3:t){case 1:return function(t){return i.call(o,t)};case 3:return function(t,e,n){return i.call(o,t,e,n)};case 4:return function(t,e,n,r){return i.call(o,t,e,n,r)}}return function(){return i.apply(o,arguments)}}function Ar(t,e,n){return null==t?_r:h(t)?vr(t,e,n):(Un(t)&&!u(t)?br:yr)(t)}function wr(t,e){return Ar(t,e,1/0)}function Qe(t,e,n){return Ve.iteratee!==wr?Ve.iteratee(t,e):Ar(t,e,n)}function xr(){}function Er(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}Ve.toPath=fr,Ve.iteratee=wr;let p=Date.now||function(){return(new Date).getTime()};function Cr(e){function n(t){return e[t]}var t="(?:"+Ge(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(i,n):t}}let tt=Cr(Re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),et=Cr(cr(Re)),nt=Ve.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var kr=/(.)^/,Mr={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Br=/\\|'|\r|\n|\u2028|\u2029/g;function Tr(t){return"\\"+Mr[t]}var Sr=/^\s*(\w|\$)+\s*$/,zr=0;function Nr(t,e,n,r,i){return r instanceof e?(r=dr(t.prototype),Un(e=t.apply(r,i))?e:r):t.apply(n,i)}var Or=We(function(i,o){function a(){for(var t=0,e=o.length,n=Array(e),r=0;r<e;r++)n[r]=o[r]===s?arguments[t++]:o[r];for(;t<arguments.length;)n.push(arguments[t++]);return Nr(i,a,this,this,n)}var s=Or.placeholder;return a});Or.placeholder=Ve;let rt=Or,it=We(function(e,n,r){var i;if(h(e))return i=We(function(t){return Nr(e,i,n,this,r.concat(t))});throw new TypeError("Bind must be called on a function")}),g=Xn(f);function Ir(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,a=f(t);o<a;o++){var s=t[o];if(g(s)&&(u(s)||R(s)))if(1<e)Ir(s,e-1,n,r),i=r.length;else for(var l=0,c=s.length;l<c;)r[i++]=s[l++];else n||(r[i++]=s)}return r}let ot=We(function(t,e){var n=(e=Ir(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=it(t[r],t)}return t}),at=We(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),st=rt(at,Ve,1);function Dr(t){return function(){return!t.apply(this,arguments)}}function jr(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}let lt=rt(jr,2);function Lr(t,e,n){e=Qe(e,n);for(var r,i=Ge(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r}function Pr(o){return function(t,e,n){e=Qe(e,n);for(var r=f(t),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(e(t[i],i,t))return i;return-1}}let ct=Pr(1),ut=Pr(-1);function Fr(t,e,n,r){for(var i=(n=Qe(n,r,1))(e),o=0,a=f(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o}function Rr(o,a,s){return function(t,e,n){var r=0,i=f(t);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(s&&n&&i)return t[n=s(t,e)]===e?n:-1;if(e!=e)return 0<=(n=a(Tn.call(t,r,i),Hn))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(t[n]===e)return n;return-1}}let ht=Rr(1,ct,Fr),dt=Rr(-1,ut);function Wr(t,e,n){e=(g(t)?ct:Lr)(t,e,n);if(void 0!==e&&-1!==e)return t[e]}function Ur(t,e,n){if(e=vr(e,n),g(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else for(var r=Ge(t),i=0,o=r.length;i<o;i++)e(t[r[i]],r[i],t);return t}function Yr(t,e,n){e=Qe(e,n);for(var r=!g(t)&&Ge(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o}function Gr(d){return function(t,e,n,r){var i=3<=arguments.length,o=t,a=vr(e,r,4),s=n,t=i,l=!g(o)&&Ge(o),c=(l||o).length,u=0<d?0:c-1;for(t||(s=o[l?l[u]:u],u+=d);0<=u&&u<c;u+=d){var h=l?l[u]:u;s=a(s,o[h],h,o)}return s}}let ft=Gr(1),pt=Gr(-1);function Vr(t,r,e){var i=[];return r=Qe(r,e),Ur(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function Qr(t,e,n){e=Qe(e,n);for(var r=!g(t)&&Ge(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0}function qr(t,e,n){e=Qe(e,n);for(var r=!g(t)&&Ge(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1}function Hr(t,e,n,r){return g(t)||(t=lr(t)),"number"==typeof n&&!r||(n=0),0<=ht(t,e,n)}let gt=We(function(t,n,r){var i,o;return h(n)?o=n:(n=pr(n),i=n.slice(0,-1),n=n[n.length-1]),Yr(t,function(t){var e=o;if(!e){if(null==(t=i&&i.length?gr(t,i):t))return;e=t[n]}return null==e?e:e.apply(t,r)})});function Zr(t,e){return Yr(t,yr(e))}function Xr(t,r,e){var n,i,o=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=g(t)?t:lr(t)).length;s<l;s++)null!=(n=t[s])&&o<n&&(o=n);else r=Qe(r,e),Ur(t,function(t,e,n){i=r(t,e,n),(a<i||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o}var Jr=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Kr(t){return t?u(t)?Tn.call(t):O(t)?t.match(Jr):g(t)?Yr(t,_r):lr(t):[]}function $r(t,e,n){if(null==e||n)return(t=g(t)?t:lr(t))[Er(t.length-1)];for(var r=Kr(t),n=f(r),i=(e=Math.max(Math.min(e,n),0),n-1),o=0;o<e;o++){var a=Er(o,i),s=r[o];r[o]=r[a],r[a]=s}return r.slice(0,e)}function ti(o,e){return function(n,r,t){var i=e?[[],[]]:{};return r=Qe(r,t),Ur(n,function(t,e){e=r(t,e,n);o(i,t,e)}),i}}let mt=ti(function(t,e,n){Qn(t,n)?t[n].push(e):t[n]=[e]}),_t=ti(function(t,e,n){t[n]=e}),bt=ti(function(t,e,n){Qn(t,n)?t[n]++:t[n]=1}),yt=ti(function(t,e,n){t[n?0:1].push(e)},!0);function ei(t,e,n){return e in n}let vt=We(function(t,e){var n={},r=e[0];if(null!=t){h(r)?(1<e.length&&(r=vr(r,e[1])),e=ir(t)):(r=ei,e=Ir(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}}return n}),At=We(function(t,n){var e,r=n[0];return h(r)?(r=Dr(r),1<n.length&&(e=n[1])):(n=Yr(Ir(n,!1,!1),String),r=function(t,e){return!Hr(n,e)}),vt(t,r,e)});function ni(t,e,n){return Tn.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function ri(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:ni(t,t.length-e)}function ii(t,e,n){return Tn.call(t,null==e||n?1:e)}let wt=We(function(t,e){return e=Ir(e,!0,!0),Vr(t,function(t){return!Hr(e,t)})}),xt=We(function(t,e){return wt(t,e)});function oi(t,e,n,r){Gn(e)||(r=n,n=e,e=!1),null!=n&&(n=Qe(n,r));for(var i=[],o=[],a=0,s=f(t);a<s;a++){var l=t[a],c=n?n(l,a,t):l;e&&!n?(a&&o===c||i.push(l),o=c):n?Hr(o,c)||(o.push(c),i.push(l)):Hr(i,l)||i.push(l)}return i}let Et=We(function(t){return oi(Ir(t,!0,!0))});function ai(t){for(var e=t&&Xr(t,f).length||0,n=Array(e),r=0;r<e;r++)n[r]=Zr(t,r);return n}let Ct=We(ai);function si(t,e){return t._chain?Ve(e).chain():e}function li(n){return Ur(ur(n),function(t){var e=Ve[t]=n[t];Ve.prototype[t]=function(){var t=[this._wrapped];return Bn.apply(t,arguments),si(this,e.apply(Ve,t))}}),Ve}Ur(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=Cn[e];Ve.prototype[e]=function(){var t=this._wrapped;return null!=t&&(n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0]),si(this,t)}}),Ur(["concat","join","slice"],function(t){var e=Cn[t];Ve.prototype[t]=function(){var t=this._wrapped;return si(this,t=null!=t?e.apply(t,arguments):t)}});let kt=Ve,Mt=li(Pe),k=Mt._=Mt;var ci,qe,ui,hi,di,fi,pi,gi,mi,_i,bi,yi,vi={},Ai=[],wi=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xi=Array.isArray;function Ei(t,e){for(var n in e)t[n]=e[n];return t}function Ci(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function He(t,e,n){var r,i,o,a={};for(o in e)"key"==o?r=e[o]:"ref"==o?i=e[o]:a[o]=e[o];if(2<arguments.length&&(a.children=3<arguments.length?ci.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===a[o]&&(a[o]=t.defaultProps[o]);return ki(t,a,r,i,null)}function ki(t,e,n,r,i){t={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++ui:i,__i:-1,__u:0};return null==i&&null!=qe.vnode&&qe.vnode(t),t}function Mi(t){return t.children}function Ze(t,e){this.props=t,this.context=e}function Bi(t,e){if(null==e)return t.__?Bi(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?Bi(t):null}function Ti(t){(t.__d||(t.__d=!0,!di.push(t))||Si.__r++)&&fi===qe.debounceRendering||((fi=qe.debounceRendering)||pi)(Si)}function Si(){var t,e,n,r,i,o,a;for(di.sort(gi);e=di.shift();)e.__d&&(t=di.length,n=void 0,i=(r=(e=e).__v).__e,o=[],a=[],e.__P&&((n=Ei({},r)).__v=r.__v+1,qe.vnode&&qe.vnode(n),Di(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,null==i?Bi(r):i,!!(32&r.__u),a),n.__v=r.__v,ji(o,n.__.__k[n.__i]=n,a),n.__e!=i)&&function t(e){var n,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(r=e.__k[n])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return t(e)}}(n),di.length>t)&&di.sort(gi);Si.__r=0}function zi(t,e,n,r,i,o,a,s,l,c,u){var h,d,f,p,g,m,_,b,y,v,A=r&&r.__k||Ai,w=e.length,x=(n.__d=l,n),E=e,C=A,k=E.length,M=C.length,B=M,T=0;for(x.__k=[],m=0;m<k;m++)null!=(_=E[m])&&"boolean"!=typeof _&&"function"!=typeof _?(y=m+T,(_=x.__k[m]="string"==typeof _||"number"==typeof _||"bigint"==typeof _||_.constructor==String?ki(null,_,null,null,null):xi(_)?ki(Mi,{children:_},null,null,null):void 0===_.constructor&&0<_.__b?ki(_.type,_.props,_.key,_.ref||null,_.__v):_).__=x,_.__b=x.__b+1,b=null,-1!==(v=_.__i=((t,e,n,r)=>{var i=t.key,o=t.type,a=n-1,s=n+1,l=e[n];if(null===l||l&&i==l.key&&o===l.type&&0==(131072&l.__u))return n;if(r>(null!=l&&0==(131072&l.__u)?1:0))for(;0<=a||s<e.length;){if(0<=a){if((l=e[a])&&0==(131072&l.__u)&&i==l.key&&o===l.type)return a;a--}if(s<e.length){if((l=e[s])&&0==(131072&l.__u)&&i==l.key&&o===l.type)return s;s++}}return-1})(_,C,y,B))&&(B--,b=C[v])&&(b.__u|=131072),null==b||null===b.__v?(-1==v&&T--,"function"!=typeof _.type&&(_.__u|=65536)):v!==y&&(v==y-1?T--:v==y+1?T++:(y<v?T--:T++,_.__u|=65536))):_=x.__k[m]=null;if(B)for(m=0;m<M;m++)null!=(b=C[m])&&0==(131072&b.__u)&&(b.__e==x.__d&&(x.__d=Bi(b)),function t(e,n,r){var i,o;if(qe.unmount&&qe.unmount(e),!(i=e.ref)||i.current&&i.current!==e.__e||Li(i,null,n),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){qe.__e(e,n)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&t(i[o],n,r||"function"!=typeof e.type);r||Ci(e.__e),e.__c=e.__=e.__e=e.__d=void 0}(b,b));for(l=n.__d,h=0;h<w;h++)null!=(f=n.__k[h])&&(d=-1!==f.__i&&A[f.__i]||vi,f.__i=h,Di(t,f,d,i,o,a,s,l,c,u),p=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&Li(d.ref,null,f),u.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),65536&f.__u||d.__k===f.__k?l=function t(e,n,r){var i,o;if("function"==typeof e.type){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,n=t(i[o],n,r));return n}e.__e!=n&&(n&&e.type&&!r.contains(n)&&(n=Bi(e)),r.insertBefore(e.__e,n||null),n=e.__e);for(;n=n&&n.nextSibling,null!=n&&8===n.nodeType;);return n}(f,l,t):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=g}function Ni(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||wi.test(e)?n:n+"px"}function Oi(t,e,n,r,i){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Ni(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Ni(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=(e.toLowerCase()in t||"onFocusOut"===e||"onFocusIn"===e?e.toLowerCase():e).slice(2),t.l||(t.l={}),(t.l[e+o]=n)?r?n.u=r.u:(n.u=mi,t.addEventListener(e,o?bi:_i,o)):t.removeEventListener(e,o?bi:_i,o);else{if("http://www.w3.org/2000/svg"==i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"!=typeof n&&(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function Ii(n){return function(t){if(this.l){var e=this.l[t.type+n];if(null==t.t)t.t=mi++;else if(t.t<e.u)return;return e(qe.event?qe.event(t):t)}}}function Di(t,e,n,r,i,o,a,s,l,c){var u,h,d,f,p,g,m,_,b,y,v,A,w,x,E,C,k=e.type;if(void 0===e.constructor){128&n.__u&&(l=!!(32&n.__u),o=[s=e.__e=n.__e]),(u=qe.__b)&&u(e);t:if("function"==typeof k)try{if(_=e.props,b="prototype"in k&&k.prototype.render,y=(u=k.contextType)&&r[u.__c],v=u?y?y.props.value:u.__:r,n.__c?m=(h=e.__c=n.__c).__=h.__E:(b?e.__c=h=new k(_,v):(e.__c=h=new Ze(_,v),h.constructor=k,h.render=Pi),y&&y.sub(h),h.props=_,h.state||(h.state={}),h.context=v,h.__n=r,d=h.__d=!0,h.__h=[],h._sb=[]),b&&null==h.__s&&(h.__s=h.state),b&&null!=k.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=Ei({},h.__s)),Ei(h.__s,k.getDerivedStateFromProps(_,h.__s))),f=h.props,p=h.state,h.__v=e,d)b&&null==k.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),b&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(b&&null==k.getDerivedStateFromProps&&_!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(_,v),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(_,h.__s,v)||e.__v===n.__v)){for(e.__v!==n.__v&&(h.props=_,h.state=h.__s,h.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(t){t&&(t.__=e)}),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[],h.__h.length&&a.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(_,h.__s,v),b&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(f,p,g)})}if(h.context=v,h.props=_,h.__P=t,h.__e=!1,w=qe.__r,x=0,b){for(h.state=h.__s,h.__d=!1,w&&w(e),u=h.render(h.props,h.state,h.context),E=0;E<h._sb.length;E++)h.__h.push(h._sb[E]);h._sb=[]}else for(;h.__d=!1,w&&w(e),u=h.render(h.props,h.state,h.context),h.state=h.__s,h.__d&&++x<25;);h.state=h.__s,null!=h.getChildContext&&(r=Ei(Ei({},r),h.getChildContext())),b&&!d&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(f,p)),zi(t,xi(C=null!=u&&u.type===Mi&&null==u.key?u.props.children:u)?C:[C],e,n,r,i,o,a,s,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),m&&(h.__E=h.__=null)}catch(t){if(e.__v=null,l||null!=o){for(e.__u|=l?160:128;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else e.__e=n.__e,e.__k=n.__k;qe.__e(t,e,n)}else null==o&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=((t,e,n,r,i,o,a,s,l)=>{var c,u,h,d,f,p,g,m=n.props,_=e.props,b=e.type;if(i="svg"===b?"http://www.w3.org/2000/svg":"math"===b?"http://www.w3.org/1998/Math/MathML":i||"http://www.w3.org/1999/xhtml",null!=o)for(c=0;c<o.length;c++)if((f=o[c])&&"setAttribute"in f==!!b&&(b?f.localName===b:3===f.nodeType)){t=f,o[c]=null;break}if(null==t){if(null===b)return document.createTextNode(_);t=document.createElementNS(i,b,_.is&&_),s&&(qe.__m&&qe.__m(e,o),s=!1),o=null}if(null===b)m===_||s&&t.data===_||(t.data=_);else{if(o=o&&ci.call(t.childNodes),m=n.props||vi,!s&&null!=o)for(m={},c=0;c<t.attributes.length;c++)m[(f=t.attributes[c]).name]=f.value;for(c in m)if(f=m[c],"children"!=c)if("dangerouslySetInnerHTML"==c)h=f;else if(!(c in _)){if("value"==c&&"defaultValue"in _||"checked"==c&&"defaultChecked"in _)continue;Oi(t,c,null,f,i)}for(c in _)f=_[c],"children"==c?d=f:"dangerouslySetInnerHTML"==c?u=f:"value"==c?p=f:"checked"==c?g=f:s&&"function"!=typeof f||m[c]===f||Oi(t,c,f,m[c],i);if(u)s||h&&(u.__html===h.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(h&&(t.innerHTML=""),zi(t,xi(d)?d:[d],e,n,r,"foreignObject"===b?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&Bi(n,0),s,l),null!=o)for(c=o.length;c--;)Ci(o[c]);s||(c="value","progress"===b&&null==p?t.removeAttribute("value"):void 0!==p&&(p!==t[c]||"progress"===b&&!p||"option"===b&&p!==m[c])&&Oi(t,c,p,m[c],i),c="checked",void 0!==g&&g!==t[c]&&Oi(t,c,g,m[c],i))}return t})(n.__e,e,n,r,i,o,a,l,c);(u=qe.diffed)&&u(e)}}function ji(t,e,n){e.__d=void 0;for(var r=0;r<n.length;r++)Li(n[r],n[++r],n[++r]);qe.__c&&qe.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){qe.__e(t,e.__v)}})}function Li(t,e,n){try{var r;"function"==typeof t?((r="function"==typeof t.__u)&&t.__u(),r&&null==e||(t.__u=t(e))):t.current=e}catch(t){qe.__e(t,n)}}function Pi(t,e,n){return this.constructor(t,n)}function Fi(t,e,n){var r,i,o,a;qe.__&&qe.__(t,e),i=(r="function"==typeof n)?null:n&&n.__k||e.__k,o=[],a=[],Di(e,t=(!r&&n||e).__k=He(Mi,null,[t]),i||vi,vi,e.namespaceURI,!r&&n?[n]:!i&&e.firstChild?ci.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r,a),ji(o,t,a)}function Ri(t,e){Fi(t,e,Ri)}function Wi(){}ci=Ai.slice,qe={__e:function(t,e,n,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(t)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(e){t=e}throw t}},ui=0,hi=function(t){return null!=t&&null==t.constructor},Ze.prototype.setState=function(t,e){var n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Ei({},this.state);(t="function"==typeof t?t(Ei({},n),this.props):t)&&Ei(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),Ti(this))},Ze.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ti(this))},Ze.prototype.render=Mi,di=[],pi="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_i=Ii(!(gi=function(t,e){return t.__v.__b-e.__v.__b})),bi=Ii(!(mi=Si.__r=0)),yi=0;let m=Array.isArray||function(t){return t instanceof Array};function Ui(t){return t&&t._isObservable}function Yi(t,e){for(var n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0}function Gi(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function Vi(t,e){return-1!==Bt(t,e)}function Qi(t,e){for(var n,r=[],i=0;i<e.length;i++)t(n=e[i])&&r.push(n);return r}function qi(n){return(t,e)=>n(e,t)}function Hi(t,e,n){for(var r=0;r<t.length;r++)e=n(e,t[r]);return e}function Zi(t){return t[0]}let Bt=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1};function Xi(t){return"function"==typeof t}function Ji(t,e){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n}function Ki(t){return t.slice(1,t.length)}function $i(t){return m(t)?t:[t]}function to(e){return"function"==typeof e?e:t=>e}var Xe={indexOf:Bt,indexWhere:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},head:Zi,always:function(t){return()=>t},negate:function(e){return function(t){return!e(t)}},empty:function(t){return 0===t.length},tail:Ki,filter:Qi,map:Ji,each:function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},toArray:$i,contains:Vi,id:function(t){return t},last:function(t){return t[t.length-1]},all:Yi,any:Gi,without:function(e,t){return Qi(function(t){return t!==e},t)},remove:function(t,e){if(0<=(t=Bt(e,t)))return e.splice(t,1)},fold:Hi,flatMap:function(n,t){return Hi(t,[],function(t,e){return t.concat(n(e))})},bind:function(t,e){return function(){return t.apply(e,arguments)}},isFunction:Xi,toFunction:to,toString:function t(e){var n={}.hasOwnProperty;try{if(eo++,null==e)return"undefined";if(Xi(e))return"function";if(m(e))return 5<eo?"[..]":"["+Ji(t,e).toString()+"]";if(null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString)return e.toString();if("object"!=typeof e)return e;if(5<eo)return"{..}";var r,i,o=[];for(r in e)n.call(e,r)&&(i=(()=>{try{return e[r]}catch(t){return t}})(),o.push(t(r)+":"+t(i)));return"{"+o+"}"}finally{eo--}}},eo=0;let _=void 0,b="<no-more>";function no(t,e){if(!e)throw new Error(t)}function ro(t){no("not a function : "+t,Xe.isFunction(t))}let c={scheduler:{setTimeout(t,e){return setTimeout(t,e)},setInterval(t,e){return setInterval(t,e)},clearInterval(t){return clearInterval(t)},clearTimeout(t){return clearTimeout(t)},now(){return(new Date).getTime()}}};var io=void 0,oo=[],ao={},so=[],lo=0,co={},uo=!1;function ho(t){t<=lo||(so[t-1]||(so[t-1]=[[],0]),lo=t)}function fo(t,e){if(!io&&!uo)return e();ho(1);for(var n=0;n<lo-1&&!((t,e)=>{for(var n=0;n<e.length;n++)if(e[n][0].id==t.id)return 1})(t,so[n][0]);)n++;so[n][0].push([t,e]),io||po()}function po(){var t=lo;if(t){var e=!uo;uo=!0;try{for(;t<=lo;){var n=so[lo-1];if(!n)throw new Error("Unexpected stack top: "+n);var[r,i]=n;if(!(i<r.length)){n[0]=[],n[1]=0;break}var[,o]=r[i],a=(n[1]++,ho(lo+1),!1);try{for(o(),a=!0;t<lo&&0==so[lo-1][0].length;)lo--}finally{a||(so=[],lo=0)}}}finally{e&&(uo=!1)}}}function go(t,e){var n;return io?void 0===(n=ao[t.id])?(n=ao[t.id]=[e],oo.push(t)):n.push(e):e()}function mo(t,e){var n=oo[t],r=n.id,i=ao[r];oo.splice(t,1),delete ao[r],e&&0<oo.length&&function t(e){if(co[e.id])return;var n=e.internalDeps();for(var r,i=0;i<n.length;i++)r=n[i],t(r),ao[r.id]&&mo(Xe.indexOf(oo,r),!1);co[e.id]=!0}(n);for(var o=0;o<i.length;o++)(0,i[o])()}var Je={toString:function(){return Xe.toString({rootEvent:io,processingAfters:uo,waiterObs:oo,waiters:ao,aftersStack:so,aftersStackHeight:lo,flushed:co})},whenDoneWith:go,hasWaiters:function(){return 0<oo.length},inTransaction:function(t,e,n,r){if(io)return n.apply(e,r);io=t;try{for(var i=n.apply(e,r);0<oo.length;)mo(0,!0);co={}}finally{io=void 0,po()}return i},currentEventId:function(){return io?io.id:void 0},wrappedSubscribe:function(e,t,n){ro(n);let r=!1,i=!1,o=()=>{i=!0},a=()=>{r=!0,o()};return o=t(function(t){return fo(e,function(){r||n(t)===b&&a()}),_}),i&&o(),a},afterTransaction:fo,soonButNotYet:function(t,e){io?go(t,e):c.scheduler.setTimeout(e,0)},isInTransaction:function(){return void 0!==io}};class bn{constructor(t,e,n=[]){this._isDesc=!0,this.context=t,this.method=e,this.args=n}deps(){return this.cachedDeps||(this.cachedDeps=bo([this.context].concat(this.args))),this.cachedDeps}toString(){var t=Xe.map(Xe.toString,this.args);return Xe.toString(this.context)+"."+Xe.toString(this.method)+"("+t+")"}}function _o(t,e,...n){var r=t||e;return r&&r._isDesc?t||e:new bn(t,e,n)}function bo(t){return m(t)?Xe.flatMap(bo,t):Ui(t)?[t]:null!=t&&t._isSource?[t.obs]:[]}let n=()=>_,Tt=()=>_;function yo(t,e,n){return n.transform(((t,o)=>{let a=t;return(t,e)=>{for(var[t,n]=o(a,t),r=(a=t,_),i=0;i<n.length;i++)if((r=e(n[i]))===b)return r;return r}})(t,e),new bn(n,"withStateMachine",[t,e]))}class vv{constructor(t){this._isSome=!0,this.isDefined=!0,this.value=t}getOrElse(t){return this.value}get(){return this.value}filter(t){return t(this.value)?new vv(this.value):i}map(t){return new vv(t(this.value))}forEach(t){t(this.value)}toArray(){return[this.value]}inspect(){return"Some("+this.value+")"}toString(){return this.inspect()}}let i={_isNone:!0,getOrElse(t){return t},get(){throw new Error("None.get()")},filter(){return i},map(){return i},forEach(){},isDefined:!1,toArray(){return[]},inspect(){return"None"},toString(){return this.inspect()}};var vo=0;class Av{constructor(){this.id=++vo,this.isEvent=!0,this._isEvent=!0,this.isEnd=!1,this.isInitial=!1,this.isNext=!1,this.isError=!1,this.hasValue=!1}filter(t){return!0}inspect(){return this.toString()}log(){return this.toString()}toNext(){return this}}class wv extends Av{constructor(t){if(super(),this.hasValue=!0,t instanceof Av)throw new Mv("Wrapping an event inside other event");this.value=t}fmap(t){return this.apply(t(this.value))}filter(t){return t(this.value)}toString(){return Xe.toString(this.value)}log(){return this.value}}class xv extends wv{constructor(t){super(t),this.isNext=!0,this._isNext=!0}apply(t){return new xv(t)}}class Ev extends wv{constructor(t){super(t),this.isInitial=!0,this._isInitial=!0}apply(t){return new Ev(t)}toNext(){return new xv(this.value)}}class Cv extends Av{constructor(){super(...arguments),this.hasValue=!1}fmap(t){return this}}class kv extends Cv{constructor(){super(...arguments),this.isEnd=!0}toString(){return"<end>"}}class Mv extends Cv{constructor(t){super(),this.isError=!0,this.error=t}toString(){return"<error> "+Xe.toString(this.error)}}function Ao(t){return new Ev(t)}function wo(t){return new xv(t)}function Ke(){return new kv}function xo(t){return t&&t._isEvent?t:wo(t)}function Eo(t){return t&&t._isEvent}function Co(t){return t&&t._isInitial}function ko(t){return t.isError}function $e(t){return t.hasValue}function Mo(t){return t.isEnd}function Bo(t,r=function(t,e){return t===e}){var e=new bn(t,"skipDuplicates",[]);return yo(i,function(t,e){return $e(e)?e.isInitial||null!=(n=t)&&n._isNone||!r(t.get(),e.value)?[new vv(e.value),[e]]:[t,[]]:[t,[e]];var n},t).withDesc(e)}function To(t,e,n){return e.transform(So(t),n||new bn(e,"take",[t]))}function So(n){return(t,e)=>!t.hasValue||0<--n?e(t):(0===n&&e(t),e(Ke()),b)}function zo(e,t,a){let s,l=t,c=!1;return s=new Lv(new bn(e,"scan",[t,a]),n=>{var r=!1,t=Wi,i=_;function o(){return r||(r=c=!0,(i=n(new Ev(l)))===b&&(t(),t=Wi)),i}return t=e.subscribeInternal(function(t){var e;return $e(t)?c&&t.isInitial?_:(t.isInitial||o(),r=c=!0,e=l,e=a(e,t.value),l=e,n(t.apply(e))):(i=t.isEnd?o():i)!==b?n(t):i}),Je.whenDoneWith(s,o),t})}class Bv{constructor(t=[]){this.unsubscribed=!1,this.unsubscribe=Xe.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var e=0;e<t.length;e++)this.add(t[e])}add(t){var e,n;this.unsubscribed||(e=!1,n=Wi,this.starting.push(t),n=t(this.unsubscribe,()=>{this.unsubscribed||(e=!0,this.remove(n),Xe.remove(t,this.starting))}),this.unsubscribed||e?n():this.subscriptions.push(n),Xe.remove(t,this.starting))}remove(t){return!this.unsubscribed&&void 0!==Xe.remove(t,this.subscriptions)?t():void 0}unsubscribe(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,e=0;e<t.length;e++)t[e]();this.subscriptions=[],this.starting=[]}}count(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length}empty(){return 0===this.count()}}function No(s,t){return function(e){function n(){if(!r)return s.forEach(function(t){if(r=!0,(a=e(new Ev(t)))===b)return o(),o=Wi})}var r=!1,i=!1,o=Wi,a=_,o=t(function(t){return t instanceof wv?t.isInitial&&!i?(s=new vv(t.value),_):(t.isInitial||n(),r=!0,s=new vv(t.value),e(t)):(a=t.isEnd?n():a)!==b?e(t):a}),i=!0;return n(),o}}function Oo(t,e){return ro(e),new Lv(t,No(i,e))}function Io(e){let n=new yn(new bn("Bacon","once",[e]),function(t){return Je.soonButNotYet(n,function(){t(xo(e)),t(Ke())}),Wi});return n}function Do(e,t,r={}){let i=t,n=[i],c=[],u=t._isProperty;var o=u?Oo:Fa;let h=!1;o=o(r.desc||new bn(t,"flatMap_",[e]),function(o){let n=new Bv,a=[];function s(t){if(u&&t.isInitial){if(h)return _;h=!0}let i=Lo(e(t));c.push(i),n.add(function(n,r){return i.subscribeInternal(function(t){var e;return t.isEnd?(Xe.remove(i,c),(e=a.shift())&&s(e),l(r),b):(t=t.toNext(),(e=o(t))===b&&n(),e)})})}function l(t){return t(),n.empty()?o(Ke()):_}return n.add(function(t,e){return i.subscribeInternal(function(t){return t.isEnd?l(e):t.isError&&!r.mapError?o(t):r.firstOnly&&1<n.count()?_:n.unsubscribed?b:(r.limit&&n.count()>r.limit?a.push(t):s(t),_)})}),n.unsubscribe});return o.internalDeps=function(){return c.length?n.concat(c):n},o}function jo(e){return"function"==typeof e?t=>$e(t)?e(t.value):t:t=>e}function Lo(t){return Ui(t)?t:Io(t)}function Po(t,e){return Do(e,t,{mapError:!0,desc:new bn(t,"flatMapEvent",[e])})}class Tv{constructor(t,e){this._isSource=!0,this.flatten=!0,this.ended=!1,this.obs=t,this.sync=e}subscribe(t){return this.obs.subscribeInternal(t)}toString(){return this.obs.toString()}markEnded(){this.ended=!0}mayHave(t){return!0}}class Sv extends Tv{consume(){return this.value}push(t){this.value=t}hasAtLeast(t){return!!this.value}}class zv extends Tv{constructor(t,e){super(t,e),this.flatten=!1,this.queue=[]}consume(){return this.queue.shift()}push(t){this.queue.push(t)}mayHave(t){return!this.ended||this.queue.length>=t}hasAtLeast(t){return this.queue.length>=t}}class Nv extends Tv{constructor(t){super(t,!0),this.queue=[]}consume(){var t=this.queue;return this.queue=[],{value:t}}push(t){return this.queue.push(t.value)}hasAtLeast(t){return!0}}function Fo(t){return null!=t&&t._isSource?t:null!=t&&t._isProperty?new Sv(t,!1):new zv(t,!0)}function Ro(){return new yn(_o("Bacon","never"),t=>(t(Ke()),Wi))}function Wo(...t){return Yo(Pa,t)}function Uo(...t){return Yo(Oo,t)}function Yo(t,e){var h,d,f,n,r,p;return 0!==e.length&&([h,d]=(e=>{var n=[],r=[];for(let t=0;t<e.length;t++){for(var i,[o,a]=e[t],s={f:a,ixs:[]},l=!1,c=0;c<o.length;c++){i=o[c];var u=Bt(n,i);l=l||(t=>null!=t&&(t._isSource?t.sync:t._isEventStream))(i),u<0&&(n.push(i),u=n.length-1);for(var h=0;h<s.ixs.length;h++){var d=s.ixs[h];d.index===u&&d.count++}s.ixs.push({index:u,count:1})}if(0<o.length&&!l)throw new Error("At least one EventStream required, none found in "+o);0<o.length&&r.push(s)}return[Ji(Fo,n),r]})(Go(e)),h.length)?(f=Gi(h,t=>t.flatten)&&(n=Ji(t=>t.obs,h),r=[],Gi(n,function t(e){var n;return!!Vi(r,e)||((n=e.internalDeps()).length?(r.push(e),Gi(n,t)):(r.push(e),!1))})),p=t(new bn("Bacon","when",Array.prototype.slice.call(e)),function(l){var c=[],a=!1;function e(t){for(var e=0;e<t.ixs.length;e++){var n=t.ixs[e];if(!h[n.index].mayHave(n.count))return!0}return!1}function u(t){return!t.source.flatten}return new Bv(Ji(function(o){return function(n){function r(){Je.whenDoneWith(p,i)}function s(){var t;if(void 0!==(t=c.pop())){_;for(var e,n=0;n<d.length;n++)if((t=>{for(var e=0;e<t.ixs.length;e++){var n=t.ixs[e];if(!h[n.index].hasAtLeast(n.count))return}return 1})(e=d[n])){for(var r=[],i=0;i<e.ixs.length;i++){var o=h[e.ixs[i].index].consume();if(!o)throw new Error("Event was undefined");r.push(o.value)}var a=e.f.apply(null,r),a=l(t.e.apply(a));return c.length&&(c=Qi(u,c)),a===b?a:s()}}return _}function i(){var t=s();a&&(Yi(h,Vo)||Yi(d,e))&&(t=b,l(Ke())),t===b&&n()}return o.subscribe(function(t){var e=_;return t.isEnd?(a=!0,o.markEnded(),r()):t.isError?e=l(t):(o.push(t=t),o.sync&&(c.push({source:o,e:t}),(f||Je.hasWaiters()?r:i)())),e===b&&n(),e})}},h)).unsubscribe})):Ro()}function Go(e){var n=[];for(let t=0;t<e.length;t++){var r,i=e[t];if(!((r=i)instanceof Array)||Ui(r[r.length-1])){for(var o=e,a=0,s=o.length,l=[];a<s;){var c=$i(o[a++]),u=to(o[a++]);l.push([c,u])}return no("when: expecting arguments in the form (Observable+,function)+",s%2==0),l}i[0]instanceof Array?n.push([i[0],to(i[1])]):(r=i.slice(0,i.length-1),i=to(i[i.length-1]),n.push([r,i]))}return n}function Vo(t){return!t.sync||t.ended}function Qo(t,e,n){return Wo([new Sv(e.toProperty(),!1),new Sv(t,!0),qi(n)]).withDesc(new bn(t,"withLatestFrom",[e,n]))}function qo(t,e,n){return Uo([new Sv(e.toProperty(),!1),new Sv(t,!0),qi(n)]).withDesc(new bn(t,"withLatestFrom",[e,n]))}function Ho(t,e,n){if(t instanceof Lv)return qo(t,e,n);if(t instanceof yn)return Qo(t,e,n);throw new Error("Unknown observable: "+t)}function Zo(t,e){return e instanceof Lv?Ho(t,e,(t,e)=>e):t.transform(Xo(e),new bn(t,"map",[e]))}function Xo(t){let n=Xe.toFunction(t);return(t,e)=>e(t.fmap(n))}function Jo(e){return new Lv(new bn("Bacon","constant",[e]),function(t){return t(Ao(e)),t(Ke()),Wi})}function Ko(t){return t=Array.prototype.slice.call(t),Xe.flatMap($o,t)}function $o(t){return Ui(t)?[t]:m(t)?Ko(t):[Jo(t)]}function ta(t){return Xe.isFunction(t[0])?[Ko(Array.prototype.slice.call(t,1)),t[0]]:[Ko(Array.prototype.slice.call(t,0,t.length-1)),Xe.last(t)]}function ea(t,n){return Yo((t,e)=>new yn(t,e,void 0,n),[Xe.map(t=>new Nv(t),t),function(...t){return t}]).withDesc(new bn("Bacon","groupSimultaneous",t))}function na(...t){if((t=Ko(t)).length){for(var e=[],n=0;n<t.length;n++){var r=Ui(t[n])?t[n]:Jo(t[n]);e.push(oa(r))}return Uo([e,(...t)=>t]).withDesc(new bn("Bacon","combineAsArray",t))}return Jo([])}function ra(){var[t,e]=ta(arguments),n=new bn("Bacon","combineWith",[e,...t]);return na(t).map(function(t){return e(...t)}).withDesc(n)}let St=ra;function ia(t,e,n){return Uo([[oa(t),oa(e)],n]).withDesc(new bn(t,"combine",[e,n]))}function oa(t){return new Sv(t,!0)}function aa(t,e){return Do(jo(e),t,{desc:new bn(t,"flatMapConcat",[e]),limit:1})}function sa(r,s=Xe.id){var t=new bn("Bacon","fromBinder",[r,s]);return new yn(t,function(o){function a(){if(!t)return null!=n?(n(),t=!0):e=!0}var t=!1,e=!1,n=r(function(...t){for(var t=s(...t),e=m(t)&&Eo(Xe.last(t))?t:[t],n=_,r=0;r<e.length;r++){var i=xo(e[r]);if((n=o(i))===b||i.isEnd)return a(),n}return n});return e&&a(),a})}function la(n,t){var e=new bn("Bacon","fromPoll",[n,t]);return sa(function(t){var e=c.scheduler.setInterval(t,n);return function(){return c.scheduler.clearInterval(e)}},t).withDesc(e)}function ca(t,e){return la(t,function(){return wo(e)}).withDesc(new bn("Bacon","interval",[t,e]))}function ua(t,e,n){return t instanceof yn?(i=e,o=n,ha((r=t).toProperty(),i,o).withDesc(new bn(r,"sampledBy",[i]))):ha(t,e,n);var r,i,o}function ha(t,e,n){n="function"==typeof(n=n)?n:Xe.id;return Ho(e,t,qi(n)).withDesc(new bn(t,"sampledBy",[e]))}function da(t,n,e){return new Lv(new bn(t,"transform",[n]),e=>t.subscribeInternal(t=>n(t,e))).withDesc(e)}function fa(n,e){let r,i=t=>e(t,r);return(t,e)=>(r=e,n(t,i))}function pa(t,e,n,r){return e instanceof Lv?Ho(t,e,(t,e)=>[t,e]).transform(fa(n(t=>t[1]),Xo(t=>t[0])),r):t.transform(n((t=>{if("boolean"==typeof t)return Xe.always(t);if("function"!=typeof t)throw new Error("Not a function: "+t);return t})(e)),r)}function ga(n){return(t,e)=>t.filter(n)?e(t):_}function ma(t){return t.map(t=>!t).withDesc(new bn(t,"not",[]))}function _a(t){return La(t)?t:Jo(t)}function ba(t,e){return Do(jo(e),t,{firstOnly:!0,desc:new bn(t,"flatMapFirst",[e])})}function ya(t,e,n){return t.scan(e,n).last().withDesc(new bn(t,"fold",[e,n]))}let zt={};function va(t,e){return Do(jo(e),t,{desc:new bn(t,"flatMap",[e])})}function Aa(t,n){return Do(t=>{var e;return t instanceof Mv?(e=t.error,n(e)):t},t,{mapError:!0,desc:new bn(t,"flatMapError",[n])})}var wa=[],xa=!1;function Ea(e){if(wa.length&&!xa)try{xa=!0,wa.forEach(function(t){t(e)})}finally{xa=!1}}let Nt=t=>wa.push(t);function Ca(t,e){let n=Xe.toFunction(e);var r=La(t)?t.toEventStream(l):t;let i=va(r,t=>Lo(n(t)).takeUntil(r));return(i=La(t)?i.toProperty():i).withDesc(new bn(t,"flatMapLatest",[n]))}class Ov{constructor(t,e,n){this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this._subscribe=e,this._handleEvent=n,this.subscribe=Xe.bind(this.subscribe,this),this.handleEvent=Xe.bind(this.handleEvent,this),this.subscriptions=[],this.observable=t,this.queue=[]}hasSubscribers(){return 0<this.subscriptions.length}removeSub(t){return this.subscriptions=Xe.without(t,this.subscriptions),this.subscriptions}push(t){return t.isEnd&&(this.ended=!0),Je.inTransaction(t,this,this.pushIt,[t])}pushToSubscriptions(e){try{var n=this.subscriptions,r=n.length;for(let t=0;t<r;t++){var i=n[t];i.sink(e)!==b&&!e.isEnd||this.removeSub(i)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}}pushIt(t){if(this.pushing)return this.queue.push(t),_;if(t!==this.prevError){for(t.isError&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;;){var e=this.queue.shift();if(!e)break;this.push(e)}return this.hasSubscribers()?_:(this.unsubscribeFromSource(),b)}}handleEvent(t){return this._handleEvent?this._handleEvent(t):this.push(t)}unsubscribeFromSource(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0}subscribe(e){if(this.ended)return e(Ke()),Wi;{ro(e);let t={sink:e};return this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),ro(this.unsubSrc)),()=>{if(this.removeSub(t),!this.hasSubscribers())return this.unsubscribeFromSource()}}}inspect(){return this.observable.toString()}}class Iv extends Ov{constructor(t,e,n){super(t,e,n),this.current=i,this.propertyEnded=!1,this.subscribe=Xe.bind(this.subscribe,this)}push(t){return t.isEnd&&(this.propertyEnded=!0),t instanceof wv?(this.current=new vv(t),this.currentValueRootId=Je.currentEventId()):t.hasValue&&console.error("Unknown event, two Bacons loaded?",t.constructor),super.push(t)}maybeSubSource(t,e){return e===b?Wi:this.propertyEnded?(t(Ke()),Wi):super.subscribe(t)}subscribe(t){var e,n,r=_;return this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)&&(e=Je.currentEventId(),n=this.currentValueRootId,!this.propertyEnded&&n&&e&&e!==n?Je.whenDoneWith(this.observable,()=>{if(this.currentValueRootId===n)return t(Ao(this.current.get().value))}):Je.inTransaction(void 0,this,()=>r=t(Ao(this.current.get().value)),[])),this.maybeSubSource(t,r)}inspect(){return this.observable+" current= "+this.current}}function ka(t,e,n){return Do(jo(n),t,{desc:new bn(t,"flatMapWithConcurrencyLimit",[e,n]),limit:e})}function Ma(t,e,n){let r=(t=>{var e;if(void 0!==t)return"number"!=typeof t?t:(e=t,function(t){return c.scheduler.setTimeout(t,e)})})(e);function i(t){return t.values.length===n?t.flush():void 0!==r?t.schedule(r):void 0}var o,a,s,l,e=new bn(t,"bufferWithTimeOrCount",[e,n]);return t=t,a=o=i,s=_,l=new Dv(a,o),t.transform((t,e)=>(l.push=e,$e(t)?(l.values.push(t.value),o(l)):ko(t)?s=e(t):Mo(t)&&(l.end=t,l.scheduled||l.flush()),s)).withDesc(new bn(t,"buffer",[])).withDesc(e)}class Dv{constructor(t,e){this.push=t=>_,this.scheduled=null,this.end=void 0,this.values=[],this.onFlush=t,this.onInput=e}flush(){var t;return this.scheduled&&(c.scheduler.clearTimeout(this.scheduled),this.scheduled=null),0<this.values.length?(t=this.values,this.values=[],t=this.push(wo(t)),null!=this.end?this.push(this.end):t!==b?this.onFlush(this):void 0):null!=this.end?this.push(this.end):void 0}schedule(t){if(!this.scheduled)return this.scheduled=t(()=>this.flush())}}function Ba(...t){let i=Ko(t);return i.length?new yn(new bn("Bacon","mergeAll",i),function(n){var r=0,t=Ji(function(t){return function(e){return t.subscribeInternal(function(t){return t.isEnd?++r===i.length?n(Ke()):_:(t=t.toNext(),(t=n(t))===b&&e(),t)})}},i);return new Bv(t).unsubscribe}):Ro()}function Ta(n,r){return sa(function(t){var e=c.scheduler.setTimeout(function(){return t([xo(r),Ke()])},n);return function(){return c.scheduler.clearTimeout(e)}}).withDesc(new bn("Bacon","later",[n,r]))}function Sa(n){return(t,e)=>t.filter(n)?e(t):(e(Ke()),b)}function za(n){var r=!1;return function(t,e){return!r&&$e(t)&&n(t.value)?_:(t.hasValue&&(r=!0),e(t))}}function Na(r,i,o=Xe.id){var a={};return r.transform(fa(ga(t=>!a[i(t)]),Xo(function(t){var n=i(t),e=r.changes().filter(t=>i(t)===n),e=Io(t).concat(e),e=o(e,t).toEventStream().transform((t,e)=>{e=e(t);return t.isEnd&&delete a[n],e});return a[n]=e})))}let Ot={};function Oa(r,s){var l=!1,c=[],u=!1;return new yn(new bn(r,"holdWhen",[s]),function(o){function a(t){return t&&t(),e.empty()&&n?o(Ke()):_}var e=new Bv,n=!1;return e.add(function(t,i){return s.subscribeInternal(function(t){if($e(t)){l=t.value;var e=_;if(!l){var n=c;c=[];for(var r=0;r<n.length;r++)e=o(wo(n[r]));u&&(o(Ke()),i(),e=b)}return e}return t.isEnd?a(i):o(t)})}),e.add(function(t,e){return r.subscribeInternal(function(t){return l&&$e(t)?(c.push(t.value),_):t.isEnd&&c.length?(u=!0,a(e)):o(t)})}),n=!0,a(),e.unsubscribe})}function Ia(t,...e){var[e,t]=ta(arguments);return Wo([e=Xe.map(t=>t.toEventStream(),e),t]).withDesc(new bn("Bacon","zipWith",[t].concat(e)))}function Da(i){function l(t,e,n){t[t.length-1][e]=n}function c(t){return m(t)?[]:{}}function u(t){if(Ui(t))return 1;if(t&&(t.constructor==Object||t.constructor==Array))for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))if(u(t[e]))return 1}function e(t,e){var n,r,i,o,a,s;Ui(e)?(f.push(e),d.push((a=t,s=f.length-1,function(t,e){l(t,a,e[s])}))):u(e)?(d.push((i=t,o=e,function(t){var e=c(o);l(t,i,e),t.push(e)})),h(e),d.push(function(t){t.pop()})):d.push((n=t,r=e,function(t){l(t,n,r)}))}function h(t){Xe.each(t,e)}let d=[],f=[];return(u(i)?(h(i),na(f).map(function(t){for(var e=c(i),n=[e],r=0;r<d.length;r++)(0,d[r])(n,t);return e})):Jo(i)).withDesc(new bn("Bacon","combineTemplate",[i]))}var ja=0;class jv{constructor(t){this.id=++ja,this._isObservable=!0,this.desc=t,this.initialDesc=t}awaiting(t){return ea([e=this,t=t],l).map(t=>0===t[1].length).toProperty(!1).skipDuplicates().withDesc(new bn(e,"awaiting",[t]));var e}bufferingThrottle(t){return e=this,n=t,t=new bn(e,"bufferingThrottle",[n]),e.transformChanges(t,t=>t.flatMapConcat(t=>Io(t).concat(Ta(n,t).errors())));var e,n}combine(t,e){return ia(this,t,e).withDesc(new bn(this,"combine",[t,e]))}debounce(t){return e=t,(t=this).transformChanges(new bn(t,"debounce",[e]),function(t){return t.flatMapLatest(function(t){return Ta(e,t)})});var e}debounceImmediate(t){return e=t,(t=this).transformChanges(new bn(t,"debounceImmediate",[e]),function(t){return t.flatMapFirst(function(t){return Io(t).concat(Ta(e,t).errors())})});var e}decode(t){return t=t,(e=this).combine(Da(t),(t,e)=>e[t]).withDesc(new bn(e,"decode",[t]));var e}delay(t){return e=t,(t=this).transformChanges(new bn(t,"delay",[e]),function(t){return t.flatMap(function(t){return Ta(e,t)})});var e}deps(){return this.desc.deps()}diff(t,e){return n=e,da(zo(e=this,[t=t,Ot],(t,e)=>[e,n(t[0],e)]),fa(ga(t=>t[1]!==Ot),Xo(t=>t[1])),new bn(e,"diff",[t,n]));var n}doAction(t){return this.transform((n=t,(t,e)=>($e(t)&&n(t.value),e(t))),new bn(this,"doAction",[t]));var n}doEnd(t){return this.transform((n=t,(t,e)=>(Mo(t)&&n(),e(t))),new bn(this,"doEnd",[t]));var n}doError(t){return this.transform((n=t,(t,e)=>(ko(t)&&n(t.error),e(t))),new bn(this,"doError",[t]));var n}doLog(...t){return this.transform((n=t,(t,e)=>("undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(...n.concat([t.log()])),e(t))),new bn(this,"doLog",t));var n}endAsValue(){return this.transform((t,e)=>Mo(t)?(e(wo({})),e(Ke()),b):_)}endOnError(t=t=>!0){return[t,n=t=>!0]=[this,t],t.transform((t,e)=>ko(t)&&n(t.error)?(e(t),e(Ke())):e(t),new bn(t,"endOnError",[]));var n}errors(){return this.filter(t=>!1).withDesc(new bn(this,"errors"))}filter(t){return pa(e=this,t=t,ga,new bn(e,"filter",[t]));var e}first(){return To(1,this,new bn(this,"first"))}firstToPromise(t){var r=this,e=(e,n)=>r.subscribe(t=>($e(t)&&e(t.value),ko(t)&&n(t.error),b));if("function"==typeof t)return new t(e);if("function"==typeof Promise)return new Promise(e);throw new Error("There isn't default Promise, use shim or parameter")}fold(t,e){return ya(this,t,e)}forEach(t=n){return this.onValue(t)}holdWhen(t){return Oa(this,t)}inspect(){return this.toString()}internalDeps(){return this.initialDesc.deps()}last(){return(t=this).transform(function(t,e){return Mo(t)?(n&&e(n),e(Ke()),b):$e(t)?(n=t,_):e(t)}).withDesc(new bn(t,"last",[]));var t,n}log(...t){var e;return e=t,this.subscribe(function(t){return"undefined"!=typeof console&&"function"==typeof console.log&&console.log(...e.concat([t.log()])),_}),this}mapEnd(t){return this.transform((t=>{let n=Xe.toFunction(t);return function(t,e){return Mo(t)?(e(wo(n(t))),e(Ke()),b):e(t)}})(t),new bn(this,"mapEnd",[t]))}mapError(t){return this.transform((t=>{let n=Xe.toFunction(t);return function(t,e){return ko(t)?e(wo(n(t.error))):e(t)}})(t),new bn(this,"mapError",[t]))}name(t){return this._name=t,this}onEnd(e=Tt){return this.subscribe(function(t){return t.isEnd?e():_})}onError(e=n){return this.subscribe(function(t){return ko(t)?e(t.error):_})}onValue(e=n){return this.subscribe(function(t){return $e(t)?e(t.value):_})}onValues(e){return this.onValue(function(t){return e(...t)})}reduce(t,e){return ya(this,t,e)}sampledBy(t){return ua(this,t,arguments[1])}scan(t,e){return zo(this,t,e)}skip(t){return n=t,(t=this).transform((t,e)=>t.hasValue&&0<n?(n--,_):e(t),new bn(t,"skip",[n]));var n}skipDuplicates(t){return Bo(this,t)}skipErrors(){return(t=this).transform(function(t,e){return ko(t)?_:e(t)},new bn(t,"skipErrors",[]));var t}skipUntil(t){return e=this,n=(t=t).transform(fa(So(1),Xo(!0))).toProperty().startWith(!1),e.filter(n).withDesc(new bn(e,"skipUntil",[t]));var e,n}skipWhile(t){return pa(e=this,t=t,za,new bn(e,"skipWhile",[t]));var e}slidingWindow(t,e=0){return[t,n,r=0]=[this,t,e],t.scan([],function(t,e){return t.concat([e]).slice(-n)}).filter(function(t){return t.length>=r}).withDesc(new bn(t,"slidingWindow",[n,r]));var n,r}subscribe(t=n){return Je.wrappedSubscribe(this,t=>this.subscribeInternal(t),t)}take(t){return To(t,this)}takeUntil(e){{var n=this;let t=ea([n.mapEnd(zt),e.skipErrors()],l);return(t=n instanceof Lv?t.toProperty():t).transform(function(t,e){if($e(t)){var[n,r]=t.value;if(r.length)return e(Ke());for(var i=_,o=0;o<n.length;o++){var a=n[o];if(a===zt)return e(Ke());i=e(wo(a))}return i}return e(t)},new bn(n,"takeUntil",[e]))}}takeWhile(t){return pa(e=this,t=t,Sa,new bn(e,"takeWhile",[t]));var e}throttle(t){return e=t,(t=this).transformChanges(new bn(t,"throttle",[e]),t=>t.bufferWithTime(e).map(t=>t[t.length-1]));var e}toPromise(t){return t=t,this.last().firstToPromise(t)}toString(){return this._name||this.desc.toString()}withDesc(t){return t&&(this.desc=t),this}withDescription(t,e,...n){return this.desc=_o(t,e,...n),this}zip(t,e){return n=this,t=t,Ia(e||Array,n,t).withDesc(new bn(n,"zip",[t]));var n}}class Lv extends jv{constructor(t,e,n){super(t),this._isProperty=!0,ro(e),this.dispatcher=new Iv(this,e,n),Ea(this)}and(t){return t=t,(e=this).combine(_a(t),(t,e)=>!(!t||!e)).withDesc(new bn(e,"and",[t]));var e}changes(){return new yn(new bn(this,"changes",[]),e=>this.dispatcher.subscribe(function(t){return t.isInitial?_:e(t)}))}concat(e){return this.transformChanges(_o(this,"concat",e),t=>t.concat(e))}transformChanges(e,o){{var a=this;let n,r,t=o(new yn(_o(a,"changes",[]),e=>a.dispatcher.subscribe(function(t){return!n&&Co(t)&&(n=t,Je.whenDoneWith(i,function(){if(!r)throw new Error("Init sequence fail");r(n)})),t.isInitial?_:e(t)}),void 0,l)),i=Oo(e,e=>(r=e,t.dispatcher.subscribe(function(t){e(t)})));return i}}flatMap(t){return va(this,t)}flatMapConcat(t){return aa(this,t)}flatMapError(t){return Aa(this,t)}flatMapEvent(t){return Po(this,t)}flatMapFirst(t){return ba(this,t)}flatMapLatest(t){return Ca(this,t)}flatMapWithConcurrencyLimit(t,e){return ka(this,t,e)}groupBy(t,e){return Na(this,t,e)}map(t){return Zo(this,t)}not(){return ma(this)}or(t){return t=t,(e=this).combine(_a(t),(t,e)=>t||e).withDesc(new bn(e,"or",[t]));var e}sample(t){return ha(e=this,ca(t=t,{}),(t,e)=>t).withDesc(new bn(e,"sample",[t]));var e}startWith(t){return t=t,(e=this).scan(t,(t,e)=>e).withDesc(new bn(e,"startWith",[t]));var e}subscribeInternal(t=n){return this.dispatcher.subscribe(t)}toEventStream(t){return new yn(new bn(this,"toEventStream",[]),e=>this.subscribeInternal(function(t){return e(t.toNext())}),void 0,t)}toProperty(){return no("no arguments supported",0===arguments.length),this}transform(t,e){return da(this,t,e)}withLatestFrom(t,e){return qo(this,t,e)}withStateMachine(t,e){return yo(t,e,this)}}function La(t){return!!t._isProperty}let l={forceAsync:!1};class yn extends jv{constructor(t,e,n,r){var o,a,s;super(t),this._isEventStream=!0,r!==l&&(o=this,a=e,s=!1,e=function(r){let e=Je.isInTransaction();var i;function n(){var t=i||[];i=void 0;for(var e=0;e<t.length;e++){var n=t[e];r(n)}}s=!0;try{return a(function(t){return s||i?(i?i.push(t):(i=[t],e?Je.soonButNotYet(o,n):c.scheduler.setTimeout(n,0)),_):r(t)})}finally{s=!1}}),this.dispatcher=new Ov(this,e,n),Ea(this)}bufferWithTime(t){return Ma(e=this,t=t,Number.MAX_VALUE).withDesc(new bn(e,"bufferWithTime",[t]));var e}bufferWithCount(t){return Ma(e=this,void 0,t=t).withDesc(new bn(e,"bufferWithCount",[t]));var e}bufferWithTimeOrCount(t,e){return Ma(this,t,e)}changes(){return this}concat(t,e){return r=this,i=t,t=e,new yn(new bn(r,"concat",[i]),function(e){var n=Wi,t=r.dispatcher.subscribe(function(t){return t.isEnd?(n=i.toEventStream().dispatcher.subscribe(e),_):e(t)});return function(){return t(),n()}},void 0,t);var r,i}transformChanges(t,e){return e(this).withDesc(t)}flatMap(t){return va(this,t)}flatMapConcat(t){return aa(this,t)}flatMapError(t){return Aa(this,t)}flatMapFirst(t){return ba(this,t)}flatMapLatest(t){return Ca(this,t)}flatMapWithConcurrencyLimit(t,e){return ka(this,t,e)}flatMapEvent(t){return Po(this,t)}flatScan(t,n){{var r=this,i=n;let e=t;return r.flatMapConcat(t=>Lo(i(e,t)).doAction(t=>e=t)).toProperty().startWith(t).withDesc(new bn(r,"flatScan",[t,i]))}}groupBy(t,e){return Na(this,t,e)}map(t){return Zo(this,t)}merge(t){var e=t;if(null!=e&&e._isEventStream)return Ba(this,t).withDesc(new bn(this,"merge",[t]));throw new Error("not an EventStream : "+e)}not(){return ma(this)}startWith(t){return e=this,Io(t=t).concat(e).withDesc(new bn(e,"startWith",[t]));var e}subscribeInternal(t=n){return this.dispatcher.subscribe(t)}toEventStream(){return this}toProperty(t){var t=arguments.length?(t=t)&&(t._isSome||t._isNone)?t:new vv(t):i,e=this.dispatcher,n=new bn(this,"toProperty",Array.prototype.slice.apply(arguments)),e=e.subscribe;return new Lv(n,No(t,e))}transform(t,e){return n=this,r=t,t=e,new yn(new bn(n,"transform",[r]),e=>n.subscribeInternal(t=>r(t,e)),void 0,l).withDesc(t);var n,r}withLatestFrom(t,e){return Qo(this,t,e)}withStateMachine(t,e){return yo(t,e,this)}}function Pa(t,e){return new yn(t,e)}function Fa(t,e){return new yn(t,e,void 0,l)}function Ra(t){return"undefined"!=typeof Symbol&&Symbol[t]?Symbol[t]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[t]=Symbol.for(t):"@@"+t}class Pv{constructor(t){this.observable=t}subscribe(t,e,n){let r="function"==typeof t?{next:t,error:e,complete:n}:t,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe(function(t){$e(t)&&r.next?r.next(t.value):ko(t)?(r.error&&r.error(t.error),i.unsubscribe()):t.isEnd&&(i.closed=!0,r.complete)&&r.complete()});return i}}Pv.prototype[Ra("observable")]=function(){return this},jv.prototype.toESObservable=function(){return new Pv(this)},jv.prototype[Ra("observable")]=jv.prototype.toESObservable;var Wa,Ua=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],Ya=function(t){for(var e=0;e<Ua.length;e++){var n,r=[t[(n=Ua[e])[0]],t[n[1]]];if(r[0]&&r[1])return r}for(var i=0;i<Ua.length;i++){var o=t[(n=Ua[i])[0]];if(o)return[o,function(){}]}throw new Error("No suitable event methods in "+t)};function Ga(e,n,t){var[r,i]=Ya(e),o=new bn("Bacon","fromEvent",[e,n]);return sa(function(t){return Xe.isFunction(n)?(n(r.bind(e),t),function(){return n(i.bind(e),t)}):(r.call(e,n,t),function(){return i.call(e,n,t)})},t).withDesc(o)}function Va(s){var l=0;return sa(function(e){var n=!1,r=_,i=function(){};function o(t){return t.isEnd?(n?a():n=!0,_):r=e(t)}function a(){var t;for(n=!0;n&&r!==b;)t=s(l++),n=!1,t?i=t.subscribeInternal(o):e(Ke());n=!0}return a(),()=>i()}).withDesc(new bn("Bacon","repeat",[s]))}function Qa(t){return Ta(t,"").filter(!1).withDesc(new bn("Bacon","silence",[t]))}Wa=function(t,...e){return Xe.isFunction(t)?e.length?(n=t,r=e,function(...t){return n(...r.concat(t))}):t:Xe.always(t);var n,r};let It=function(t,...e){var n,r;return"object"==typeof t&&e.length&&(n=t,r=e[0],t=function(...t){return n[r](...t)},e=e.slice(1)),Wa(t,...e)};function qa(t,e){return It(t,...e)}class Fv extends yn{constructor(){super(new bn("Bacon","Bus",[]),t=>this.subscribeAll(t)),this.pushing=!1,this.pushQueue=void 0,this.ended=!1,this.subscriptions=[],this.unsubAll=Xe.bind(this.unsubAll,this),this.push=Xe.bind(this.push,this),this.subscriptions=[],this.ended=!1}plug(t){var e=t;if(null==e||!e._isObservable)throw new Error("not an Observable : "+e);if(!this.ended)return this.subscriptions.push(e={input:t,unsub:void 0}),void 0!==this.sink&&this.subscribeInput(e),()=>this.unsubscribeInput(t)}end(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(Ke())}push(t){if(!this.ended&&"function"==typeof this.sink){var e=!this.pushing;if(e){this.pushing=!0;try{return this.sink(wo(t))}finally{if(e&&this.pushQueue){for(var n=0;n<this.pushQueue.length;){var r=this.pushQueue[n];this.sink(wo(r)),n++}this.pushQueue=void 0}this.pushing=!1}}else this.pushQueue||(this.pushQueue=[]),this.pushQueue.push(t)}}error(t){if("function"==typeof this.sink)return this.sink(new Mv(t))}unsubAll(){for(var t,e=this.subscriptions,n=0;n<e.length;n++)"function"==typeof(t=e[n]).unsub&&t.unsub()}subscribeAll(t){if(this.ended)t(Ke());else{this.sink=t;for(var e,n=this.subscriptions.slice(),r=0;r<n.length;r++)e=n[r],this.subscribeInput(e)}return this.unsubAll}guardedSink(e){return t=>t.isEnd?(this.unsubscribeInput(e),b):this.sink?this.sink(t):_}subscribeInput(t){return t.unsub=t.input.subscribeInternal(this.guardedSink(t.input)),t.unsub}unsubscribeInput(t){for(var e,n=this.subscriptions,r=0;r<n.length;r++)if((e=n[r]).input===t)return"function"==typeof e.unsub&&e.unsub(),void this.subscriptions.splice(r,1)}}let Dt={asEventStream(e,n,t){return Xe.isFunction(n)&&(t=n,n=void 0),sa(t=>(this.on(e,n,t),()=>this.off(e,n,t)),t).withDesc(new bn(this.selector||this,"asEventStream",[e]))},init(t){t.fn.asEventStream=Dt.asEventStream}},jt="3.0.18",Lt=Le(411);var Ha=Le.n(Lt),Fe=Le(587),Za=Le.n(Fe);function Xa(){}function Ja(t){return null==t?Xa:function(){return this.querySelector(t)}}function Ka(){return[]}function $a(t){return null==t?Ka:function(){return this.querySelectorAll(t)}}function ts(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function es(t){return function(){return this.matches(t)}}function ns(e){return function(t){return t.matches(e)}}var rs=Array.prototype.find;function is(){return this.firstElementChild}var os=Array.prototype.filter;function as(){return Array.from(this.children)}function ss(t){return new Array(t.length)}function ls(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function cs(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new ls(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function us(t,e,n,r,i,o,a){for(var s,l,c=new Map,u=e.length,h=o.length,d=new Array(u),f=0;f<u;++f)(s=e[f])&&(d[f]=l=a.call(s,s.__data__,f,e)+"",c.has(l)?i[f]=s:c.set(l,s));for(f=0;f<h;++f)l=a.call(t,o[f],f,o)+"",(s=c.get(l))?((r[f]=s).__data__=o[f],c.delete(l)):n[f]=new ls(t,o[f]);for(f=0;f<u;++f)(s=e[f])&&c.get(d[f])===s&&(i[f]=s)}function hs(t){return t.__data__}function ds(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}ls.prototype={constructor:ls,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var fs="http://www.w3.org/1999/xhtml";let Pt={svg:"http://www.w3.org/2000/svg",xhtml:fs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ps(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Pt.hasOwnProperty(e)?{space:Pt[e],local:t}:t}function gs(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ms(t,e){return t.style.getPropertyValue(e)||gs(t).getComputedStyle(t,null).getPropertyValue(e)}function _s(t){return t.trim().split(/^|\s+/)}function bs(t){return t.classList||new ys(t)}function ys(t){this._node=t,this._names=_s(t.getAttribute("class")||"")}function vs(t,e){for(var n=bs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function As(t,e){for(var n=bs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ws(){this.textContent=""}function xs(){this.innerHTML=""}function Es(){this.nextSibling&&this.parentNode.appendChild(this)}function Cs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ks(t){t=ps(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===fs&&t.documentElement.namespaceURI===fs?t.createElement(n):t.createElementNS(e,n)}})(t)}function Ms(){return null}function Bs(){var t=this.parentNode;t&&t.removeChild(this)}function Ts(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ss(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zs(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function Ns(a,s,l){return function(){function t(t){n.call(this,t,this.__data__)}var e,n,r=this.__on;n=s;if(r)for(var i=0,o=r.length;i<o;++i)if((e=r[i]).type===a.type&&e.name===a.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=t,e.options=l),void(e.value=s);this.addEventListener(a.type,t,l),e={type:a.type,name:a.name,value:s,listener:t,options:l},r?r.push(e):this.__on=[e]}}function Os(t,e,n){var r=gs(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}ys.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var Is=[null];function Ds(t,e){this._groups=t,this._parents=e}function js(){return new Ds([[document.documentElement]],Is)}Ds.prototype=js.prototype={constructor:Ds,select:function(t){"function"!=typeof t&&(t=Ja(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Ds(r,this._parents)},selectAll:function(t){t=("function"==typeof t?ts:$a)(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Ds(r,i)},selectChild:function(t){return this.select(null==t?is:(e="function"==typeof t?t:ns(t),function(){return rs.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?as:(e="function"==typeof t?t:ns(t),function(){return os.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=es(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Ds(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,hs);var n,r=e?us:cs,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,p="object"==typeof(p=t.call(h,h&&h.__data__,u,i))&&"length"in p?p:Array.from(p),g=p.length,m=l[u]=new Array(g),_=s[u]=new Array(g);r(h,d,m,_,c[u]=new Array(f),p,e);for(var b,y,v=0,A=0;v<g;++v)if(b=m[v]){for(A<=v&&(A=v+1);!(y=_[A])&&++A<g;);b._next=y||null}}return(s=new Ds(s,i))._enter=l,s._exit=c,s},enter:function(){return new Ds(this._enter||this._groups.map(ss),this._parents)},exit:function(){return new Ds(this._exit||this._groups.map(ss),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),o=new Array(r),a=0;a<i;++a)for(var s,l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=l[d]||c[d])&&(h[d]=s);for(;a<r;++a)o[a]=e[a];return new Ds(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||ds;for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new Ds(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(var e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n,t=ps(t);return arguments.length<2?(n=this.node(),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)):this.each((null==e?t.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?t.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:t.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(t,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):ms(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=_s(t+"");if(arguments.length<2){for(var r=bs(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?vs:As)(this,t)}}:e?function(t){return function(){vs(this,t)}}:function(t){return function(){As(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?ws:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?xs:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Es)},lower:function(){return this.each(Cs)},append:function(t){var e="function"==typeof t?t:ks(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:ks(t),r=null==e?Ms:"function"==typeof e?e:Ja(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Bs)},clone:function(t){return this.select(t?Ss:Ts)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(!(arguments.length<2)){for(s=e?Ns:zs,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Os(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Os(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};let y=js;function tn(t){return"string"==typeof t?new Ds([[document.querySelector(t)]],[document.documentElement]):new Ds([[t]],Is)}var Ls,Ps,Fs,Rs=Le(280),Ws={},Us={};function Ys(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Gs(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}function Vs(t,e){var t=t+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function Qs(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Vs(-e,6):9999<e?"+"+Vs(e,6):Vs(e,4))+"-"+Vs(t.getUTCMonth()+1,2)+"-"+Vs(t.getUTCDate(),2)+(o?"T"+Vs(n,2)+":"+Vs(r,2)+":"+Vs(i,2)+"."+Vs(o,3)+"Z":i?"T"+Vs(n,2)+":"+Vs(r,2)+":"+Vs(i,2)+"Z":r||n?"T"+Vs(n,2)+":"+Vs(r,2)+"Z":"")}function qs(r,t){var e,n=[],i=r.length,o=0,a=0,s=i<=0,l=!1;function c(){if(s)return Us;if(l)return l=!1,Ws;var t,e,n=o;if(34===r.charCodeAt(n)){for(;o++<i&&34!==r.charCodeAt(o)||34===r.charCodeAt(++o););return(t=o)>=i?s=!0:10===(e=r.charCodeAt(o++))?l=!0:13===e&&(l=!0,10===r.charCodeAt(o))&&++o,r.slice(n+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(e=r.charCodeAt(t=o++)))l=!0;else if(13===e)l=!0,10===r.charCodeAt(o)&&++o;else if(e!==Fs)continue;return r.slice(n,t)}return s=!0,r.slice(n,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(e=c())!==Us;){for(var u=[];e!==Ws&&e!==Us;)u.push(e),e=c();t&&null==(u=t(u,a++))||n.push(u)}return n}function Hs(t,n){return t.map(function(e){return n.map(function(t){return Xs(e[t])}).join(Ls)})}function Zs(t){return t.map(Xs).join(Ls)}function Xs(t){return null==t?"":t instanceof Date?Qs(t):Ps.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}Ls=",",Ps=new RegExp('["'+Ls+"\n\r]"),Fs=Ls.charCodeAt(0);var Js=(On={parse:function(t,o){var a,s;return(t=qs(t,function(t,e){if(a)return a(t,e-1);var n,r,i;s=t,a=o?(r=o,i=Ys(n=t),function(t,e){return r(i(t),e,n)}):Ys(t)})).columns=s||[],t},parseRows:qs,format:function(t,e){return[(e=null==e?Gs(t):e).map(Xs).join(Ls)].concat(Hs(t,e)).join("\n")},formatBody:function(t,e){return Hs(t,e=null==e?Gs(t):e).join("\n")},formatRows:function(t){return t.map(Zs).join("\n")},formatRow:Zs,formatValue:Xs}).parseRows,Ye=Le(529),Ks=Le.n(Ye);function $s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tl(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}
/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/function el(t){return!1!==t}function nl(){return"undefined"!=typeof window}function rl(t){return sn(t)||an(t)}function il(t){return(Qc=hl(t,Vc))&&$h}function ol(t,e){return t&&(Vc[t]=e)&&Qc&&(Qc[t]=e)||Vc}function al(){return 0}function sl(t,e){return(t=t.split(",")).forEach(e)||t}function ll(t,e,n,r){$c.length&&!en&&uu(),t.render(e,n,r||en&&e<0&&(t._initted||t._startAt)),$c.length&&!en&&uu()}function cl(t){return t}function ul(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}function hl(t,e){for(var n in e)t[n]=e[n];return t}function dl(t,e){for(var n in e)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=jc(e[n])?dl(t[n]||(t[n]={}),e[n]):e[n]);return t}function fl(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r}function pl(t){var r,e=t.parent||rn,n=t.keyframes?(r=ln(t.keyframes),function(t,e){for(var n in e)n in t||"duration"===n&&r||"ease"===n||(t[n]=e[n])}):ul;if(el(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t}function gl(t,e,n,r,i){void 0===n&&(n="_first");var o,a=t[r=void 0===r?"_last":r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t}function ml(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null}function _l(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0}function bl(t,e,n,r){t._startAt&&(en?t._startAt.revert(Xc):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))}function yl(t){return!t||t._ts&&yl(t.parent)}function vl(t){return t._repeat?Al(t._tTime,t=t.duration()+t._rDelay)*t:0}function Al(t,e){return e=Math.floor(t/=e),t&&e===t?e-1:e}function wl(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function xl(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=wl(t.rawTime(),e),!e._dur||Ol(0,e.totalDuration(),n)-e._tTime>on)&&e.render(n,!0),du(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)0<=n.rawTime()&&n.totalTime(n._tTime),n=n._dp;t._zTime=-on}}function El(t,e,n,r){return e.parent&&_l(e),e._start=un((Ic(n)?n:n||t!==rn?zl(t,n,e):t._time)+e._delay),e._end=un(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),gl(t,e,"_first","_last",t._sort?"_start":0),Bl(e)||(t._recent=e),r||xl(t,e),t._ts<0&&pu(t,t._tTime),t}function Cl(t,e){(Vc.ScrollTrigger||qc("scrollTrigger",e))&&Vc.ScrollTrigger.create(e,t)}function kl(t,e,n,r,i){return Bh(t,e,i),t._initted?!n&&t._pt&&!en&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&sc!==Tu.frame?($c.push(t),t._lazy=[i,r]):void 0:1}function Ml(t){return(t=t.parent)&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||Ml(t))}function Bl(t){return"isFromStart"===(t=t.data)||"isStart"===t}function Tl(t,e,n,r){var i=t._repeat,e=un(e)||0,o=t._tTime/t._tDur;return o&&!r&&(t._time*=e/t._dur),t._dur=e,t._tDur=i?i<0?1e10:un(e*(i+1)+t._rDelay*i):e,0<o&&!r&&pu(t,t._tTime=t._tDur*o),t.parent&&fu(t),n||du(t.parent,t),t}function Sl(t){return t instanceof pn?du(t):Tl(t,t._dur)}function zl(t,e,n){var r,i,o,a=t.labels,s=t._recent||gu,l=t.duration()>=Mc?s.endTime(!1):t._dur;return an(e)&&(isNaN(e)||e in a)?(i=e.charAt(0),o="%"===e.substr(-1),r=e.indexOf("="),"<"===i||">"===i?(0<=r&&(e=e.replace(/=/,"")),("<"===i?s._start:s.endTime(0<=s._repeat))+(parseFloat(e.substr(1))||0)*(o?(r<0?s:n).totalDuration()/100:1)):r<0?(e in a||(a[e]=l),a[e]):(i=parseFloat(e.charAt(r-1)+e.substr(r+1)),o&&n&&(i=i/100*(ln(n)?n[0]:n).totalDuration()),1<r?zl(t,e.substr(0,r-1),n)+i:l+i)):null==e?l:+e}function Nl(t,e,n){var r,i,o=Ic(e[1]),a=(o?2:1)+(t<2?0:1),s=e[a];if(o&&(s.duration=e[1]),s.parent=n,t){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=el(i.vars.inherit)&&i.parent;s.immediateRender=el(r.immediateRender),t<2?s.runBackwards=1:s.startAt=e[a-1]}return new gn(e[0],s,e[1+a])}function Ol(t,e,n){return n<t?t:e<n?e:n}function Il(t,e,n){return void 0===n&&(n=[]),t.forEach(function(t){return an(t)&&!e||bu(t,1)?n.push.apply(n,yu(t)):n.push(t)})||n}function Dl(n){return n=yu(n)[0]||Hc("Invalid scope")||{},function(t){var e=n.current||n.nativeElement||n;return yu(t,e.querySelectorAll?e:e===n?Hc("Invalid scope")||oc.createElement("div"):n)}}function jl(t){var f,p,g,m,_,b,y,v,A;return sn(t)?t:(f=jc(t)?t:{each:t},p=Lu(f.ease),g=f.from||0,m=parseFloat(f.base)||0,_={},t=0<g&&g<1,b=isNaN(g)||t,y=f.axis,an(A=v=g)?v=A={center:.5,edges:.5,end:1}[g]||0:!t&&b&&(v=g[0],A=g[1]),function(t,e,n){var r,i,o,a,s,l,c,u,h=(n||f).length,d=_[h];if(!d){if(!(u="auto"===f.grid?0:(f.grid||[1,Mc])[1])){for(l=-Mc;l<(l=n[u++].getBoundingClientRect().left)&&u<h;);u<h&&u--}for(d=_[h]=[],r=b?Math.min(u,h)*v-.5:g%u,i=u===Mc?0:b?h*A/u-.5:g/u|0,c=Mc,s=l=0;s<h;s++)a=s%u-r,o=i-(s/u|0),d[s]=a=y?Math.abs("y"===y?o:a):zc(a*a+o*o),l<a&&(l=a),a<c&&(c=a);"random"===g&&vu(d),d.max=l-c,d.min=c,d.v=h=(parseFloat(f.amount)||parseFloat(f.each)*(h<u?h-1:y?"y"===y?h/u:u:Math.max(u,h/u))||0)*("edges"===g?-1:1),d.b=h<0?m-h:m,d.u=hn(f.amount||f.each)||0,p=p&&h<0?ju(p):p}return h=(d[t]-d.min)/d.max||0,un(d.b+(p?p(h):h)*d.v)+d.u})}function Ll(n){var r=Math.pow(10,((n+"").split(".")[1]||"").length);return function(t){var e=un(Math.round(parseFloat(t)/n)*n*r);return(e-e%1)/r+(Ic(t)?0:hn(t))}}function Pl(l,t){var c,u,e=ln(l);return!e&&jc(l)&&(c=e=l.radius||Mc,l.values?(l=yu(l.values),(u=!Ic(l[0]))&&(c*=c)):l=Ll(l.increment)),mu(t,e?sn(l)?function(t){return u=l(t),Math.abs(u-t)<=c?u:t}:function(t){for(var e,n,r=parseFloat(u?t.x:t),i=parseFloat(u?t.y:0),o=Mc,a=0,s=l.length;s--;)(e=u?(e=l[s].x-r)*e+(n=l[s].y-i)*n:Math.abs(l[s]-r))<o&&(o=e,a=s);return a=!c||o<=c?l[a]:t,u||a===t||Ic(t)?a:a+hn(t)}:Ll(l))}function Fl(e,n,t){return mu(t,function(t){return e[~~n(t)]})}function Rl(e,t,n){var r=t-e;return ln(e)?Fl(e,Rl(0,e.length),t):mu(n,function(t){return(r+(t-e)%r)%r+e})}function Wl(e,t,n){var r=t-e,i=2*r;return ln(e)?Fl(e,Wl(0,e.length-1),t):mu(n,function(t){return e+(r<(t=(i+(t-e)%i)%i||0)?i-t:t)})}function Ul(e,t,n,r,i){var o=t-e,a=r-n;return mu(i,function(t){return n+((t-e)/o*a||0)})}function Yl(e,n,t,r){var i=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!i){var o,a,s,l,c,u=an(e),h={};if(!0===t&&(r=1,t=null),u)e={p:e},n={p:n};else if(ln(e)&&!ln(n)){for(s=[],l=e.length,c=l-2,a=1;a<l;a++)s.push(Yl(e[a-1],e[a]));l--,i=function(t){t*=l;var e=Math.min(c,~~t);return s[e](t-e)},t=n}else r||(e=hl(ln(e)?[]:{},e));if(!s){for(o in n)kh.call(h,e,o,"get",n[o]);i=function(t){return Fh(t,h)||(u?e.p:e)}}}return mu(t,i)}function Gl(t,e,n){var r,i,o,a=t.labels,s=Mc;for(r in a)(i=a[r]-e)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o}function Vl(t,e,n){var r=t.vars,i=r[e],o=nn,a=t._ctx;if(i)return e=r[e+"Params"],r=r.callbackScope||t,n&&$c.length&&uu(),a&&(nn=a),t=e?i.apply(r,e):i.call(r),nn=o,t}function Ql(t){return _l(t),t.scrollTrigger&&t.scrollTrigger.kill(!!en),t.progress()<1&&Vl(t,"onInterrupt"),t}function ql(t){if(t)if(t=!t.name&&t.default||t,nl()||t.headless){var e=t.name,n=sn(t),n=e&&!n&&t.init?function(){this._props=[]}:t,r={init:al,render:Fh,add:kh,kill:Wh,modifier:Rh,rawVars:0},i={targetTest:0,get:0,getSetter:Dh,aliases:{},register:0};if(Su(),t!==n){if(eu[e])return;ul(n,ul(fl(t,r),i)),hl(n.prototype,hl(r,fl(t,i))),eu[n.prop=e]=n,t.targetTest&&(iu.push(n),Kc[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ol(e,n),t.register&&t.register($h,n,Yh)}else xu.push(t)}function Hl(t,e,n){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*dn+.5|0}function Zl(t,e,n){var r,i,o,a,s="",l=(t+s).match(Mu),c=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map(function(t){return(t=Cu(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(o=ku(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(Mu,"1").split(Rc)).length-1;u<a;u++)s+=i[u]+(~r.indexOf(u)?l.shift()||c+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(a=(i=t.split(Mu)).length-1;u<a;u++)s+=i[u]+l[u];return s+i[a]}function Xl(t){var e=t.join(" ");if(Mu.lastIndex=0,Mu.test(e))return e=Bu.test(e),t[1]=Zl(t[1],e),t[0]=Zl(t[0],e,ku(t[1])),!0}function Jl(t,e){for(var n,r=t._first;r;)r instanceof pn?Jl(r,e):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===e||(r.timeline?Jl(r.timeline,e):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=e)),r=r._next}function Kl(t,e,n,r){var i,o={easeIn:e,easeOut:n=void 0===n?function(t){return 1-e(1-t)}:n,easeInOut:r=void 0===r?function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2}:r};sl(t,function(t){for(var e in fn[t]=Vc[t]=o,fn[i=t.toLowerCase()]=n,o)fn[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=fn[t+"."+e]=o[e]})}function $l(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function tc(n,t,e){function r(t){return 1===t?1:i*Math.pow(2,-10*t)*Oc((t-o)*a)+1}var i=1<=t?t:1,o=(a=(e||(n?.3:.45))/(t<1?t:1))/Bc*(Math.asin(1/i)||0),e="out"===n?r:"in"===n?function(t){return 1-r(1-t)}:$l(r),a=Bc/a;return e.config=function(t,e){return tc(n,t,e)},e}function ec(e,n){function r(t){return t?--t*t*((n+1)*t+n)+1:0}void 0===n&&(n=1.70158);var t="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:$l(r);return t.config=function(t){return ec(e,t)},t}var nc,en,nn,rn,rc,ic,oc,ac,sc,lc,cc,uc,hc,dc,fc,pc,gc,mc,_c,bc,yc,vc,Ac,wc,xc,Ec,Cc={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},kc={duration:.5,overwrite:!1,delay:0},Mc=1e8,on=1/Mc,Bc=2*Math.PI,Tc=Bc/4,Sc=0,zc=Math.sqrt,Nc=Math.cos,Oc=Math.sin,an=function(t){return"string"==typeof t},sn=function(t){return"function"==typeof t},Ic=function(t){return"number"==typeof t},Dc=function(t){return void 0===t},jc=function(t){return"object"==typeof t},Lc="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ln=Array.isArray,Pc=/(?:-?\.?\d|\.)+/gi,Fc=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Rc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Wc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Uc=/[+-]=-?[.\d]+/,Yc=/[^,'"\[\]\s]+/gi,Gc=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vc={},Qc={},qc=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Hc=function(t,e){return!e&&console.warn(t)},Zc={suppressEvents:!0,isStart:!0,kill:!1},Xc={suppressEvents:!0,kill:!1},Jc={suppressEvents:!0},Kc={},$c=[],tu={},eu={},nu={},ru=30,iu=[],ou="",au=function(t){var e,n,r=t[0];if(jc(r)||sn(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=iu.length;n--&&!iu[n].targetTest(r););e=iu[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Eh(t[n],e)))||t.splice(n,1);return t},su=function(t){return t._gsap||au(yu(t))[0]._gsap},lu=function(t,e,n){return(n=t[e])&&sn(n)?t[e]():Dc(n)&&t.getAttribute&&t.getAttribute(e)||n},cn=function(t){return Math.round(1e5*t)/1e5||0},un=function(t){return Math.round(1e7*t)/1e7||0},cu=function(t,e){var n=e.charAt(0),e=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+e:"-"===n?t-e:"*"===n?t*e:t/e},uu=function(){var t,e,n=$c.length,r=$c.slice(0);for(tu={},t=$c.length=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},hu=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Yc).length<2?e:an(t)?t.trim():t},du=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},fu=function(t){return t._end=un(t._start+(t._tDur/Math.abs(t._ts||t._rts||on)||0))},pu=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=un(n._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),fu(t),n._dirty||du(n,t)),t},gu={_start:0,endTime:al,totalDuration:al},mu=function(t,e){return t||0===t?e(t):e},hn=function(t,e){return an(t)&&(e=Gc.exec(t))?e[1]:""},_u=[].slice,bu=function(t,e){return t&&jc(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&jc(t[0]))&&!t.nodeType&&t!==rc},yu=function(t,e,n){return nn&&!e&&nn.selector?nn.selector(t):!an(t)||n||!ic&&Su()?ln(t)?Il(t,n):bu(t)?_u.call(t,0):t?[t]:[]:_u.call((e||oc).querySelectorAll(t),0)},vu=function(t){return t.sort(function(){return.5-Math.random()})},Au=function(t,e,n,r){return mu(ln(t)?!e:!0===n?!!(n=0):!r,function(){return ln(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r})},wu=function(t){for(var e,n,r,i,o=0,a="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?Yc:Pc),a+=t.substr(o,e-o)+Au(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+t.substr(o,t.length-o)},xu=[],dn=255,Eu={aqua:[0,dn,dn],lime:[0,dn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,dn],navy:[0,0,128],white:[dn,dn,dn],olive:[128,128,0],yellow:[dn,dn,0],orange:[dn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[dn,0,0],pink:[dn,192,203],cyan:[0,dn,dn],transparent:[dn,dn,dn,0]},Cu=function(t,e,n){var r,i,o,a,s,l,c,u=t?Ic(t)?[t>>16,t>>8&dn,t&dn]:0:Eu.black;if(!u){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Eu[t])u=Eu[t];else if("#"===t.charAt(0)){if(9===(t=t.length<6?"#"+(r=t.charAt(1))+r+(i=t.charAt(2))+i+(o=t.charAt(3))+o+(5===t.length?t.charAt(4)+t.charAt(4):""):t).length)return[(u=parseInt(t.substr(1,6),16))>>16,u>>8&dn,u&dn,parseInt(t.substr(7),16)/255];u=[(t=parseInt(t.substr(1),16))>>16,t>>8&dn,t&dn]}else if("hsl"===t.substr(0,3))if(u=c=t.match(Pc),e){if(~t.indexOf("="))return u=t.match(Fc),n&&u.length<4&&(u[3]=1),u}else a=+u[0]%360/360,s=+u[1]/100,r=2*(l=+u[2]/100)-(i=l<=.5?l*(s+1):l+s-l*s),3<u.length&&(u[3]*=1),u[0]=Hl(a+1/3,r,i),u[1]=Hl(a,r,i),u[2]=Hl(a-1/3,r,i);else u=t.match(Pc)||Eu.transparent;u=u.map(Number)}return e&&!c&&(r=u[0]/dn,i=u[1]/dn,o=u[2]/dn,l=((t=Math.max(r,i,o))+(e=Math.min(r,i,o)))/2,t===e?a=s=0:(c=t-e,s=.5<l?c/(2-t-e):c/(t+e),a=t===r?(i-o)/c+(i<o?6:0):t===i?(o-r)/c+2:(r-i)/c+4,a*=60),u[0]=~~(a+.5),u[1]=~~(100*s+.5),u[2]=~~(100*l+.5)),n&&u.length<4&&(u[3]=1),u},ku=function(t){var e=[],n=[],r=-1;return t.split(Mu).forEach(function(t){t=t.match(Rc)||[];e.push.apply(e,t),n.push(r+=t.length+1)}),e.c=n,e},Mu=(()=>{var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Eu)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),Bu=/hsl[a]?\(/,Tu=(gc=Date.now,mc=500,_c=33,bc=gc(),yc=bc,Ac=vc=1e3/240,xc={time:0,frame:0,tick:function(){Pu(!0)},deltaRatio:function(t){return fc/(1e3/(t||60))},wake:function(){ac&&(!ic&&nl()&&(rc=ic=window,oc=rc.document||{},Vc.gsap=$h,(rc.gsapVersions||(rc.gsapVersions=[])).push($h.version),il(Qc||rc.GreenSockGlobals||!rc.gsap&&rc||{}),xu.forEach(ql)),dc="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,uc&&xc.sleep(),hc=dc||function(t){return setTimeout(t,Ac-1e3*xc.time+1|0)},cc=1,Pu(2))},sleep:function(){(dc?cancelAnimationFrame:clearTimeout)(uc),cc=0,hc=al},lagSmoothing:function(t,e){mc=t||1/0,_c=Math.min(e||33,mc)},fps:function(t){vc=1e3/(t||240),Ac=1e3*xc.time+vc},add:function(i,t,e){var o=t?function(t,e,n,r){i(t,e,n,r),xc.remove(o)}:i;return xc.remove(i),wc[e?"unshift":"push"](o),Su(),o},remove:function(t,e){~(e=wc.indexOf(t))&&wc.splice(e,1)&&e<=pc&&pc--},_listeners:wc=[]}),Su=function(){return!cc&&Tu.wake()},fn={},zu=/^[\d.\-M][\d.\-,\s]/,Nu=/["']/g,Ou=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,l=o.length;s<l;s++)n=o[s],e=s!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(Nu,"").trim():+r,a=n.substr(e+1).trim();return i},Iu=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},Du=function(t){var e=(t+"").split("("),n=fn[e[0]];return n&&1<e.length&&n.config?n.config.apply(null,~t.indexOf("{")?[Ou(e[1])]:Iu(t).split(",").map(hu)):fn._CE&&zu.test(t)?fn._CE("",t):n},ju=function(e){return function(t){return 1-e(1-t)}},Lu=function(t,e){return t&&(sn(t)?t:fn[t]||Du(t))||e};function Pu(t){var e,n,r,i=gc()-yc,o=!0===t;if((mc<i||i<0)&&(bc+=i-_c),(0<(i=(n=(yc+=i)-bc)-Ac)||o)&&(r=++xc.frame,fc=n-1e3*xc.time,xc.time=n/=1e3,Ac+=i+(vc<=i?4:vc-i),e=1),o||(uc=hc(Pu)),e)for(pc=0;pc<wc.length;pc++)wc[pc](n,fc,r,t)}function Fu(t){return t<1/2.75?Ec*t*t:t<1/2.75*2?Ec*Math.pow(t-1.5/2.75,2)+.75:t<1/2.75*2.5?Ec*(t-=2.25/2.75)*t+.9375:Ec*Math.pow(t-2.625/2.75,2)+.984375}function Ru(t,e,n,r,i,o){var a,s,l,c;if(eu[t]&&!1!==(a=new eu[t]).init(i,a.rawVars?e[t]:Mh(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new Yh(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==lc))for(l=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)l[a._props[c]]=s;return a}function Wu(t,e,n){return t.setAttribute(e,n)}function Uu(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)}function Yu(t){(Vh[t]||Qh).map(function(t){return t()})}function Gu(){var t=Date.now(),s=[];2<t-qh&&(Yu("matchMediaInit"),Gh.forEach(function(t){var e,n,r,i,o=t.queries,a=t.conditions;for(n in o)(e=rc.matchMedia(o[n]).matches)&&(r=1),e!==a[n]&&(a[n]=e,i=1);i&&(t.revert(),r)&&s.push(t)}),Yu("matchMediaRevert"),s.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),qh=t,Yu("matchMedia"))}function Vu(t,u){return{name:t,rawVars:1,init:function(t,c,e){e._onInit=function(t){var e,n;if(an(c)&&(e={},sl(c,function(t){return e[t]=1}),c=e),u){for(n in e={},c)e[n]=u(c[n]);c=e}var r,i,o,a=t,s=c,l=a._targets;for(r in s)for(i=l.length;i--;)(o=(o=(o=a._ptLookup[i][r])&&o.d)&&(o._pt?Kh(o,r):o))&&o.modifier&&o.modifier(s[r],a,l[i],r)}}}}function Qu(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function qu(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Hu(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Zu(t,e){t=e.s+e.c*t,e.set(e.t,e.p,~~(t+(t<0?-.5:.5))+e.u,e)}function Xu(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Ju(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Ku(t,e,n){return t.style[e]=n}function $u(t,e,n){return t.style.setProperty(e,n)}function th(t,e,n){return t._gsap[e]=n}function eh(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n}function nh(t,e,n,r,i){(t=t._gsap).scaleX=t.scaleY=n,t.renderTransform(i,t)}function rh(t,e,n,r,i){(t=t._gsap)[e]=n,t.renderTransform(i,t)}function ih(t,e){var n=this,r=this.target,i=r.style,o=r._gsap;if(t in ed&&i){if(this.tfm=this.tfm||{},"transform"===t)return ld.transform.split(",").forEach(function(t){return ih.call(n,t,e)});if(~(t=ld[t]||t).indexOf(",")?t.split(",").forEach(function(t){return n.tfm[t]=Ed(r,t)}):this.tfm[t]=o.x?o[t]:Ed(r,t),t===cd&&(this.tfm.zOrigin=o.zOrigin),0<=this.props.indexOf(mn))return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(cd,e,"")),t=mn}(i||e)&&this.props.push(t,e,i[t])}function oh(){for(var t,e=this.props,n=this.target,r=n.style,i=n._gsap,o=0;o<e.length;o+=3)e[o+1]?n[e[o]]=e[o+2]:e[o+2]?r[e[o]]=e[o+2]:r.removeProperty("--"===e[o].substr(0,2)?e[o]:e[o].replace(od,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)i[t]=this.tfm[t];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(o=Ah())&&o.isStart||r[mn]||(ud(r),i.zOrigin&&r[cd]&&(r[cd]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}}function ah(t,e){var n={target:t,props:[],revert:oh,save:ih};return t._gsap||$h.core.getCache(t),e&&e.split(",").forEach(function(t){return n.save(t)}),n}function sh(){td()&&window.document&&(gh=window,mh=gh.document,_h=mh.documentElement,yh=hd("div")||{style:{}},hd("div"),mn=pd(mn),cd=mn+"Origin",yh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",wh=!!pd("perspective"),Ah=$h.core.reverting,bh=1)}function lh(t,e,n,r){n&&"none"!==n||((i=(o=pd(e,t,1))&&dd(t,o,1))&&i!==n?(e=o,n=i):"borderColor"===e&&(n=dd(t,"borderTopColor")));var i,o,a,s,l,c,u,h,d,f,p=new Yh(this._pt,t.style,e,0,1,Ph),g=0,m=0;if(p.b=n,p.e=r,n+="","auto"===(r+="")&&(c=t.style[e],t.style[e]=r,r=dd(t,e)||r,c?t.style[e]=c:yd(t,e)),Xl(o=[n,r]),r=o[1],a=(n=o[0]).match(Rc)||[],(r.match(Rc)||[]).length){for(;h=Rc.exec(r);)d=h[0],h=r.substring(g,h.index),l?l=(l+1)%5:"rgba("!==h.substr(-5)&&"hsla("!==h.substr(-5)||(l=1),d!==(c=a[m++]||"")&&(s=parseFloat(c)||0,f=c.substr((s+"").length),"="===d.charAt(1)&&(d=cu(s,d)+f),u=parseFloat(d),d=d.substr((u+"").length),g=Rc.lastIndex-d.length,d||(d=d||Cc.units[e]||f,g===r.length&&(r+=d,p.e+=d)),f!==d&&(s=xd(t,e,c,d)||0),p._pt={_next:p._pt,p:h||1===m?h:",",s:s,c:u-s,m:l&&l<4||"zIndex"===e?Math.round:0});p.c=g<r.length?r.substring(g,r.length):""}else p.r="display"===e&&"none"===r?Ju:Xu;return Uc.test(r)&&(p.e=0),this._pt=p}function ch(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,e=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;-1<--i;)n=s[i],ed[n]&&(r=1,n="transformOrigin"===n?cd:mn),yd(o,n);r&&(yd(o,mn),e)&&(e.svg&&o.removeAttribute("transform"),Nd(o,1),e.uncache=1,ud(a))}}function uh(t,e,n,r,i,o){var a,s=t._gsap,i=i||zd(t,!0),l=s.xOrigin||0,c=s.yOrigin||0,u=s.xOffset||0,h=s.yOffset||0,d=i[0],f=i[1],p=i[2],g=i[3],m=i[4],_=i[5],b=e.split(" "),y=parseFloat(b[0])||0,v=parseFloat(b[1])||0;n?i!==Md&&(i=d*g-f*p)&&(a=y*(-f/i)+v*(d/i)-(d*_-f*m)/i,y=y*(g/i)+v*(-p/i)+(p*_-g*m)/i,v=a):(y=(i=_d(t)).x+(~b[0].indexOf("%")?y/100*i.width:y),v=i.y+(~(b[1]||b[0]).indexOf("%")?v/100*i.height:v)),r||!1!==r&&s.smooth?(s.xOffset=u+((m=y-l)*d+(_=v-c)*p)-m,s.yOffset=h+(m*f+_*g)-_):s.xOffset=s.yOffset=0,s.xOrigin=y,s.yOrigin=v,s.smooth=!!r,s.origin=e,s.originIsAbsolute=!!n,t.style[cd]="0px 0px",o&&(vd(o,s,"xOrigin",l,y),vd(o,s,"yOrigin",c,v),vd(o,s,"xOffset",u,s.xOffset),vd(o,s,"yOffset",h,s.yOffset)),t.setAttribute("data-svg-origin",y+" "+v)}function hh(t,e,n){var r=hn(e);return cn(parseFloat(e)+parseFloat(xd(t,"x",n+"px",r)))+r}function dh(t,e){for(var n in e)t[n]=e[n];return t}sl("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Kl(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),fn.Linear.easeNone=fn.none=fn.Linear.easeIn,Kl("Elastic",tc("in"),tc("out"),tc()),Ec=7.5625,Kl("Bounce",function(t){return 1-Fu(1-t)},Fu),Kl("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Kl("Circ",function(t){return-(zc(1-t*t)-1)}),Kl("Sine",function(t){return 1===t?1:1-Nc(t*Tc)}),Kl("Back",ec("in"),ec("out"),ec()),fn.SteppedEase=fn.steps=Vc.SteppedEase={config:function(t,e){var n=1/(t=void 0===t?1:t),r=t+(e?0:1),i=e?1:0,o=1-on;return function(t){return((r*Ol(0,o,t)|0)+i)*n}}},kc.ease=fn["quad.out"],sl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ou+=t+","+t+"Params,"});var fh,ph,gh,mh,_h,bh,yh,vh,Ah,wh,xh,Eh=function(t,e){this.id=Sc++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:lu,this.set=e?e.getSetter:Dh},Ch=(()=>{function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Tl(this,+t.duration,1,1),this.data=t.data,nn&&(this._ctx=nn).data.push(this),cc||Tu.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Tl(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Su(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(pu(this,t),n._dp&&!n.parent&&xl(n,this);n&&n.parent;)n.parent._time!==n._start+(0<=n._ts?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&El(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===on||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),ll(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+vl(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):0<this.rawTime()?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+vl(this),e):this.duration()?Math.min(1,this._time/this._dur):0<this.rawTime()?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Al(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return this._rts===-on?0:this._rts;if(this._rts===t)return this;for(var n=this.parent&&this._ts?wl(this.parent._time,this):this._tTime,t=(this._rts=+t||0,this._ts=this._ps||t===-on?0:this._rts,this.totalTime(Ol(-Math.abs(this._delay),this._tDur,n),!1!==e),fu(this),this),r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},e.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Su(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==on&&(this._tTime-=on)))),this):this._ps},e.startTime=function(t){var e;return arguments.length?(this._start=t,!(e=this.parent||this._dp)||!e._sort&&this.parent||El(e,this,t-this._delay),this):this._start},e.endTime=function(t){return this._start+(el(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wl(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){var e=en;return en=t=void 0===t?Jc:t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),en=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Sl(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){var e;return arguments.length?(e=this._time,this._rDelay=t,Sl(this),e?this.time(e):this):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(zl(this,t),el(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,el(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-on:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-on,this},e.isActive=function(){var t=this.parent||this._dp,e=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(t=t.rawTime(!0))>=e&&t<this.endTime(!0)-on))},e.eventCallback=function(t,e,n){var r=this.vars;return 1<arguments.length?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(r){var i=this;return new Promise(function(e){function t(){var t=i.then;i.then=null,sn(n)&&(n=n(i))&&(n.then||n===i)&&(i.then=t),e(n),i.then=t}var n=sn(r)?r:cl;i._initted&&1===i.totalProgress()&&0<=i._ts||!i._tTime&&i._ts<0?t():i._prom=t})},e.kill=function(){Ql(this)},t})(),pn=(ul(Ch.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-on,_prom:0,_ps:!1,_rts:1}),(r=>{function t(t,e){var n;return(n=r.call(this,t=void 0===t?{}:t)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=el(t.sortChildren),rn&&El(t.parent||rn,$s(n),e),t.reversed&&n.reverse(),t.paused&&n.paused(!0),t.scrollTrigger&&Cl($s(n),t.scrollTrigger),n}tl(t,r);var e=t.prototype;return e.to=function(t,e,n){return Nl(0,arguments,this),this},e.from=function(t,e,n){return Nl(1,arguments,this),this},e.fromTo=function(t,e,n,r){return Nl(2,arguments,this),this},e.set=function(t,e,n){return e.duration=0,e.parent=this,pl(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new gn(t,e,zl(this,n),1),this},e.call=function(t,e,n){return El(this,gn.delayedCall(0,t,e),n)},e.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new gn(t,n,zl(this,i)),this},e.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,pl(n).immediateRender=el(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},e.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,pl(r).immediateRender=el(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},e.render=function(t,e,n){var r,i,o,a,s,l,c,u,h,d,f=this._time,p=this._dirty?this.totalDuration():this._tDur,g=this._dur,m=t<=0?0:un(t),_=this._zTime<0!=t<0&&(this._initted||!g);if((m=this!==rn&&p<m&&0<=t?p:m)!==this._tTime||n||_){if(f!==this._time&&g&&(m+=this._time-f,t+=this._time-f),r=m,u=this._start,s=!(c=this._ts),_&&(g||(f=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(_=this._yoyo,a=g+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(r=un(m%a),m===p?(o=this._repeat,r=g):((o=~~(m/a))&&o===m/a&&(r=g,o--),g<r&&(r=g)),h=Al(this._tTime,a),_&&1&o&&(r=g-r,d=1),o!==(h=!f&&this._tTime&&h!==o&&this._tTime-h*a-this._dur<=0?o:h)&&!this._lock){var b=_&&1&h,_=b===(_&&1&o),f=(b=o<h?!b:b)?0:m%g?g:m;if(this._lock=1,this.render(f||(d?0:un(o*a)),e,!g)._lock=0,this._tTime=m,!e&&this.parent&&Vl(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),f&&f!==this._time||s!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,p=this._tDur,_&&(this._lock=2,this.render(f=b?g:-1e-4,!0),this.vars.repeatRefresh)&&!d&&this.invalidate(),this._lock=0,!this._ts&&!s)return this;Jl(this,d)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=((t,e,n)=>{var r;if(e<n)for(r=t._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}})(this,un(f),un(r)))&&(m-=r-(r=l._start)),this._tTime=m,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,f=0),!f&&r&&!e&&!o&&(Vl(this,"onStart"),this._tTime!==m))return this;if(f<=r&&0<=t)for(y=this._first;y;){if(i=y._next,(y._act||r>=y._start)&&y._ts&&l!==y){if(y.parent!==this)return this.render(t,e,n);if(y.render(0<y._ts?(r-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(r-y._start)*y._ts,e,n),r!==this._time||!this._ts&&!s){l=0,i&&(m+=this._zTime=-on);break}}y=i}else for(var y=this._last,v=t<0?t:r;y;){if(i=y._prev,(y._act||v<=y._end)&&y._ts&&l!==y){if(y.parent!==this)return this.render(t,e,n);if(y.render(0<y._ts?(v-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(v-y._start)*y._ts,e,n||en&&(y._initted||y._startAt)),r!==this._time||!this._ts&&!s){l=0,i&&(m+=this._zTime=v?-on:on);break}}y=i}if(l&&!e&&(this.pause(),l.render(f<=r?0:-on)._zTime=f<=r?1:-1,this._ts))return this._start=u,fu(this),this.render(t,e,n);this._onUpdate&&!e&&Vl(this,"onUpdate",!0),!(m===p&&this._tTime>=this.totalDuration()||!m&&f)||u!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||(!t&&g||!(m===p&&0<this._ts||!m&&this._ts<0)||_l(this,1),e)||t<0&&!f||!m&&!f&&p||(Vl(this,m===p&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom)||m<p&&0<this.timeScale()||this._prom()}return this},e.add=function(t,e){var n=this;if(Ic(e)||(e=zl(this,e,t)),!(t instanceof Ch)){if(ln(t))return t.forEach(function(t){return n.add(t,e)}),this;if(an(t))return this.addLabel(t,e);if(!sn(t))return this;t=gn.delayedCall(0,t)}return this!==t?El(this,t,e):this},e.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-Mc);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof gn?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},e.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},e.remove=function(t){return an(t)?this.removeLabel(t):sn(t)?this.killTweensOf(t):(ml(this,t),t===this._recent&&(this._recent=this._last),du(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=un(Tu.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),r.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=zl(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,n){e=gn.delayedCall(0,e||al,n);return e.data="isPause",this._hasPause=1,El(this,e,zl(this,t))},e.removePause=function(t){var e=this._first;for(t=zl(this,t);e;)e._start===t&&"isPause"===e.data&&_l(e),e=e._next},e.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)fh!==r[i]&&r[i].kill(t,e);return this},e.getTweensOf=function(t,e){for(var n,r=[],i=yu(t),o=this._first,a=Ic(e);o;)o instanceof gn?((t,e)=>{for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n})(o._targets,i)&&(a?(!fh||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},e.tweenTo=function(t,e){e=e||{};var n,r=this,i=zl(r,t),t=e,o=t.startAt,a=t.onStart,s=t.onStartParams,t=t.immediateRender,l=gn.to(r,ul({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale())||on,onStart:function(){var t;r.pause(),n||(t=e.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale()),l._dur!==t&&Tl(l,t,0,1).render(l._time,!0,!0),n=1),a&&a.apply(l,s||[])}},e));return t?l.render(0):l},e.tweenFromTo=function(t,e,n){return this.tweenTo(e,ul({startAt:{time:zl(this,t)}},n))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),Gl(this,zl(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),Gl(this,zl(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+on)},e.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return du(this)},e.invalidate=function(t){var e=this._first;for(this._lock=0;e;)e.invalidate(t),e=e._next;return r.prototype.invalidate.call(this,t)},e.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),du(this)},e.totalDuration=function(t){var e,n,r,i=0,o=this,a=o._last,s=Mc;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),s<(n=a._start)&&o._sort&&a._ts&&!o._lock?(o._lock=1,El(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-1/0),s=0),a._end>i&&a._ts&&(i=a._end),a=e;Tl(o,o===rn&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(t){if(rn._ts&&(ll(rn,wl(t,rn)),sc=Tu.frame),Tu.frame>=ru){ru+=Cc.autoSleep||120;var e=rn._first;if((!e||!e._ts)&&Cc.autoSleep&&Tu._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Tu.sleep()}}},t})(Ch)),kh=(ul(pn.prototype,{_lock:0,_hasPause:0,_forcing:0}),function(t,e,n,r,i,o,a,s,l,c){sn(r)&&(r=r(i||0,t,o));var u,i=t[e],o="get"!==n?n:sn(i)?l?t[e.indexOf("set")||!sn(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():i,n=sn(i)?l?Ih:Oh:Nh;if(!an(r)||"="!==(r=~r.indexOf("random(")?wu(r):r).charAt(1)||!(u=cu(o,r)+(hn(o)||0))&&0!==u||(r=u),!c||o!==r||ph)return isNaN(o*r)||""===r?(i||e in t||qc(e,r),function(t,e,n,r,i,o,a){var s,l,c,u,h,d=new Yh(this._pt,t,e,0,1,Ph,null,i),f=0,p=0;for(d.b=n,d.e=r,n+="",(i=~(r+="").indexOf("random("))&&(r=wu(r)),o&&(o(o=[n,r],t,e),n=o[0],r=o[1]),s=n.match(Wc)||[];u=Wc.exec(r);)c=u[0],u=r.substring(f,u.index),l?l=(l+1)%5:"rgba("===u.substr(-5)&&(l=1),c!==s[p++]&&(h=parseFloat(s[p-1])||0,d._pt={_next:d._pt,p:u||1===p?u:",",s:h,c:"="===c.charAt(1)?cu(h,c)-h:parseFloat(c)-h,m:l&&l<4?Math.round:0},f=Wc.lastIndex);return d.c=f<r.length?r.substring(f,r.length):"",d.fp=a,(Uc.test(r)||i)&&(d.e=0),this._pt=d}.call(this,t,e,o,r,n,s||Cc.stringFilter,l)):(u=new Yh(this._pt,t,e,+o||0,r-(o||0),"boolean"==typeof i?Lh:jh,0,n),l&&(u.fp=l),a&&u.modifier(a,this,t),this._pt=u)}),Mh=function(t,e,n,r,i){if(sn(t)&&(t=Th(t,i,e,n,r)),!jc(t)||t.style&&t.nodeType||ln(t)||Lc(t))return an(t)?Th(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=Th(t[o],i,e,n,r);return a},Bh=function t(e,n,r){var i,o,a,s,l,c,u,h,d,f,p,g,m,_=e.vars,b=_.ease,y=_.startAt,v=_.immediateRender,A=_.lazy,w=_.onUpdate,x=_.runBackwards,E=_.yoyoEase,C=_.keyframes,k=_.autoRevert,M=e._dur,B=e._startAt,T=e._targets,S=e.parent,z=S&&"nested"===S.data?S.vars.targets:T,N="auto"===e._overwrite&&!nc,O=e.timeline;if(e._ease=Lu(b=!O||C&&b?b:"none",kc.ease),e._yEase=E?ju(Lu(!0===E?b:E,kc.ease)):0,E&&e._yoyo&&!e._repeat&&(E=e._yEase,e._yEase=e._ease,e._ease=E),e._from=!O&&!!_.runBackwards,!O||C&&!_.stagger){if(g=(h=T[0]?su(T[0]).harness:0)&&_[h.prop],i=fl(_,Kc),B&&(B._zTime<0&&B.progress(1),n<0&&x&&v&&!k?B.render(-1,!0):B.revert(x&&M?Xc:Zc),B._lazy=0),y){if(_l(e._startAt=gn.set(T,ul({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!B&&el(A),startAt:null,delay:0,onUpdate:w&&function(){return Vl(e,"onUpdate")},stagger:0},y))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(en||!v&&!k)&&e._startAt.revert(Xc),v&&M&&n<=0&&r<=0)return void(n&&(e._zTime=n))}else if(x&&M&&!B)if(a=ul({overwrite:!1,data:"isFromStart",lazy:(v=n?!1:v)&&!B&&el(A),immediateRender:v,stagger:0,parent:S},i),g&&(a[h.prop]=g),_l(e._startAt=gn.set(T,a)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(en?e._startAt.revert(Xc):e._startAt.render(-1,!0)),e._zTime=n,v){if(!n)return}else t(e._startAt,on,on);for(e._pt=e._ptCache=0,A=M&&el(A)||A&&!M,o=0;o<T.length;o++){if(u=(l=T[o])._gsap||au(T)[o]._gsap,e._ptLookup[o]=f={},tu[u.id]&&$c.length&&uu(),p=z===T?o:z.indexOf(l),h&&!1!==(d=new h).init(l,g||i,e,p,z)&&(e._pt=s=new Yh(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(t){f[t]=s}),d.priority)&&(c=1),!h||g)for(a in i)eu[a]&&(d=Ru(a,i,e,p,l,z))?d.priority&&(c=1):f[a]=s=kh.call(e,l,a,"get",i[a],p,z,0,_.stringFilter);e._op&&e._op[o]&&e.kill(l,e._op[o]),N&&e._pt&&(fh=e,rn.killTweensOf(l,f,e.globalTime(n)),m=!e.parent,fh=0),e._pt&&A&&(tu[u.id]=1)}c&&Uh(e),e._onInit&&e._onInit(e)}e._onUpdate=w,e._initted=(!e._op||e._pt)&&!m,C&&n<=0&&O.render(Mc,!0,!0)},Th=function(t,e,n,r,i){return sn(t)?t.call(e,n,r,i):an(t)&&~t.indexOf("random(")?wu(t):t},Sh=ou+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",zh={},gn=(sl(Sh+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return zh[t]=1}),(M=>{function i(t,e,n,r){"number"==typeof e&&(n.duration=e,e=n,n=null);var i,o,a,s,l,c,u,h,d,r=(i=M.call(this,r?e:pl(e))||this).vars,f=r.duration,p=r.delay,g=r.immediateRender,m=r.stagger,_=r.overwrite,b=r.keyframes,y=r.defaults,v=r.scrollTrigger,A=r.yoyoEase,r=e.parent||rn,w=(ln(t)||Lc(t)?Ic(t[0]):"length"in e)?[t]:yu(t);if(i._targets=w.length?au(w):Hc("GSAP target "+t+" not found. https://gsap.com",!Cc.nullTargetWarn)||[],i._ptLookup=[],i._overwrite=_,b||m||rl(f)||rl(p)){if(e=i.vars,(o=i.timeline=new pn({data:"nested",defaults:y||{},targets:r&&"nested"===r.data?r.vars.targets:w})).kill(),o.parent=o._dp=$s(i),o._start=0,m||rl(f)||rl(p)){if(l=w.length,h=m&&jl(m),jc(m))for(c in m)~Sh.indexOf(c)&&((d=d||{})[c]=m[c]);for(a=0;a<l;a++)(s=fl(e,zh)).stagger=0,A&&(s.yoyoEase=A),d&&hl(s,d),u=w[a],s.duration=+Th(f,$s(i),a,u,w),s.delay=(+Th(p,$s(i),a,u,w)||0)-i._delay,!m&&1===l&&s.delay&&(i._delay=p=s.delay,i._start+=p,s.delay=0),o.to(u,s,h?h(a,u,w):0),o._ease=fn.none;o.duration()?f=p=0:i.timeline=0}else if(b){pl(ul(o.vars.defaults,{ease:"none"})),o._ease=Lu(b.ease||e.ease||"none");var x,E,C,k=0;if(ln(b))b.forEach(function(t){return o.to(w,t,">")}),o.duration();else{for(c in s={},b)"ease"!==c&&"easeEach"!==c&&((t,n,e,r)=>{var i,o,a=n.ease||r||"power1.inOut";if(ln(n))o=e[t]||(e[t]=[]),n.forEach(function(t,e){return o.push({t:e/(n.length-1)*100,v:t,e:a})});else for(i in n)o=e[i]||(e[i]=[]),"ease"!==i&&o.push({t:parseFloat(t),v:n[i],e:a})})(c,b[c],s,b.easeEach);for(c in s)for(x=s[c].sort(function(t,e){return t.t-e.t}),a=k=0;a<x.length;a++)(C={ease:(E=x[a]).e,duration:(E.t-(a?x[a-1].t:0))/100*f})[c]=E.v,o.to(w,C,k),k+=C.duration;o.duration()<f&&o.to({},{duration:f-o.duration()})}}f||i.duration(f=o.duration())}else i.timeline=0;return!0!==_||nc||(fh=$s(i),rn.killTweensOf(w),fh=0),El(r,$s(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),(g||!f&&!b&&i._start===un(r._time)&&el(g)&&yl($s(i))&&"nested"!==r.data)&&(i._tTime=-on,i.render(Math.max(0,-p)||0)),v&&Cl($s(i),v),i}tl(i,M);var t=i.prototype;return t.render=function(t,e,n){var r,i,o,a=this._time,s=this._tDur,l=this._dur,c=t<0,u=s-on<t&&!c?s:t<on?0:t;if(l){if(u!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=c){if(m=u,g=this.timeline,this._repeat){if(f=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(100*f+t,e,n);if(m=un(u%f),u===s?(_=this._repeat,m=l):((_=~~(u/f))&&_===un(u/f)&&(m=l,_--),l<m&&(m=l)),(i=this._yoyo&&1&_)&&(p=this._yEase,m=l-m),y=Al(this._tTime,f),m===a&&!n&&this._initted&&_===y)return this._tTime=u,this;_!==y&&(g&&this._yEase&&Jl(g,i),this.vars.repeatRefresh)&&!i&&!this._lock&&this._time!==f&&this._initted&&(this._lock=n=1,this.render(un(f*_),!0).invalidate()._lock=0)}if(!this._initted){if(kl(this,c?t:m,n,e,u))return this._tTime=0,this;if(!(a===this._time||n&&this.vars.repeatRefresh&&_!==y))return this;if(l!==this._dur)return this.render(t,e,n)}if(this._tTime=u,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=o=(p||this._ease)(m/l),this._from&&(this.ratio=o=1-o),m&&!a&&!e&&!_&&(Vl(this,"onStart"),this._tTime!==u))return this;for(r=this._pt;r;)r.r(o,r.d),r=r._next;g&&g.render(t<0?t:g._dur*g._ease(m/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(c&&bl(this,t,0,n),Vl(this,"onUpdate")),this._repeat&&_!==y&&this.vars.onRepeat&&!e&&this.parent&&Vl(this,"onRepeat"),u!==this._tDur&&u||this._tTime!==u||(c&&!this._onUpdate&&bl(this,t,0,!0),!t&&l||!(u===this._tDur&&0<this._ts||!u&&this._ts<0)||_l(this,1),e)||c&&!a||!(u||a||i)||(Vl(this,u===s?"onComplete":"onReverseComplete",!0),!this._prom)||u<s&&0<this.timeScale()||this._prom()}}else{var h,d,f=this,p=t,g=e,m=n,_=f.ratio,b=p<0||!p&&(!f._start&&Ml(f)&&(f._initted||!Bl(f))||(f._ts<0||f._dp._ts<0)&&!Bl(f))?0:1,y=f._rDelay,l=0;if(y&&f._repeat&&(l=Ol(0,f._tDur,p),d=Al(l,y),f._yoyo&&1&d&&(b=1-b),d!==Al(f._tTime,y))&&(_=1-b,f.vars.repeatRefresh)&&f._initted&&f.invalidate(),b!==_||en||m||f._zTime===on||!p&&f._zTime){if(f._initted||!kl(f,p,m,g,l)){for(d=f._zTime,f._zTime=p||(g?on:0),g=g||p&&!d,f.ratio=b,f._from&&(b=1-b),f._time=0,f._tTime=l,h=f._pt;h;)h.r(b,h.d),h=h._next;p<0&&bl(f,p,0,!0),f._onUpdate&&!g&&Vl(f,"onUpdate"),l&&f._repeat&&!g&&f.parent&&Vl(f,"onRepeat"),(f._tDur<=p||p<0)&&f.ratio===b&&(b&&_l(f,1),g||en||(Vl(f,b?"onComplete":"onReverseComplete",!0),f._prom&&f._prom()))}}else f._zTime||(f._zTime=p)}return this},t.targets=function(){return this._targets},t.invalidate=function(t){return t&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),M.prototype.invalidate.call(this,t)},t.resetTo=function(t,e,n,r,i){cc||Tu.wake(),this._ts||this.play();var o,a=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Bh(this,a),o=this._ease(a/this._dur),((t,e,n,r,i,o,a,s)=>{var l,c,u,h,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],u=t._ptLookup,h=t._targets.length;h--;){if((l=u[h][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return ph=1,t.vars[e]="+=0",Bh(t,a),ph=0,s?Hc(e+" not eligible for reset"):1;d.push(l)}for(h=d.length;h--;)(l=(c=d[h])._pt||c).s=!r&&0!==r||i?l.s+(r||0)+o*l.c:r,l.c=n-l.s,c.e&&(c.e=cn(n)+hn(c.e)),c.b&&(c.b=l.s+hn(c.b))})(this,t,e,n,r,o,a,i)?this.resetTo(t,e,n,r,1):(pu(this,0),this.parent||gl(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Ql(this):this;if(this.timeline)d=this.timeline.totalDuration(),this.timeline.killTweensOf(t,e,fh&&!0!==fh.vars.overwrite)._first||Ql(this),this.parent&&d!==this.timeline.totalDuration()&&Tl(this,this._dur*this.timeline._tDur/d,0,1);else{var n,r,i,o,a,s,l,c=this._targets,u=t?yu(t):c,h=this._ptLookup,d=this._pt;if((!e||"all"===e)&&((t,e)=>{for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0})(c,u))return"all"===e&&(this._pt=0),Ql(this);for(n=this._op=this._op||[],"all"!==e&&(an(e)&&(a={},sl(e,function(t){return a[t]=1}),e=a),e=((t,e)=>{var n,r,i,o,a=(t=t[0]?su(t[0]).harness:0)&&t.aliases;if(!a)return e;for(r in n=hl({},e),a)if(r in n)for(i=(o=a[r].split(",")).length;i--;)n[o[i]]=n[r];return n})(c,e)),l=c.length;l--;)if(~u.indexOf(c[l]))for(a in r=h[l],"all"===e?(n[l]=e,o=r,i={}):(i=n[l]=n[l]||{},o=e),o)(s=r&&r[a])&&("kill"in s.d&&!0!==s.d.kill(a)||ml(this,s,"_pt"),delete r[a]),"all"!==i&&(i[a]=1);this._initted&&!this._pt&&d&&Ql(this)}return this},i.to=function(t,e){return new i(t,e,arguments[2])},i.from=function(t,e){return Nl(1,arguments)},i.delayedCall=function(t,e,n,r){return new i(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},i.fromTo=function(t,e,n){return Nl(2,arguments)},i.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new i(t,e)},i.killTweensOf=function(t,e,n){return rn.killTweensOf(t,e,n)},i})(Ch)),Nh=(ul(gn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),sl("staggerTo,staggerFrom,staggerFromTo",function(n){gn[n]=function(){var t=new pn,e=_u.call(arguments,0);return e.splice("staggerFromTo"===n?5:4,0,0),t[n].apply(t,e)}}),function(t,e,n){return t[e]=n}),Oh=function(t,e,n){return t[e](n)},Ih=function(t,e,n,r){return t[e](r.fp,n)},Dh=function(t,e){return sn(t[e])?Oh:Dc(t[e])&&t.setAttribute?Wu:Nh},jh=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Lh=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Ph=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},Fh=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Rh=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},Wh=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?ml(this,r,"_pt"):r.dep||(e=1),r=n;return!e},Uh=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},Yh=(()=>{function t(t,e,n,r,i,o,a,s,l){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||jh,this.d=a||this,this.set=s||Nh,this.pr=l||0,(this._next=t)&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Uu,this.m=t,this.mt=n,this.tween=e},t})(),Gh=(sl(ou+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Kc[t]=1}),Vc.TweenMax=Vc.TweenLite=gn,Vc.TimelineLite=Vc.TimelineMax=pn,rn=new pn({sortChildren:!1,defaults:kc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Cc.stringFilter=Xl,[]),Vh={},Qh=[],qh=0,Hh=0,Zh=(()=>{function n(t,e){this.selector=e&&Dl(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Hh++,t&&this.add(t)}var t=n.prototype;return t.add=function(t,r,i){sn(t)&&(i=r,r=t,t=sn);function e(){var t,e=nn,n=o.selector;return e&&e!==o&&e.data.push(o),i&&(o.selector=Dl(i)),nn=o,t=r.apply(o,arguments),sn(t)&&o._r.push(t),nn=e,o.selector=n,o.isReverted=!1,t}var o=this;return o.last=e,t===sn?e(o,function(t){return o.add(null,t)}):t?o[t]=e:e},t.ignore=function(t){var e=nn;nn=null,t(this),nn=e},t.getTweens=function(){var e=[];return this.data.forEach(function(t){return t instanceof n?e.push.apply(e,t.getTweens()):t instanceof gn&&!(t.parent&&"nested"===t.parent.data)&&e.push(t)}),e},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e){for(var r,i=n.getTweens(),o=n.data.length;o--;)"isFlip"===(r=n.data[o]).data&&(r.revert(),r.getChildren(!0,!0,!1).forEach(function(t){return i.splice(i.indexOf(t),1)}));for(i.map(function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}}).sort(function(t,e){return e.g-t.g||-1/0}).forEach(function(t){return t.t.revert(e)}),o=n.data.length;o--;)(r=n.data[o])instanceof pn?"nested"!==r.data&&(r.scrollTrigger&&r.scrollTrigger.revert(),r.kill()):r instanceof gn||!r.revert||r.revert(e);n._r.forEach(function(t){return t(e,n)}),n.isReverted=!0}else this.data.forEach(function(t){return t.kill&&t.kill()});if(this.clear(),t)for(var a=Gh.length;a--;)Gh[a].id===this.id&&Gh.splice(a,1)},t.revert=function(t){this.kill(t||{})},n})(),Xh=(()=>{function t(t){this.contexts=[],this.scope=t,nn&&nn.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){jc(t)||(t={matches:t});var r,i,o,a=new Zh(0,n||this.scope),s=a.conditions={};for(i in nn&&!a.selector&&(a.selector=nn.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t)"all"===i?o=1:(r=rc.matchMedia(t[i]))&&(Gh.indexOf(a)<0&&Gh.push(a),(s[i]=r.matches)&&(o=1),r.addListener?r.addListener(Gu):r.addEventListener("change",Gu));return o&&e(a,function(t){return a.add(null,t)}),this},e.revert=function(t){this.kill(t||{})},e.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},t})(),Jh={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(ql)},timeline:function(t){return new pn(t)},getTweensOf:function(t,e){return rn.getTweensOf(t,e)},getProperty:function(r,t,e,n){an(r)&&(r=yu(r)[0]);var i=su(r||{}).get,o=e?cl:hu;return"native"===e&&(e=""),r&&(t?o((eu[t]&&eu[t].get||i)(r,t,e,n)):function(t,e,n){return o((eu[t]&&eu[t].get||i)(r,t,e,n))})},quickSetter:function(n,e,r){var i,o;if(1<(n=yu(n)).length)return i=n.map(function(t){return $h.quickSetter(t,e,r)}),o=i.length,function(t){for(var e=o;e--;)i[e](t)};n=n[0]||{};var a=eu[e],s=su(n),l=s.harness&&(s.harness.aliases||{})[e]||e,c=a?function(t){var e=new a;lc._pt=0,e.init(n,r?t+r:t,lc,0,[n]),e.render(1,e),lc._pt&&Fh(1,lc)}:s.set(n,l);return a?c:function(t){return c(n,l,r?t+r:t,s,1)}},quickTo:function(t,r,e){function n(t,e,n){return i.resetTo(r,t,e,n)}var i=$h.to(t,hl(((t={})[r]="+=0.1",t.paused=!0,t),e||{}));return n.tween=i,n},isTweening:function(t){return 0<rn.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Lu(t.ease,kc.ease)),dl(kc,t||{})},config:function(t){return dl(Cc,t||{})},registerEffect:function(t){var r=t.name,i=t.effect,e=t.plugins,o=t.defaults,t=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!eu[t]&&!Vc[t]&&Hc(r+" effect requires "+t+" plugin.")}),nu[r]=function(t,e,n){return i(yu(t),ul(e||{},o),n)},t&&(pn.prototype[r]=function(t,e,n){return this.add(nu[r](t,jc(e)?e:(n=e)&&{},this),n)})},registerEase:function(t,e){fn[t]=Lu(e)},parseEase:function(t,e){return arguments.length?Lu(t,e):fn},getById:function(t){return rn.getById(t)},exportRoot:function(t,e){var n,r,i=new pn(t=void 0===t?{}:t);for(i.smoothChildTiming=el(t.smoothChildTiming),rn.remove(i),i._dp=0,i._time=i._tTime=rn._time,n=rn._first;n;)r=n._next,!e&&!n._dur&&n instanceof gn&&n.vars.onComplete===n._targets[0]||El(i,n,n._start-n._delay),n=r;return El(rn,i,0),i},context:function(t,e){return t?new Zh(t,e):nn},matchMedia:function(t){return new Xh(t)},matchMediaRefresh:function(){return Gh.forEach(function(t){var e,n,r=t.conditions;for(n in r)r[n]&&(r[n]=!1,e=1);e&&t.revert()})||Gu()},addEventListener:function(t,e){t=Vh[t]||(Vh[t]=[]);~t.indexOf(e)||t.push(e)},removeEventListener:function(t,e){t=Vh[t],e=t&&t.indexOf(e);0<=e&&t.splice(e,1)},utils:{wrap:Rl,wrapYoyo:Wl,distribute:jl,random:Au,snap:Pl,normalize:function(t,e,n){return Ul(t,e,0,1,n)},getUnit:hn,clamp:function(e,n,t){return mu(t,function(t){return Ol(e,n,t)})},splitColor:Cu,toArray:yu,selector:Dl,mapRange:Ul,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,n){return function(t){return e(parseFloat(t))+(n||hn(t))}},interpolate:Yl,shuffle:vu},install:il,effects:nu,ticker:Tu,updateRoot:pn.updateRoot,plugins:eu,globalTimeline:rn,core:{PropTween:Yh,globals:ol,Tween:gn,Timeline:pn,Animation:Ch,getCache:su,_removeLinkedListItem:ml,reverting:function(){return en},context:function(t){return t&&nn&&(nn.data.push(t),t._ctx=nn),nn},suppressOverwrites:function(t){return nc=t}}},Kh=(sl("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Jh[t]=gn[t]}),Tu.add(pn.updateRoot),lc=Jh.to({},{duration:0}),function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n}),$h=Jh.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,a,s;for(o in this.tween=n,e)s=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(s||0)+"",e[o],r,i,0,0,o)).op=o,a.b=s,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)en?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Vu("roundProps",Ll),Vu("modifiers"),Vu("snap",Pl))||Jh,td=(gn.version=pn.version=$h.version="3.12.5",ac=1,nl()&&Su(),fn.Power0,fn.Power1,fn.Power2,fn.Power3,fn.Power4,fn.Linear,fn.Quad,fn.Cubic,fn.Quart,fn.Quint,fn.Strong,fn.Elastic,fn.Back,fn.SteppedEase,fn.Bounce,fn.Sine,fn.Expo,fn.Circ,function(){return"undefined"!=typeof window}),ed={},nd=180/Math.PI,rd=Math.PI/180,id=Math.atan2,od=/([A-Z])/g,ad=/(left|right|width|margin|padding|x)/i,sd=/[\s,\(]\S/,ld={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},mn="transform",cd=mn+"Origin",ud=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},hd=function(t,e){e=mh.createElementNS?mh.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):mh.createElement(t);return e&&e.style?e:mh.createElement(t)},dd=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(od,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,pd(n)||n,1)||""},fd="O,Moz,ms,Ms,Webkit".split(","),pd=function(t,e,n){var r=(e||yh).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(fd[i]+t in r););return i<0?null:(3===i?"ms":0<=i?fd[i]:"")+t},gd=function t(e){var n,r=hd("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(_h.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),_h.removeChild(r),this.style.cssText=a,n},md=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},_d=function(e){var n;try{n=e.getBBox()}catch(t){n=gd.call(e,!0)}return!(n=n&&(n.width||n.height)||e.getBBox===gd?n:gd.call(e,!0))||n.width||n.x||n.y?n:{x:+md(e,["x","cx","x1"])||0,y:+md(e,["y","cy","y1"])||0,width:0,height:0}},bd=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!_d(t))},yd=function(t,e){var n;e&&(t=t.style,e in ed&&e!==cd&&(e=mn),t.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty("--"===n?e:e.replace(od,"-$1").toLowerCase())):t.removeAttribute(e))},vd=function(t,e,n,r,i,o){e=new Yh(t._pt,e,n,0,1,o?Ju:Xu);return(t._pt=e).b=r,e.e=i,t._props.push(n),e},Ad={deg:1,rad:1,turn:1},wd={grid:1,flex:1},xd=function t(e,n,r,i){var o,a,s=parseFloat(r)||0,l=(r+"").trim().substr((s+"").length)||"px",c=yh.style,u=ad.test(n),h="svg"===e.tagName.toLowerCase(),d=(h?"client":"offset")+(u?"Width":"Height"),f="px"===i,p="%"===i;return i===l||!s||Ad[i]||Ad[l]?s:("px"===l||f||(s=t(e,n,r,"px")),r=e.getCTM&&bd(e),!p&&"%"!==l||!ed[n]&&!~n.indexOf("adius")?(c[u?"width":"height"]=100+(f?l:i),h=~n.indexOf("adius")||"em"===i&&e.appendChild&&!h?e:e.parentNode,(a=(h=(h=r?(e.ownerSVGElement||{}).parentNode:h)&&h!==mh&&h.appendChild?h:mh.body)._gsap)&&p&&a.width&&u&&a.time===Tu.time&&!a.uncache?cn(s/a.width*100):(!p||"height"!==n&&"width"!==n?(!p&&"%"!==l||wd[dd(h,"display")]||(c.position=dd(e,"position")),h===e&&(c.position="static"),h.appendChild(yh),o=yh[d],h.removeChild(yh),c.position="absolute"):(l=e.style[n],e.style[n]=100+i,o=e[d],l?e.style[n]=l:yd(e,n)),u&&p&&((a=su(h)).time=Tu.time,a.width=h[d]),cn(f?o*s/100:o&&s?100/o*s:0))):(o=r?e.getBBox()[u?"width":"height"]:e[d],cn(p?s/o*100:s/100*o)))},Ed=function(t,e,n,r){var i;return bh||sh(),e in ld&&"transform"!==e&&~(e=ld[e]).indexOf(",")&&(e=e.split(",")[0]),ed[e]&&"transform"!==e?(i=Nd(t,r),i="transformOrigin"!==e?i[e]:i.svg?i.origin:Od(dd(t,cd))+" "+i.zOrigin+"px"):(i=t.style[e])&&"auto"!==i&&!r&&!~(i+"").indexOf("calc(")||(i=kd[e]&&kd[e](t,e,n)||dd(t,e)||lu(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?xd(t,e,i,n)+n:i},Cd={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},kd={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data)return(e=t._pt=new Yh(t._pt,e,n,0,0,ch)).u=r,e.pr=-10,e.tween=i,t._props.push(n),1}},Md=[1,0,0,1,0,0],Bd={},Td=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Sd=function(t){t=dd(t,mn);return Td(t)?Md:t.substr(7).match(Fc).map(cn)},zd=function(t,e){var n,r,i,o=t._gsap||su(t),a=t.style,s=Sd(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Md:s:(s!==Md||t.offsetParent||t===_h||o.svg||(r=a.display,a.display="block",(o=t.parentNode)&&t.offsetParent||(i=1,n=t.nextElementSibling,_h.appendChild(t)),s=Sd(t),r?a.display=r:yd(t,"display"),i&&(n?o.insertBefore(t,n):o?o.appendChild(t):_h.removeChild(t))),e&&6<s.length?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Nd=function(t,e){var n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,_,b,y,v,A,w,x,E,C,k,M,B,T,S,z,N,O=t._gsap||new Eh(t);return"x"in O&&!e&&!O.uncache||(n=t.style,r=O.scaleX<0,f=getComputedStyle(t),i=dd(t,cd)||"0",z=o=a=l=c=u=h=d=0,N=s=1,O.svg=!(!t.getCTM||!bd(t)),f.translate&&("none"===f.translate&&"none"===f.scale&&"none"===f.rotate||(n[mn]=("none"!==f.translate?"translate3d("+(f.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==f.rotate?"rotate("+f.rotate+") ":"")+("none"!==f.scale?"scale("+f.scale.split(" ").join(",")+") ":"")+("none"!==f[mn]?f[mn]:"")),n.scale=n.rotate=n.translate="none"),f=zd(t,O.svg),O.svg&&(w=O.uncache?(x=t.getBBox(),i=O.xOrigin-x.x+"px "+(O.yOrigin-x.y)+"px",""):!e&&t.getAttribute("data-svg-origin"),uh(t,w||i,!!w||O.originIsAbsolute,!1!==O.smooth,f)),S=O.xOrigin||0,B=O.yOrigin||0,f!==Md&&(m=f[0],_=f[1],b=f[2],y=f[3],z=v=f[4],o=A=f[5],6===f.length?(N=Math.sqrt(m*m+_*_),s=Math.sqrt(y*y+b*b),l=m||_?id(_,m)*nd:0,(h=b||y?id(b,y)*nd+l:0)&&(s*=Math.abs(Math.cos(h*rd))),O.svg&&(z-=S-(S*m+B*b),o-=B-(S*_+B*y))):(S=f[6],B=f[7],C=f[8],k=f[9],M=f[10],T=f[11],z=f[12],o=f[13],a=f[14],c=(f=id(S,M))*nd,f&&(w=v*(p=Math.cos(-f))+C*(g=Math.sin(-f)),x=A*p+k*g,E=S*p+M*g,C=v*-g+C*p,k=A*-g+k*p,M=S*-g+M*p,T=B*-g+T*p,v=w,A=x,S=E),u=(f=id(-b,M))*nd,f&&(p=Math.cos(-f),T=y*(g=Math.sin(-f))+T*p,m=w=m*p-C*g,_=x=_*p-k*g,b=E=b*p-M*g),l=(f=id(_,m))*nd,f&&(w=m*(p=Math.cos(f))+_*(g=Math.sin(f)),x=v*p+A*g,_=_*p-m*g,A=A*p-v*g,m=w,v=x),c&&359.9<Math.abs(c)+Math.abs(l)&&(c=l=0,u=180-u),N=cn(Math.sqrt(m*m+_*_+b*b)),s=cn(Math.sqrt(A*A+S*S)),f=id(v,A),h=2e-4<Math.abs(f)?f*nd:0,d=T?1/(T<0?-T:T):0),O.svg)&&(w=t.getAttribute("transform"),O.forceCSS=t.setAttribute("transform","")||!Td(dd(t,mn)),w)&&t.setAttribute("transform",w),90<Math.abs(h)&&Math.abs(h)<270&&(r?(N*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),e=e||O.uncache,O.x=z-((O.xPercent=z&&(!e&&O.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-z)?-50:0)))?t.offsetWidth*O.xPercent/100:0)+"px",O.y=o-((O.yPercent=o&&(!e&&O.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-o)?-50:0)))?t.offsetHeight*O.yPercent/100:0)+"px",O.z=a+"px",O.scaleX=cn(N),O.scaleY=cn(s),O.rotation=cn(l)+"deg",O.rotationX=cn(c)+"deg",O.rotationY=cn(u)+"deg",O.skewX=h+"deg",O.skewY="0deg",O.transformPerspective=d+"px",(O.zOrigin=parseFloat(i.split(" ")[2])||!e&&O.zOrigin||0)&&(n[cd]=Od(i)),O.xOffset=O.yOffset=0,O.force3D=Cc.force3D,O.renderTransform=O.svg?Fd:wh?Pd:Id,O.uncache=0),O},Od=function(t){return(t=t.split(" "))[0]+" "+t[1]},Id=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Pd(t,e)},Dd="0deg",jd="0px",Ld=") ",Pd=function(t,e){var n,r,i,e=e||this,o=e.xPercent,a=e.yPercent,s=e.x,l=e.y,c=e.z,u=e.rotation,h=e.rotationY,d=e.rotationX,f=e.skewX,p=e.skewY,g=e.scaleX,m=e.scaleY,_=e.transformPerspective,b=e.force3D,y=e.target,e=e.zOrigin,v="",t="auto"===b&&t&&1!==t||!0===b;!e||d===Dd&&h===Dd||(b=parseFloat(h)*rd,n=Math.sin(b),r=Math.cos(b),b=parseFloat(d)*rd,i=Math.cos(b),s=hh(y,s,n*i*-e),l=hh(y,l,-Math.sin(b)*-e),c=hh(y,c,r*i*-e+e)),_!==jd&&(v+="perspective("+_+Ld),(o||a)&&(v+="translate("+o+"%, "+a+"%) "),!t&&s===jd&&l===jd&&c===jd||(v+=c!==jd||t?"translate3d("+s+", "+l+", "+c+") ":"translate("+s+", "+l+Ld),u!==Dd&&(v+="rotate("+u+Ld),h!==Dd&&(v+="rotateY("+h+Ld),d!==Dd&&(v+="rotateX("+d+Ld),f===Dd&&p===Dd||(v+="skew("+f+", "+p+Ld),1===g&&1===m||(v+="scale("+g+", "+m+Ld),y.style[mn]=v||"translate(0, 0)"},Fd=function(t,e){var n,r,i,o,a,e=e||this,s=e.xPercent,l=e.yPercent,c=e.x,u=e.y,h=e.rotation,d=e.skewX,f=e.skewY,p=e.scaleX,g=e.scaleY,m=e.target,_=e.xOrigin,b=e.yOrigin,y=e.xOffset,v=e.yOffset,e=e.forceCSS,A=parseFloat(c),w=parseFloat(u),h=parseFloat(h),d=parseFloat(d);(f=parseFloat(f))&&(d+=f=parseFloat(f),h+=f),h||d?(h*=rd,d*=rd,n=Math.cos(h)*p,r=Math.sin(h)*p,i=Math.sin(h-d)*-g,o=Math.cos(h-d)*g,d&&(f*=rd,a=Math.tan(d-f),i*=a=Math.sqrt(1+a*a),o*=a,f)&&(a=Math.tan(f),n*=a=Math.sqrt(1+a*a),r*=a),n=cn(n),r=cn(r),i=cn(i),o=cn(o)):(n=p,o=g,r=i=0),(A&&!~(c+"").indexOf("px")||w&&!~(u+"").indexOf("px"))&&(A=xd(m,"x",c,"px"),w=xd(m,"y",u,"px")),(_||b||y||v)&&(A=cn(A+_-(_*n+b*i)+y),w=cn(w+b-(_*r+b*o)+v)),(s||l)&&(a=m.getBBox(),A=cn(A+s/100*a.width),w=cn(w+l/100*a.height)),m.setAttribute("transform",a="matrix("+n+","+r+","+i+","+o+","+A+","+w+")"),e&&(m.style[mn]=a)},Nn=(sl("padding,margin,Width,Radius",function(e,n){var t="Bottom",s=(n<3?["Top","Right",t,"Left"]:["TopLeft","TopRight",t+"Right",t+"Left"]).map(function(t){return n<2?e+t:"border"+t+e});kd[1<n?"border"+e:e]=function(e,t,n,r,i){var o,a;if(arguments.length<4)return o=s.map(function(t){return Ed(e,t,n)}),5===(a=o.join(" ")).split(o[0]).length?o[0]:a;o=(r+"").split(" "),a={},s.forEach(function(t,e){return a[t]=o[e]=o[e]||o[(e-1)/2|0]}),e.init(t,a,i)}}),{name:"css",register:sh,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,s,l,c,u,h,d,f,j,p,g,L,m,_,b,y,v,A,w,P=this._props,x=t.style,E=n.vars.startAt;for(c in bh||sh(),this.styles=this.styles||ah(t),m=this.styles.props,this.tween=n,e)if("autoRound"!==c&&(a=e[c],!eu[c]||!Ru(c,e,n,r,t,i)))if(d=typeof a,l=kd[c],"string"===(d="function"===d?typeof(a=a.call(n,r,t,i)):d)&&~a.indexOf("random(")&&(a=wu(a)),l)l(this,t,c,a,n)&&(L=1);else if("--"===c.substr(0,2))o=(getComputedStyle(t).getPropertyValue(c)+"").trim(),a+="",Mu.lastIndex=0,Mu.test(o)||(u=hn(o),h=hn(a)),h?u!==h&&(o=xd(t,c,o,h)+h):u&&(a+=u),this.add(x,"setProperty",o,a,r,i,0,0,c),P.push(c),m.push(c,0,x[c]);else if("undefined"!==d){if((!(E&&c in E)||(o="function"==typeof E[c]?E[c].call(n,r,t,i):E[c],an(o)&&~o.indexOf("random(")&&(o=wu(o)),hn(o+"")||"auto"===o||(o+=Cc.units[c]||hn(Ed(t,c))||""),"="===(o+"").charAt(1)))&&(o=Ed(t,c)),l=parseFloat(o),(d="string"===d&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),s=parseFloat(a),f=(c=c in ld&&("autoAlpha"===c&&(1===l&&"hidden"===Ed(t,"visibility")&&s&&(l=0),m.push("visibility",0,x.visibility),vd(this,x,"visibility",l?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==c)&&"transform"!==c&&~(c=ld[c]).indexOf(",")?c.split(",")[0]:c)in ed)if(this.styles.save(c),j||((p=t._gsap).renderTransform&&!e.parseTransform||Nd(t,e.parseTransform),g=!1!==e.smoothOrigin&&p.smooth,(j=this._pt=new Yh(this._pt,x,mn,0,1,p.renderTransform,p,0,-1)).dep=1),"scale"===c)this._pt=new Yh(this._pt,p,"scaleY",p.scaleY,(d?cu(p.scaleY,d+s):s)-p.scaleY||0,Qu),this._pt.u=0,P.push("scaleY",c),c+="X";else{if("transformOrigin"===c){m.push(cd,0,x[cd]),w=A=v=void 0,v=(y=a).split(" "),A=v[0],w=v[1]||"50%","top"!==A&&"bottom"!==A&&"left"!==w&&"right"!==w||(y=A,A=w,w=y),v[0]=Cd[A]||A,v[1]=Cd[w]||w,a=v.join(" "),p.svg?uh(t,a,0,g,0,this):((h=parseFloat(a.split(" ")[2])||0)!==p.zOrigin&&vd(this,p,"zOrigin",p.zOrigin,h),vd(this,x,c,Od(o),Od(a)));continue}if("svgOrigin"===c){uh(t,a,1,g,0,this);continue}if(c in Bd){y=this,A=p,w=c,v=l,_=d?cu(l,d+a):a,b=D=N=void 0,N=an(_),D=parseFloat(_)*(N&&~_.indexOf("rad")?nd:1)-v,b=v+D+"deg",N&&("short"===(N=_.split("_")[1])&&(D%=360)!==D%180&&(D+=D<0?360:-360),"cw"===N&&D<0?D=(D+36e9)%360-360*~~(D/360):"ccw"===N&&0<D&&(D=(D-36e9)%360-360*~~(D/360))),y._pt=_=new Yh(y._pt,A,w,v,D,qu),_.e=b,_.u="deg",y._props.push(w);continue}if("smoothOrigin"===c){vd(this,p,"smooth",p.smooth,a);continue}if("force3D"===c){p[c]=a;continue}if("transform"===c){S=B=T=M=k=C=D=I=O=N=z=void 0;var C,k,M,B,T,S,z=this,N=a,O=t,I=dh({},O._gsap),D=O.style;for(k in I.svg?(M=O.getAttribute("transform"),O.setAttribute("transform",""),D[mn]=N,C=Nd(O,1),yd(O,mn),O.setAttribute("transform",M)):(M=getComputedStyle(O)[mn],D[mn]=N,C=Nd(O,1),D[mn]=M),ed)(M=I[k])!==(T=C[k])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(k)<0&&(B=hn(M)!==(S=hn(T))?xd(O,k,M,S):parseFloat(M),T=parseFloat(T),z._pt=new Yh(z._pt,C,k,B,T-B,Qu),z._pt.u=S||0,z._props.push(k));dh(C,I);continue}}else c in x||(c=pd(c)||c);if(f||(s||0===s)&&(l||0===l)&&!sd.test(a)&&c in x)s=s||0,(u=(o+"").substr((l+"").length))!==(h=hn(a)||(c in Cc.units?Cc.units[c]:u))&&(l=xd(t,c,o,h)),this._pt=new Yh(this._pt,f?p:x,c,l,(d?cu(l,d+s):s)-l,f||"px"!==h&&"zIndex"!==c||!1===e.autoRound?Qu:Zu),this._pt.u=h||0,u!==h&&"%"!==h&&(this._pt.b=o,this._pt.r=Hu);else if(c in x)lh.call(this,t,c,o,d?d+a:a);else if(c in t)this.add(t,c,o||t[c],d?d+a:a,r,i);else if("parseTransform"!==c){qc(c,a);continue}f||(c in x?m.push(c,0,x[c]):m.push(c,1,o||t[c])),P.push(c)}L&&Uh(this)},render:function(t,e){if(e.tween._time||!Ah())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Ed,aliases:ld,getSetter:function(t,e,n){var r=ld[e];return(e=r&&r.indexOf(",")<0?r:e)in ed&&e!==cd&&(t._gsap.x||Ed(t,"x"))?n&&vh===n?"scale"===e?eh:th:(vh=n||{})&&("scale"===e?nh:rh):t.style&&!Dc(t.style[e])?Ku:~e.indexOf("-")?$u:Dh(t,e)},core:{_removeProperty:yd,_getMatrix:zd}}),Rd=($h.utils.checkPrefix=pd,$h.core.getStyleSaver=ah,xh=sl((Re="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(Pe="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){ed[t]=1}),sl(Pe,function(t){Cc.units[t]="deg",Bd[t]=1}),ld[xh[13]]=Re+","+Pe,sl("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){t=t.split(":");ld[t[1]]=xh[t[0]]}),sl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Cc.units[t]="px"}),$h.registerPlugin(Nn),$h.registerPlugin(Nn)||$h);Rd.core.Tween;let Ft=Math.sqrt(50),Rt=Math.sqrt(10),Wt=Math.sqrt(2);function Wd(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),r=r/Math.pow(10,i),r=r>=Ft?10:r>=Rt?5:r>=Wt?2:1;let o,a,s;return i<0?(s=Math.pow(10,-i)/r,o=Math.round(t*s),a=Math.round(e*s),o/s<t&&++o,a/s>e&&--a,s=-s):(s=Math.pow(10,i)*r,o=Math.round(t/s),a=Math.round(e/s),o*s<t&&++o,a*s>e&&--a),a<o&&.5<=n&&n<2?Wd(t,e,2*n):[o,a,s]}function Ud(t,e,n){return Wd(t=+t,e=+e,n=+n)[2]}function Yd(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function Gd(n){let o,a,i;function s(t,e,n=0,r=t.length){if(n<r){if(0!==o(e,e))return r;do{var i=n+r>>>1;a(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return i=2!==n.length?(o=Yd,a=(t,e)=>Yd(n(t),e),(t,e)=>n(t)-e):(o=n===Yd||n===function(t,e){return null==t||null==e?NaN:e<t?-1:t<e?1:t<=e?0:NaN}?n:Vd,a=n),{left:s,center:function(t,e,n=0,r=t.length){return r=s(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==o(e,e))return r;do{var i=n+r>>>1;a(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function Vd(){return 0}Fe=Gd(Yd),On=Fe.right,Gd(function(t){return null===t?NaN:+t}).center;let Ut=On;function Qd(t,e,n){(t.prototype=e.prototype=n).constructor=t}function qd(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function Hd(){}var Ye="\\s*([+-]?\\d+)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zd=/^#([0-9a-f]{3,8})$/,Xd=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Jd=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),Kd=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${Re}\\)$`),$d=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${Re}\\)$`),tf=new RegExp(`^hsl\\(${Re},${Pe},${Pe}\\)$`),ef=new RegExp(`^hsla\\(${Re},${Pe},${Pe},${Re}\\)$`),nf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rf(){return this.rgb().formatHex()}function of(){return this.rgb().formatRgb()}function af(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zd.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?sf(e):3===n?new uf(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?lf(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?lf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Xd.exec(t))?new uf(e[1],e[2],e[3],1):(e=Jd.exec(t))?new uf(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Kd.exec(t))?lf(e[1],e[2],e[3],e[4]):(e=$d.exec(t))?lf(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=tf.exec(t))?mf(e[1],e[2]/100,e[3]/100,1):(e=ef.exec(t))?mf(e[1],e[2]/100,e[3]/100,e[4]):nf.hasOwnProperty(t)?sf(nf[t]):"transparent"===t?new uf(NaN,NaN,NaN,0):null}function sf(t){return new uf(t>>16&255,t>>8&255,255&t,1)}function lf(t,e,n,r){return new uf(t=r<=0?e=n=NaN:t,e,n,r)}function cf(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof Hd?i:af(i))?new uf((i=i.rgb()).r,i.g,i.b,i.opacity):new uf:new uf(t,e,n,null==r?1:r);var i}function uf(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function hf(){return"#"+gf(this.r)+gf(this.g)+gf(this.b)}function df(){var t=ff(this.opacity);return(1===t?"rgb(":"rgba(")+pf(this.r)+`, ${pf(this.g)}, `+pf(this.b)+(1===t?")":`, ${t})`)}function ff(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function pf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gf(t){return((t=pf(t))<16?"0":"")+t.toString(16)}function mf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new bf(t,e,n,r)}function _f(t){var e,n,r,i,o,a,s,l;return t instanceof bf?new bf(t.h,t.s,t.l,t.opacity):(t=t instanceof Hd?t:af(t))?t instanceof bf?t:(e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=NaN,l=((o=Math.max(e,n,r))+i)/2,(s=o-i)?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=0<l&&l<1?0:a,new bf(a,s,l,t.opacity)):new bf}function bf(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function yf(t){return(t=(t||0)%360)<0?t+360:t}function vf(t){return Math.max(0,Math.min(1,t||0))}function Af(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function wf(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Qd(Hd,af,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rf,formatHex:rf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return _f(this).formatHsl()},formatRgb:of,toString:of}),Qd(uf,cf,qd(Hd,{brighter(t){return t=null==t?1/.7:Math.pow(1/.7,t),new uf(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new uf(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new uf(pf(this.r),pf(this.g),pf(this.b),ff(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hf,formatHex:hf,formatHex8:function(){return"#"+gf(this.r)+gf(this.g)+gf(this.b)+gf(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:df,toString:df})),Qd(bf,function(t,e,n,r){return 1===arguments.length?_f(t):new bf(t,e,n,null==r?1:r)},qd(Hd,{brighter(t){return t=null==t?1/.7:Math.pow(1/.7,t),new bf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new bf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new uf(Af(240<=t?t-240:120+t,n,e),Af(t,n,e),Af(t<120?240+t:t-120,n,e),this.opacity)},clamp(){return new bf(yf(this.h),vf(this.s),vf(this.l),ff(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var t=ff(this.opacity);return(1===t?"hsl(":"hsla(")+yf(this.h)+`, ${100*vf(this.s)}%, ${100*vf(this.l)}%`+(1===t?")":`, ${t})`)}}));let Yt=t=>()=>t;function xf(e,n){return function(t){return e+t*n}}function Ef(o){return 1==(o=+o)?Cf:function(t,e){return e-t?(n=t,r=e,i=o,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):Yt(isNaN(t)?e:t);var n,r,i}}function Cf(t,e){var n=e-t;return n?xf(t,n):Yt(isNaN(t)?e:t)}let Gt=function t(e){var a=Ef(e);function n(e,t){var n=a((e=cf(e)).r,(t=cf(t)).r),r=a(e.g,t.g),i=a(e.b,t.b),o=Cf(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return n.gamma=t,n}(1);function kf(s){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a=0;a<n;++a)e=cf(t[a]),r[a]=e.r||0,i[a]=e.g||0,o[a]=e.b||0;return r=s(r),i=s(i),o=s(o),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e+""}}}function Mf(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a=0;a<r;++a)i[a]=Df(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(t){for(a=0;a<r;++a)o[a]=i[a](t);return o}}function Bf(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}}function Tf(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Sf(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null!==e&&"object"==typeof e?e:{})n in t?r[n]=Df(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}kf(function(a){var s=a.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=a[e],r=a[e+1],i=0<e?a[e-1]:2*n-r,o=e<s-1?a[e+2]:2*r-n;return wf((t-e/s)*s,i,n,r,o)}}),kf(function(r){var i=r.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*i),n=r[(e+i-1)%i];return wf((t-e/i)*i,n,r[e%i],r[(e+1)%i],r[(e+2)%i])}});var zf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nf=new RegExp(zf.source,"g");function Of(t,r){var e,n,i,o,a,s=zf.lastIndex=Nf.lastIndex=0,l=-1,c=[],u=[];for(t+="",r+="";(e=zf.exec(t))&&(n=Nf.exec(r));)(i=n.index)>s&&(i=r.slice(s,i),c[l]?c[l]+=i:c[++l]=i),(e=e[0])===(n=n[0])?c[l]?c[l]+=n:c[++l]=n:(c[++l]=null,u.push({i:l,x:Tf(e,n)})),s=Nf.lastIndex;return s<r.length&&(i=r.slice(s),c[l]?c[l]+=i:c[++l]=i),c.length<2?u[0]?(a=u[0].x,function(t){return a(t)+""}):(o=r,function(){return o}):(r=u.length,function(t){for(var e,n=0;n<r;++n)c[(e=u[n]).i]=e.x(t);return c.join("")})}function If(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,o=n.slice();return function(t){for(r=0;r<i;++r)o[r]=e[r]*(1-t)+n[r]*t;return o}}function Df(t,e){var n=typeof e;return null==e||"boolean"==n?Yt(e):("number"==n?Tf:"string"==n?(n=af(e))?(e=n,Gt):Of:e instanceof af?Gt:e instanceof Date?Bf:(n=e,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(e)?Mf:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Sf:Tf:If))(t,e)}function jf(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}function Lf(t){return+t}var Pf=[0,1];function Ff(t){return t}function Rf(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Wf(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=Rf(t,r),n(e,i)):(r=Rf(r,t),n(i,e));return function(t){return i(r(t))}}function Uf(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Rf(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(t){var e=Ut(n,t,1,r)-1;return o[e](i[e](t))}}function Yf(){var n,r,e,i,o,a,s=Pf,l=Pf,c=Df,u=Ff;function h(){var e,n,t,r=Math.min(s.length,l.length);return u!==Ff&&(e=s[0],(n=s[r-1])<e&&(t=e,e=n,n=t),u=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?Uf:Wf,o=a=null,d}function d(t){return null==t||isNaN(t=+t)?e:(o=o||i(s.map(n),l,c))(n(u(t)))}return d.invert=function(t){return u(r((a=a||i(l,s.map(n),Tf))(t)))},d.domain=function(t){return arguments.length?(s=Array.from(t,Lf),h()):s.slice()},d.range=function(t){return arguments.length?(l=Array.from(t),h()):l.slice()},d.rangeRound=function(t){return l=Array.from(t),c=jf,h()},d.clamp=function(t){return arguments.length?(u=!!t||Ff,h()):u!==Ff},d.interpolate=function(t){return arguments.length?(c=t,h()):c},d.unknown=function(t){return arguments.length?(e=t,d):e},function(t,e){return n=t,r=e,h()}}var Gf,Vf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qf(t){var e;if(e=Vf.exec(t))return new qf({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]});throw new Error("invalid format: "+t)}function qf(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Hf(t,e){var n;return(e=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:[1<(n=t.slice(0,e)).length?n[0]+n.slice(2):n,+t.slice(e+1)]}function Zf(t){return(t=Hf(Math.abs(t)))?t[1]:NaN}function Xf(t,e){var n,e=Hf(t,e);return e?(n=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+n:n.length>e+1?n.slice(0,e+1)+"."+n.slice(e+1):n+new Array(e-n.length+2).join("0")):t+""}Qf.prototype=qf.prototype,qf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let Vt={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Xf(100*t,e),r:Xf,s:function(t,e){var n,r,i=Hf(t,e);return i?(n=i[0],(i=(i=i[1])-(Gf=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1)===(r=n.length)?n:r<i?n+new Array(i-r+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Hf(t,Math.max(0,e+i-1))[0]):t+""},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Jf(t){return t}var Kf=Array.prototype.map,$f=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function tp(t){var e,s,l,w=void 0===t.grouping||void 0===t.thousands?Jf:(s=Kf.call(t.grouping,Number),l=t.thousands+"",function(t,e){for(var n=t.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),r.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=s[i=(i+1)%s.length];return r.reverse().join(l)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",x=void 0===t.decimal?".":t.decimal+"",E=void 0===t.numerals?Jf:(e=Kf.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),o=void 0===t.percent?"%":t.percent+"",C=void 0===t.minus?"−":t.minus+"",k=void 0===t.nan?"NaN":t.nan+"";function a(t){var c=(t=Qf(t)).fill,u=t.align,h=t.sign,e=t.symbol,d=t.zero,f=t.width,p=t.comma,g=t.precision,m=t.trim,_=t.type,b=("n"===_?(p=!0,_="g"):Vt[_]||(void 0===g&&(g=12),m=!0,_="g"),(d||"0"===c&&"="===u)&&(d=!0,c="0",u="="),"$"===e?r:"#"===e&&/[boxX]/.test(_)?"0"+_.toLowerCase():""),y="$"===e?i:/[%p]/.test(_)?o:"",v=Vt[_],A=/[defgprs%]/.test(_);function n(t){var e,n,r,i=b,o=y;if("c"===_)o=v(t)+o,t="";else{var a=(t=+t)<0||1/t<0;if(t=isNaN(t)?k:v(Math.abs(t),g),m&&(t=(t=>{t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t})(t)),i=((a=a&&0==+t&&"+"!==h?!1:a)?"("===h?h:C:"-"===h||"("===h?"":h)+i,o=("s"===_?$f[8+Gf/3]:"")+o+(a&&"("===h?")":""),A)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){o=(46===r?x+t.slice(e+1):t.slice(e))+o,t=t.slice(0,e);break}}p&&!d&&(t=w(t,1/0));var s=i.length+t.length+o.length,l=s<f?new Array(f-s+1).join(c):"";switch(p&&d&&(t=w(l+t,l.length?f-o.length:1/0),l=""),u){case"<":t=i+t+o+l;break;case"=":t=i+l+t+o;break;case"^":t=l.slice(0,s=l.length>>1)+i+t+o+l.slice(s);break;default:t=l+i+t+o}return E(t)}return g=void 0===g?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),n.toString=function(){return t+""},n}return{format:a,formatPrefix:function(t,e){var n=a(((t=Qf(t)).type="f",t)),t=3*Math.max(-8,Math.min(8,Math.floor(Zf(e)/3))),r=Math.pow(10,-t),i=$f[8+t/3];return function(t){return n(r*t)+i}}}}function ep(t,e,n,r){n=+(n=n),i=(a=(o=+(o=e))<(i=+(i=t)))?Ud(o,i,n):Ud(i,o,n);var i,o,a,s,l,c=(a?-1:1)*(i<0?1/-i:i);switch((r=Qf(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN((l=c,l=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zf(u)/3)))-Zf(Math.abs(l)))))||(r.precision=l),ap(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN((u=c,s=Math.max(Math.abs(t),Math.abs(e)),u=Math.abs(u),s=Math.abs(s)-u,l=Math.max(0,Zf(s)-Zf(u))+1))||(r.precision=l-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(l=Math.max(0,-Zf(Math.abs(c))))||(r.precision=l-2*("%"===r.type))}return op(r)}function np(c){var u=c.domain;return c.ticks=function(t){var e=u(),n=e[0],e=e[e.length-1],t=null==t?10:t;if(!(0<(t=+t)))return[];if((n=+n)===(e=+e))return[n];var r=e<n,[i,o,a]=r?Wd(e,n,t):Wd(n,e,t);if(!(i<=o))return[];var s=o-i+1,l=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)l[t]=(o-t)/-a;else for(let t=0;t<s;++t)l[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)l[t]=(i+t)/-a;else for(let t=0;t<s;++t)l[t]=(i+t)*a;return l},c.tickFormat=function(t,e){var n=u();return ep(n[0],n[n.length-1],null==t?10:t,e)},c.nice=function(t){null==t&&(t=10);var e,n,r=u(),i=0,o=r.length-1,a=r[i],s=r[o],l=10;for(s<a&&(n=a,a=s,s=n,n=i,i=o,o=n);0<l--;){if((n=Ud(a,s,t))===e)return r[i]=a,r[o]=s,u(r);if(0<n)a=Math.floor(a/n)*n,s=Math.ceil(s/n)*n;else{if(!(n<0))break;a=Math.ceil(a*n)/n,s=Math.floor(s*n)/n}e=n}return c},c}function rp(){var e=Yf()(Ff,Ff);return e.copy=function(){return t=e,rp().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(e,arguments),np(e)}function ip(t){return t}var op=(Nn=tp({thousands:",",grouping:[3],currency:["$",""]})).format,ap=Nn.formatPrefix,sp=1,lp=2,cp=3,up=4,hp=1e-6;function dp(t){return"translate("+t+",0)"}function fp(t){return"translate(0,"+t+")"}function pp(e){return t=>+e(t)}function gp(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function mp(){return!this.__axis}function _p(f,p){var g=[],m=null,_=null,b=6,y=6,v=3,A="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,w=f===sp||f===up?-1:1,x=f===up||f===lp?"x":"y",E=f===sp||f===cp?dp:fp;function e(t){var e=null==m?p.ticks?p.ticks.apply(p,g):p.domain():m,n=null==_?p.tickFormat?p.tickFormat.apply(p,g):ip:_,r=Math.max(b,0)+v,i=p.range(),o=+i[0]+A,i=+i[i.length-1]+A,a=(p.bandwidth?gp:pp)(p.copy(),A),s=t.selection?t.selection():t,l=s.selectAll(".domain").data([null]),c=(e=s.selectAll(".tick").data(e,p).order()).exit(),u=e.enter().append("g").attr("class","tick"),h=e.select("line"),d=e.select("text"),l=l.merge(l.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),e=e.merge(u),h=h.merge(u.append("line").attr("stroke","currentColor").attr(x+"2",w*b)),d=d.merge(u.append("text").attr("fill","currentColor").attr(x,w*r).attr("dy",f===sp?"0em":f===cp?"0.71em":"0.32em"));t!==s&&(l=l.transition(t),e=e.transition(t),h=h.transition(t),d=d.transition(t),c=c.transition(t).attr("opacity",hp).attr("transform",function(t){return isFinite(t=a(t))?E(t+A):this.getAttribute("transform")}),u.attr("opacity",hp).attr("transform",function(t){var e=this.parentNode.__axis;return E((e&&isFinite(e=e(t))?e:a(t))+A)})),c.remove(),l.attr("d",f===up||f===lp?y?"M"+w*y+","+o+"H"+A+"V"+i+"H"+w*y:"M"+A+","+o+"V"+i:y?"M"+o+","+w*y+"V"+A+"H"+i+"V"+w*y:"M"+o+","+A+"H"+i),e.attr("opacity",1).attr("transform",function(t){return E(a(t)+A)}),h.attr(x+"2",w*b),d.attr(x,w*r).text(n),s.filter(mp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",f===lp?"start":f===up?"end":"middle"),s.each(function(){this.__axis=a})}return e.scale=function(t){return arguments.length?(p=t,e):p},e.ticks=function(){return g=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(g=null==t?[]:Array.from(t),e):g.slice()},e.tickValues=function(t){return arguments.length?(m=null==t?null:Array.from(t),e):m&&m.slice()},e.tickFormat=function(t){return arguments.length?(_=t,e):_},e.tickSize=function(t){return arguments.length?(b=y=+t,e):b},e.tickSizeInner=function(t){return arguments.length?(b=+t,e):b},e.tickSizeOuter=function(t){return arguments.length?(y=+t,e):y},e.tickPadding=function(t){return arguments.length?(v=+t,e):v},e.offset=function(t){return arguments.length?(A=+t,e):A},e}function bp(t){return _p(lp,t)}function yp(t){return _p(up,t)}var vp=Le(213);function Ap(t){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wp(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||kp(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function xp(t,e){return(xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ep(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ep=function(){return!!t})()}function Cp(t){return(t=>{if(Array.isArray(t))return Mp(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||kp(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function kp(t,e){var n;if(t)return"string"==typeof t?Mp(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mp(t,e):void 0}function Mp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}try{new Blob}catch(mi){console.warn("Not a browser, so FileSaver.js not available.")}var Bp={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Tp={LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT_BOTTOM:"right-bottom",RIGHT_TOP:"right-top"};function Sp(){try{new Blob}catch(t){alert("Blob not supported")}}function zp(t,e){return-1!==t.indexOf(e,t.length-e.length)}function Np(n,t,r,e){e?(t&&console.warn("File "+t+" overridden by value."),r.call(n,null,e)):t?zp(t,"json")?(0,Rs.Pq)(t,function(t,e){r.call(n,t,e)}):zp(t,"css")?(0,Rs.Qq)(t,function(t,e){r.call(n,t,e)}):r.call(n,"Unrecognized file type",null):r.call(n,"No filename",null)}function Op(t,e){var n,r=[];for(n in t){var i=t[n];i[e]=n,r.push(i)}return r}function Ip(t){return k.isArray(t)?k.map(t,Ip):k.isObject(t)?k.mapObject(t,function(t,e){return Ip(t)}):t}function Dp(t,e,n){return{x:Math.cos(-e)*(t.x-n.x)+Math.sin(-e)*(t.y-n.y)+n.x-t.x,y:-Math.sin(-e)*(t.x-n.x)+Math.cos(-e)*(t.y-n.y)+n.y-t.y}}function jp(t){return t<-Math.PI?t+2*Math.floor((t-Math.PI)/(-2*Math.PI))*Math.PI:t>Math.PI?t-2*Math.floor((t+Math.PI)/(2*Math.PI))*Math.PI:t}function Lp(t){return Math.PI/180*t}function Pp(t){t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2==1?t[e]:(t[e-1]+t[e])/2}function Fp(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function Rp(t){return t.ownerDocument}function Wp(t,e,n){var r=t.domain(),t=t.range(),i=tn(".vertical-legend-container"),o=(i.append("g").attr("class","legend-group"),i.select(".legend-group").attr("transform","translate(0, 10)")),a=(o.append("defs").attr("class","legend-defs").append("linearGradient").attr("id","legend-gradient").attr("x","0%").attr("y","0%").attr("x2","0%").attr("y2","100%"),o.append("rect").attr("class","legend-rect"),o.append("g").attr("class","legend-axis"),o.select(".legend-defs linearGradient"));a.selectAll("stop").remove(),a.selectAll("stop").data(Up(r,t)).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),o.select(".legend-rect").attr("x",0).attr("y",0).attr("width",19).attr("height",200).style("fill","url(#legend-gradient)");a=e(rp().domain([Math.min.apply(Math,Cp(r)),Math.max.apply(Math,Cp(r))]).range([0,200])).ticks(r.length).tickValues(r).tickFormat(function(t){return 1e9<=t?(t/1e9).toFixed(1)+"G":1e6<=t?(t/1e6).toFixed(1)+"M":1e3<=t?(t/1e3).toFixed(1)+"K":t.toFixed(2)});return o.select(".legend-axis").attr("transform","translate(".concat(19,", 0)")).call(a),"right"===n&&(o.select(".legend-axis").attr("transform","translate(".concat(38,", 0)")),o.select(".legend-rect").attr("transform","translate(".concat(38,", 0)"))),function(){return i.selectAll("*").remove()}}function Up(t,e){for(var n=t[0],r=t[t.length-1],i=t.map(function(t){return(t-n)/(r-n)*100}),o=[],a=0;a<t.length;a++)("string"==typeof e[a]||e[a]instanceof String)&&o.push({offset:"".concat(i[a],"%"),color:e[a]});return o}let V={set_options:function(t,e,n){if(null==t)return e;var r,i={};for(r in e){var o=r in t&&null!=t[r],a=(o?t:e)[r];n&&r in n&&(a=parseFloat(a),!isNaN(a)||o&&(console.warn("Bad float for option "+r),a=parseFloat(e[r]),!isNaN(a))||(console.warn("Bad float for default "+r),a=null)),i[r]=a}return i},remove_child_nodes:function(t){for(var e=t.node();e.hasChildNodes();)e.removeChild(e.lastChild)},load_css:function(t,n){return t&&(0,Rs.Qq)(t,function(t,e){t&&console.warn(t),n(e)}),!1},load_files:function(n,t,r){0===t.length&&r.call(n);for(var e=-1,i=t.length;++e<t.length;)Np(n,t[e].file,function(t,e){this.call(n,t,e),--i||r.call(n)}.bind(t[e].callback),t[e].value)},load_the_file:Np,make_class:function(){function n(t){var e;if(!(this instanceof n))return r=!0,e=new n(arguments),r=!1,e;"function"==typeof this.init&&this.init.apply(this,r?t:arguments)}var r;return n},class_with_optional_new:function(t){return new Proxy(t,{apply:function(t,e,n){return function(t,e,n){var r;return Ep()?Reflect.construct.apply(null,arguments):((r=[null]).push.apply(r,e),e=new(t.bind.apply(t,r)),n&&xp(e,n.prototype),e)}(t,Cp(n))}})},setup_defs:function(t,e){t.select("defs").remove();var n=(t=t.append("defs")).node();return n.parentNode.insertBefore(n,n.parentNode.firstChild),t.append("style").attr("type","text/css").text(e),t},draw_an_object:function(t,e,n,r,i,o,a,s){var l,c={};for(l in r)void 0===r[l]?console.warn("Undefined value for id "+l+" in object. Ignoring."):c[l]=r[l];t=t.select(e).selectAll(n).data(Op(c,i),function(t){return t[i]}),e=o?o(t.enter()).merge(t):t,a&&e.call(a),s&&t.exit().call(s)},draw_a_nested_object:function(t,e,n,r,i,o,a){t=t.selectAll(e).data(function(t){return Op(t[n],r)},function(t){return t[r]}),e=i?i(t.enter()).merge(t):t,o&&e.call(o),a&&t.exit().call(a)},make_array:function(t,e){var n,r=[];for(n in t){var i=Ip(t[n]);i[e]=n,r.push(i)}return r},make_array_ref:Op,compare_arrays:function(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!=e[n])return!1;return!0},arrayToObject:function(t){for(var e={},n=0,r=t.length;n<r;n++)for(var i=t[n],o=Object.keys(i),a=0,s=o.length;a<s;a++){var l=o[a];if(l in e)e[l][n]=i[l];else{for(var c=[],u=0;u<r;u++)c[u]=null;c[n]=i[l],e[l]=c}}return e},clone:Ip,extend:function(t,e,n){for(var r in void 0===n&&(n=!1),e){if(r in t&&!n)throw new Error("Attribute "+r+" already in object.");t[r]=e[r]}},uniqueConcat:function(t){var e=[];return t.forEach(function(t){t.forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),e},unique_strings_array:function(t){for(var e=[],n=0,r=t.length;n<r;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e},debounce:function(r,i,o){var a;return function(){var t=this,e=arguments,n=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||r.apply(t,e)},i),n&&r.apply(t,e)}},object_slice_for_ids:function(t,e){for(var n={},r=-1;++r<e.length;)n[e[r]]=Ip(t[e[r]]);return e.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset"),n},object_slice_for_ids_ref:function(t,e){for(var n={},r=-1;++r<e.length;)n[e[r]]=t[e[r]];return e.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset"),n},c_plus_c:function(t,e){return null===t||null===e||void 0===t||void 0===e?null:{x:t.x+e.x,y:t.y+e.y}},c_minus_c:function(t,e){return null===t||null===e||void 0===t||void 0===e?null:{x:t.x-e.x,y:t.y-e.y}},c_times_scalar:function(t,e){return{x:t.x*e,y:t.y*e}},download_json:function(t,e){Sp(),t=JSON.stringify(t),t=new Blob([t],{type:"application/json"}),(0,vp.saveAs)(t,e+".json")},load_json:function(t,n,e,r){window.File&&window.FileReader&&window.FileList&&window.Blob||n("The File APIs are not fully supported in this browser.",null);var i=new window.FileReader;if(i.onload=function(t){var e,t=t.target.result;try{e=JSON.parse(t)}catch(t){return void n(t,null)}n(null,e)},null!=e)try{e()}catch(t){console.warn(t)}i.onabort=function(t){try{r()}catch(t){console.warn(t)}},i.onerror=function(t){try{r()}catch(t){console.warn(t)}},i.readAsText(t)},load_json_or_csv:function(t,i,o,e,n,r){function a(e){var n,r,e=e.target.result;try{n=JSON.parse(e)}catch(t){r="JSON error: "+t;try{n=i(Js(e))}catch(t){return void o(r+"\nCSV error: "+t,null)}}o(null,n)}if(null!=r)return console.warn("Debugging load_json_or_csv"),a(r);if(window.File&&window.FileReader&&window.FileList&&window.Blob||o("The File APIs are not fully supported in this browser.",null),r=new window.FileReader,null!=e)try{e()}catch(t){console.warn(t)}r.onabort=function(t){try{n()}catch(t){console.warn(t)}},r.onerror=function(t){try{n()}catch(t){console.warn(t)}},r.onload=a,r.readAsText(t)},downloadSvg:function(t,e,n){Sp(),e=(new XMLSerializer).serializeToString(e.node()),e='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+(e=n?Za().xml(e):e),n=new Blob([e],{type:"image/svg+xml"}),(0,vp.saveAs)(n,t+".svg")},downloadPng:function(e,t){Sp();var n='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+(new XMLSerializer).serializeToString(t.node()),r=document.createElement("canvas"),i=r.getContext("2d"),o=(t=t.node().getBBox()).width+t.x,t=t.height+t.y,a=(o<1e4&&t<1e4?(r.width=o,r.height=t):r.width>r.height?(r.width=1e4,r.height=t/o*1e4):(r.width=o/t*1e4,r.height=1e4),new Image);a.src="data:image/svg+xml;base64,"+btoa(n),a.onload=function(){i.fillStyle="#FFF",i.fillRect(0,0,r.width,r.height),i.drawImage(a,0,0,r.width,r.height),r.toBlob(function(t){(0,vp.saveAs)(t,e+".png")})}},downloadGif:function(n,r){var t;Sp(),document.querySelector("#legend-config-modal").children.length||((t=document.getElementById("legend-config-modal"))&&(t.innerHTML='\n    <div class="modal-content">\n      <h3>Select Legend Options</h3>\n\n      <label for="legendPosition">Legend Position:</label>\n      <select id="legendPosition">\n        <option value="'.concat(Tp.RIGHT_BOTTOM,'">Right Bottom</option>\n        <option value="').concat(Tp.LEFT_BOTTOM,'">Left Bottom</option>\n        <option value="').concat(Tp.RIGHT_TOP,'">Right Top</option>\n        <option value="').concat(Tp.LEFT_TOP,'">Left Top</option>\n      </select>\n\n      <br>\n\n      <label for="legendOrientation">Legend Orientation:</label>\n      <select id="legendOrientation">\n        <option value="').concat(Bp.VERTICAL,'">Vertical</option>\n        <option value="').concat(Bp.HORIZONTAL,'">Horizontal</option>\n      </select>\n\n      <br>\n\n      <div class="modal-actions">\n        <button id="confirm-btn" class="modal-button confirm">Confirm</button>\n        <button id="cancel-btn" class="modal-button cancel">Cancel</button>\n      </div>\n    </div>\n  ')),document.getElementById("confirm-btn").addEventListener("click",function(){var t=document.getElementById("legendPosition").value,e=document.getElementById("legendOrientation").value;document.getElementById("legend-config-modal").style.display="none",document.getElementById("legend-config-modal-overlay").style.display="none",function(n,r){var i,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Tp.LEFT_BOTTOM,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Bp.VERTICAL,h=(()=>{var t=document.createElement("div");return t.setAttribute("id","loadingIndicator"),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0, 0, 0, 0.5)",t.style.zIndex="1000",t.style.justifyContent="center",t.style.alignItems="center",t.style.display="flex",t.style.color="white",t.style.fontSize="24px",t.textContent="Exporting...",document.body.appendChild(t),{removeLoadingIndicator:function(){return document.body.removeChild(t)}}})().removeLoadingIndicator,t=document.createElement("canvas"),d=t.getContext("2d",{willReadFrequently:!0}),f=window.URL||window.webkitURL||window,e=document.querySelector("rect#canvas").getBoundingClientRect(),o=e.width,a=e.height,s=e.left,e=e.top,l=window.innerWidth,p=window.innerHeight,g=l<o?l:o,m=p<a?p:a,_={x:l<o?window.scrollX:s,y:p<a?window.scrollY:e},b=(t.width=g,t.height=m,new Image),y=new Image,v=(()=>{var t=("vertical"===u?(i="left-top"===c||"left-bottom"===c?Wp(r,bp,"left"):Wp(r,yp,"right"),document.querySelector(".vertical-legend-container")):document.querySelector(".legend-container")).cloneNode(!0),e=(n=wp(u===Bp.HORIZONTAL?[225,36]:[56,225],2))[0],n=n[1],e=(t.setAttribute("viewBox","0 0 ".concat(e," ").concat(n)),t.setAttribute("width",e),t.setAttribute("height",n),(new XMLSerializer).serializeToString(t)),n=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return f.createObjectURL(n)})();y.src=v,fetch("https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.worker.js").then(function(t){if(t.ok)return t.blob();throw new Error("Network response was not OK")}).then(function(t){var s=new(Ks())({workers:4,quality:10,workerScript:URL.createObjectURL(t),width:g,height:m}),l=function(o){var a,t;o<20?((t=document.querySelector(".escher-svg").cloneNode(!0)).setAttribute("viewBox","".concat(_.x," ").concat(_.y," ").concat(g," ").concat(m)),t.setAttribute("width",g),t.setAttribute("height",m),t=(new XMLSerializer).serializeToString(t),t=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),a=f.createObjectURL(t),b.onload=function(){var t,e;d.clearRect(0,0,g,m),d.drawImage(b,0,0,g,m);var n=wp(u===Bp.HORIZONTAL?[225,36]:[56,225],2),r=n[0],i=n[1];switch(c){case"left-top":e=t=5;break;case"right-top":t=g-r-5,e=5;break;case"left-bottom":e=m-i-(t=5);break;case"right-bottom":t=g-r-5,e=m-i-5}d.drawImage(y,t,e,r,i),s.addFrame(d,{copy:!0,DELAY:100}),f.revokeObjectURL(a),f.revokeObjectURL(v),setTimeout(function(){requestAnimationFrame(function(){return l(o+1)})},100)},b.src=a):(s.on("finished",function(t){f.revokeObjectURL(v);var t=URL.createObjectURL(t),e=document.createElement("a");e.href=t,e.download="".concat(n,".gif"),document.body.appendChild(e),e.click(),document.body.removeChild(e),h(),i&&i()}),s.render())};l(0)})}(n,r,t,e)}),document.getElementById("cancel-btn").addEventListener("click",function(){document.getElementById("legend-config-modal").style.display="none",document.getElementById("legend-config-modal-overlay").style.display="none"})),document.getElementById("legend-config-modal").style.display="block",document.getElementById("legend-config-modal-overlay").style.display="block"},rotate_coords_recursive:function(t,e,n){return t.map(function(t){return Dp(t,e,n)})},rotate_coords:Dp,get_angle:function(t){var e=t[1].x-t[0].x,t=t[1].y-t[0].y;return 0==e&&0<=t?Math.PI/2:0==e&&t<0?3*Math.PI/2:0<=e&&0<=t?Math.atan(t/e):0<=e?Math.atan(t/e)+2*Math.PI:Math.atan(t/e)+Math.PI},to_degrees:function(t){return 180*t/Math.PI},angleNorm:jp,to_radians:Lp,to_radians_norm:function(t){return jp(Lp(t))},angle_for_event:function(t,e,n){var r=Math.atan2(e.x-n.x,n.y-e.y);return Math.atan2(e.x-n.x+t.x,n.y-e.y-t.y)-r},distance:function(t,e){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))},check_undefined:function(n,r){r.forEach(function(t,e){void 0===n[e]&&console.error("Argument is undefined: ".concat(r[e]))})},compartmentalize:function(t,e){return"".concat(t,"_").concat(e)},decompartmentalize:function(t){var e=/(.*)\[([a-z0-9]{1,2})\]$/.exec(t);return null!==e?e.slice(1,3):[t,null]},mean:function(t){return t.reduce(function(t,e){return t+e})/t.length},median:Pp,quartiles:function(t){t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return 1===t.length?[t[0],t[0],t[0]]:t.length%2==1?[Pp(t.slice(0,e)),t[e],Pp(t.slice(e+1))]:[Pp(t.slice(0,e)),(t[e-1]+t[e])/2,Pp(t.slice(e))]},random_characters:Fp,generate_map_id:function(){return Fp(12)},check_for_parent_tag:function(t,e){for(t instanceof y&&(t=t.node());null!==t.parentNode;)if(void 0!==(t=t.parentNode).tagName&&t.tagName.toLowerCase()===e.toLowerCase())return!0;return!1},name_to_url:function(t,e){return(t=null!=e?[e=e.replace(/^\/|\/$/g,""),t].join("/"):t).replace(/^\/|\/$/g,"")+".json"},get_document:Rp,get_window:function(t){return Rp(t).defaultView},d3_transform_catch:function(t){if(-1!==t.indexOf("skew")||-1!==t.indexOf("matrix"))throw new Error("d3_transform_catch does not work with skew or matrix");var e=/translate\s*\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)/.exec(t),n=(r=k.isNull(e))?0:Number(e[1]),r=r?0:Number(e[2]),e=/rotate\s*\(\s*([0-9.-]+)\s*\)/.exec(t),e=k.isNull(e)?0:Number(e[1]),t=/scale\s*\(\s*([0-9.-]+)\s*\)/.exec(t);return{translate:[n,r],rotate:e,scale:k.isNull(t)?0:Number(t[1])}},process_reaction_data:function(t){var e,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=(t=t instanceof Array?t:[t])[0];for(e in i)i.hasOwnProperty(e)&&("object"===Ap(n=Number(i[e]))&&null!==n?processObject(n):"number"==typeof n&&Math.abs(n)<r&&(i[e]=0));return[i]},handle_animation:function(t,e,n,o,a){var s=n.get("show_reaction_data_animation"),l=n.get("animation_line_style");t.forEach(function(t){var e,n,r,i=t.target;t.isIntersecting?(t=i.__data__,o&&s&&t.data&&(n=t.data,e=a.reaction_animation_duration(n),n=2*a.reaction_size(n),n=("dashed"===l?"".concat(n,", "):"2, ").concat(n),i.animation&&i.animation.data!==e&&(i.animation.kill(),i.animation=null),i.animation?(i.setAttribute("stroke-dasharray",n),i.animation.play()):(r=i.getTotalLength(),t=t.data_string.startsWith("-")?1:-1,i.setAttribute("stroke-dasharray",n),i.animation=Rd.to(i,{strokeDashoffset:t*r*2,repeat:-1,ease:"none",immediateRender:!0,duration:e*r/100,data:e})))):i.animation&&(i.removeAttribute("stroke-dasharray"),i.animation.pause())})},update_color_legends:function(t,e){var n=t.domain(),t=t.range(),r=tn(".legend-container"),i=r.select(".legend-group"),o=((o=i.select(".legend-defs linearGradient")).selectAll("stop").remove(),o.selectAll("stop").data(Up(n,t)).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),i.select(".legend-rect").attr("x",0).attr("y",0).attr("width",200).attr("height",19).style("fill","url(#legend-gradient)"),rp().domain([Math.min.apply(Math,Cp(n)),Math.max.apply(Math,Cp(n))]).range([0,200])),t=_p(cp,o).ticks(n.length).tickValues(n).tickFormat(function(t){return 1e9<=t?(t/1e9).toFixed(1)+"G":1e6<=t?(t/1e6).toFixed(1)+"M":1e3<=t?(t/1e3).toFixed(1)+"K":t.toFixed(2)});i.select(".legend-axis").attr("transform","translate(0, ".concat(19,")")).call(t),e?r.style("display","block"):r.style("display","none")},get_current_date:function(){var t=(n=new Date).getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),n=String(n.getDate()).padStart(2,"0");return"".concat(t,"-").concat(e,"-").concat(n)},get_local_storage_item:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage.getItem(t)}catch(t){console.warn("LocalStorage is not available.",t)}return e}},Qt=V.make_class(),qt=(Qt.prototype={init:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];this.div=t,this.map=e,this.displacement=n,this.shouldReposition=r,this.visible=!0,this.hide()},is_visible:function(){return this.visible},place:function(t){this.div.style("display",null);var e=this.map.zoomContainer.windowTranslate,n=this.map.zoomContainer.windowScale,r=this.map.get_size();{var i;this.shouldReposition?(i=Math.max(20,Math.min(r.width-270,n*t.x+e.x-this.displacement.x)),r=Math.max(20,Math.min(r.height-40,n*t.y+e.y-this.displacement.y)),this.div.style("position","absolute").style("display","block").style("left","".concat(i,"px")).style("top","".concat(r,"px"))):this.div.style("position","absolute").style("display","block").style("left","".concat(n*t.x+e.x-this.displacement.x,"px")).style("top","".concat(n*t.y+e.y-this.displacement.y,"px"))}this.visible=!0},hide:function(){this.visible&&(this.div.style("display","none"),this.visible=!1)}},Qt);
/**
 * @license
 *
 * complete.ly 1.0.0
 * MIT Licensing
 * Copyright (c) 2013 Lorenzo Puccetti
 *
 * This Software shall be used for doing good things, not bad things.
 *
 *
 * Modified by Zachary King (c) 2014.
 *
 **/function Yp(t,l){var c=V.get_document(t),u=V.get_window(t),s=((l=l||{}).fontSize=l.fontSize||"13px",l.fontFamily=l.fontFamily||"sans-serif",l.promptInnerHTML=l.promptInnerHTML||"",l.color=l.color||"#333",l.hintColor=l.hintColor||"#aaa",l.backgroundColor=l.backgroundColor||"#fff",l.dropDownBorderColor=l.dropDownBorderColor||"#aaa",l.dropDownZIndex=l.dropDownZIndex||"100",l.dropDownOnHoverBackgroundColor=l.dropDownOnHoverBackgroundColor||"#ddd",c.createElement("input")),h=(s.type="text",s.spellcheck=!1,s.style.fontSize=l.fontSize,s.style.fontFamily=l.fontFamily,s.style.color=l.color,s.style.backgroundColor=l.backgroundColor,s.style.width="100%",s.style.outline="0",s.style.border="0",s.style.margin="0",s.style.padding="0",s.cloneNode()),e=(h.disabled="",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.borderColor="transparent",h.style.boxShadow="none",h.style.color=l.hintColor,s.style.backgroundColor="transparent",s.style.verticalAlign="top",s.style.position="relative",c.createElement("div")),n=(e.style.position="relative",e.style.outline="0",e.style.border="0",e.style.margin="0",e.style.padding="0",c.createElement("div"));if(n.style.position="absolute",n.style.outline="0",n.style.margin="0",n.style.padding="0",n.style.border="0",n.style.fontSize=l.fontSize,n.style.fontFamily=l.fontFamily,n.style.color=l.color,n.style.backgroundColor=l.backgroundColor,n.style.top="0",n.style.left="0",n.style.overflow="hidden",n.innerHTML=l.promptInnerHTML,n.style.background="transparent",void 0===c.body)throw"thisDocument.body is undefined. The library was wired up incorrectly.";c.body.appendChild(n);var d,f,p,r,i,g,m,_,o=n.getBoundingClientRect().right,b=(e.appendChild(n),n.style.visibility="visible",n.style.left="-"+o+"px",e.style.marginLeft=o+"px",e.appendChild(h),e.appendChild(s),c.createElement("div")),y=(b.style.position="absolute",b.style.visibility="hidden",b.style.outline="0",b.style.margin="0",b.style.padding="0",b.style.textAlign="left",b.style.fontSize=l.fontSize,b.style.fontFamily=l.fontFamily,b.style.backgroundColor=l.backgroundColor,b.style.zIndex=l.dropDownZIndex,b.style.cursor="default",b.style.borderStyle="solid",b.style.borderWidth="1px",b.style.borderColor=l.dropDownBorderColor,b.style.overflowX="hidden",b.style.whiteSpace="pre",b.style.overflowY="scroll",d=b,f=[],p=0,r=-1,i=null,g={hide:function(){d.style.visibility="hidden"},refresh:function(e,t){d.style.visibility="hidden",p=0,d.innerHTML="";var n=u.innerHeight||c.documentElement.clientHeight,r=d.parentNode.getBoundingClientRect(),i=r.top-6,n=n-r.bottom-6;f=[];for(var o=0;o<t.length;o++){var a=t[o].matches.filter(function(t){return 0==t.toLowerCase().indexOf(e.toLowerCase())});if(0!=a.length){var s=c.createElement("div");if(s.style.color=l.color,s.onmouseover=v,s.onmouseout=A,s.onmousedown=function(t){t.preventDefault()},s.ondblclick=w,s.__hint=a[0],s.id=t[o].id,s.innerHTML=t[o].html,f.push(s),d.appendChild(s),f.length>=x.display_limit){a=c.createElement("div");a.innerHTML=" "+(t.length-f.length)+" more",f.push(a),d.appendChild(a);break}}}0!==f.length&&(g.highlight(0),3*n<i?(d.style.maxHeight=i+"px",d.style.top="",d.style.bottom="100%"):(d.style.top="100%",d.style.bottom="",d.style.maxHeight=n+"px"),d.style.visibility="visible")},highlight:function(t){-1!=r&&f[r]&&(f[r].style.backgroundColor=l.backgroundColor),f[t].style.backgroundColor=l.dropDownOnHoverBackgroundColor,i=f[r=t]},move:function(t){return"hidden"===d.style.visibility?"":(p+t!==-1&&p+t!==f.length&&(p+=t,g.highlight(p)),f[p].__hint)},onmouseselection:function(){},get_current_row:function(){return i}});function v(){this.style.outline="1px solid #ddd"}function A(){this.style.outline="0"}function w(t){t.preventDefault(),g.onmouseselection(this.id)}y.onmouseselection=function(t){x.onEnter(t),x.input.focus()},e.appendChild(b),t.appendChild(e);var a,x={get_hint:function(t){return t},display_limit:1e3,onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){x.repaint()},startFrom:0,options:[],wrapper:e,input:s,hint:h,dropDown:b,prompt:n,setText:function(t){h.value=t,s.value=t},getText:function(){return s.value},hideDropDown:function(){y.hide()},repaint:function(){var t=s.value,e=x.startFrom,n=x.options,r=n.length,i=t.substring(e);_=t.substring(0,e),h.value="";for(var o=0;o<r;o++){var a=n[o].matches.filter(function(t){return 0==t.toLowerCase().indexOf(i.toLowerCase())});if(0!=a.length){h.value=x.get_hint(a[0]);break}}b.style.left=(t=_,void 0===m&&((m=c.createElement("span")).style.visibility="hidden",m.style.position="fixed",m.style.outline="0",m.style.margin="0",m.style.padding="0",m.style.border="0",m.style.left="0",m.style.whiteSpace="pre",m.style.fontSize=l.fontSize,m.style.fontFamily=l.fontFamily,m.style.fontWeight="normal",c.body.appendChild(m)),m.innerHTML=String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),m.getBoundingClientRect().right+"px"),y.refresh(i,x.options)}},E=s,C=function(t){x.onChange(t),x.repaint()};function k(){var t=E.value;a!==t&&C(a=t)}a=E.value,E.addEventListener("input",k,!1),E.addEventListener("keyup",k,!1),E.addEventListener("change",k,!1);return s.addEventListener("keydown",function(t){var e,n,r=(t=t||u.event).keyCode;33!=r&&34!=r&&(39==r||35==r||9==r?(9==r&&(t.preventDefault(),t.stopPropagation(),0==h.value.length)&&x.onTab(),0<h.value.length&&(s.value=h.value,e=a!=s.value,a=s.value,e)&&x.onChange(s.value)):13==r?(e=y.get_current_row().id,x.onEnter(e)):40==r?(""==(n=y.move(1))&&x.onArrowDown(),h.value=x.get_hint(n)):38==r?(""==(n=y.move(-1))&&x.onArrowUp(),h.value=x.get_hint(n),t.preventDefault(),t.stopPropagation()):h.value="")},!1),x}var Gp={value:()=>{}};function Vp(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Qp(r)}function Qp(t){this._=t}function qp(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Gp,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Qp.prototype=Vp.prototype={constructor:Qp,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=qp(i[n],t.name,e);else if(null==e)for(n in i)i[n]=qp(i[n],t.name,null);return this}for(;++a<s;)if(n=(n=(t=o[a]).type)&&((t,e)=>{for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value})(i[n],t.name))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new Qp(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};let Ht=Vp;function _n(t,e){if(t=(t=>{for(var e;e=t.sourceEvent;)t=e;return t})(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint)return(n=n.createSVGPoint()).x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y];if(e.getBoundingClientRect)return n=e.getBoundingClientRect(),[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop]}return[t.pageX,t.pageY]}let Zt={passive:!1},A={capture:!0,passive:!1};function Hp(t){t.stopImmediatePropagation()}function Zp(t){t.preventDefault(),t.stopImmediatePropagation()}function Xp(t){var e=t.document.documentElement,t=tn(t).on("dragstart.drag",Zp,A);"onselectstart"in e?t.on("selectstart.drag",Zp,A):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Jp(t,e){var n=t.document.documentElement,r=tn(t).on("dragstart.drag",null);e&&(r.on("click.drag",Zp,A),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let Xt=t=>()=>t;function Kp(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function $p(t){return!t.ctrlKey&&!t.button}function tg(){return this.parentNode}function eg(t,e){return null==e?{x:t.x,y:t.y}:e}function ng(){return navigator.maxTouchPoints||"ontouchstart"in this}function rg(){var n,r,i,o,s=$p,l=tg,g=eg,e=ng,m={},_=Ht("start","drag","end"),b=0,a=0;function y(t){t.on("mousedown.drag",c).filter(e).on("touchstart.drag",d).on("touchmove.drag",f,Zt).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(t,e){!o&&s.call(this,t,e)&&(e=v(this,l.call(this,t,e),t,e,"mouse"))&&(tn(t.view).on("mousemove.drag",u,A).on("mouseup.drag",h,A),Xp(t.view),Hp(t),i=!1,n=t.clientX,r=t.clientY,e("start",t))}function u(t){var e;Zp(t),i||(e=t.clientX-n,i=a<e*e+(e=t.clientY-r)*e),m.mouse("drag",t)}function h(t){tn(t.view).on("mousemove.drag mouseup.drag",null),Jp(t.view,i),Zp(t),m.mouse("end",t)}function d(t,e){if(s.call(this,t,e))for(var n,r=t.changedTouches,i=l.call(this,t,e),o=r.length,a=0;a<o;++a)(n=v(this,i,t,e,r[a].identifier,r[a]))&&(Hp(t),n("start",t,r[a]))}function f(t){for(var e,n=t.changedTouches,r=n.length,i=0;i<r;++i)(e=m[n[i].identifier])&&(Zp(t),e("drag",t,n[i]))}function p(t){var e,n,r=t.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(n=m[r[e].identifier])&&(Hp(t),n("end",t,r[e]))}function v(a,s,t,l,c,e){var u,h,d,f=_.copy(),p=_n(e||t,s);if(null!=(d=g.call(a,new Kp("beforestart",{sourceEvent:t,target:y,identifier:c,active:b,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),l)))return u=d.x-p[0]||0,h=d.y-p[1]||0,function t(e,n,r){var i,o=p;switch(e){case"start":m[c]=t,i=b++;break;case"end":delete m[c],--b;case"drag":p=_n(r||n,s),i=b}f.call(e,a,new Kp(e,{sourceEvent:n,subject:d,target:y,identifier:c,active:i,x:p[0]+u,y:p[1]+h,dx:p[0]-o[0],dy:p[1]-o[1],dispatch:f}),l)}}return y.filter=function(t){return arguments.length?(s="function"==typeof t?t:Xt(!!t),y):s},y.container=function(t){return arguments.length?(l="function"==typeof t?t:Xt(t),y):l},y.subject=function(t){return arguments.length?(g="function"==typeof t?t:Xt(t),y):g},y.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Xt(!!t),y):e},y.on=function(){var t=_.on.apply(_,arguments);return t===_?y:t},y.clickDistance=function(t){return arguments.length?(a=(t=+t)*t,y):Math.sqrt(a)},y}function ig(t){return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function og(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?ag(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ag(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function ag(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=ig(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=ig(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ig(t)?t:t+""))(r.key),r)}}function lg(t){return t}Kp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var cg=(()=>{function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.arrowContainer=t.append("g").attr("id","direction-arrow-container").attr("transform","translate(0,0)rotate(0)"),this.arrow=this.arrowContainer.append("path").classed("direction-arrow",!0).attr("d","M0 -5 L0 5 L20 5 L20 10 L30 0 L20 -10 L20 -5 Z").style("visibility","hidden").attr("transform","translate(30,0)scale(2.5)"),this.sel=t,this.center={x:0,y:0},this._setupDrag(),this.dragging=!1,this.isVisible=!1,this.show()}return t=e,(n=[{key:"setLocation",value:function(t){this.center=t;var e=V.d3_transform_catch(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+t.x+","+t.y+")rotate("+e.rotate+")")}},{key:"setRotation",value:function(t){var e=V.d3_transform_catch(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+e.translate+")rotate("+t+")")}},{key:"displaceRotation",value:function(t){var e=V.d3_transform_catch(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+e.translate+")rotate("+(e.rotate+t)+")")}},{key:"getRotation",value:function(){return V.d3_transform_catch(this.arrowContainer.attr("transform")).rotate}},{key:"toggle",value:function(t){this.isVisible=void 0===t?!this.isVisible:t,this.arrow.style("visibility",this.isVisible?"visible":"hidden")}},{key:"show",value:function(){this.toggle(!0)}},{key:"hide",value:function(){this.toggle(!1)}},{key:"right",value:function(){this.setRotation(0)}},{key:"down",value:function(){this.setRotation(90)}},{key:"left",value:function(){this.setRotation(180)}},{key:"up",value:function(){this.setRotation(270)}},{key:"_setupDrag",value:function(){var r,i,o=this,t=rg().on("start",function(t){r=t.x,i=t.y,t.sourceEvent.stopPropagation(),o.dragging=!0}).on("drag",function(t){var e=t.x-r,n=(r=t.x,t.y-i),e=(i=t.y,{x:e,y:n}),n=og(_n(t,o.sel.node()),2),t={x:n[0],y:n[1]},n=V.angle_for_event(e,t,o.center);o.displaceRotation(V.to_degrees(n))}).on("end",function(t){setTimeout(function(){o.dragging=!1},200)});this.arrowContainer.call(t)}}])&&sg(t.prototype,n),r&&sg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r})(),ug=/([.*+?^=!:${}()|[\]/\\])/g,hg=/\n\s*\n/g,dg=/\n\s*(\)*)\s*$/,fg=/([() ])(?:and|or)([)( ])/gi,pg=/[()]/g,gg=/\(\s*(\S+)\s*\)/g,mg=/\s+or\s+/i,_g=/\s+and\s+/i,bg=/(^|\()(\s*-?[0-9.]+\s+(?:or\s+-?[0-9.]+\s*)+)(\)|$)/gi,yg=/(^|\(|or\s)(\s*-?[0-9.]+\s+(?:and\s+-?[0-9.]+\s*)+)(\sor|\)|$)/gi;function vg(t){var e=Number(t);return isNaN(e)||parseFloat(t)!==e?null:e}function Ag(s,n){var t,r={},l=[null];for(t in s){l=s[t].map(function(){return null});break}for(var i in n)(()=>{var t=n[i],e=t.bigg_id,a={};t.genes.forEach(function(o){["bigg_id","name"].forEach(function(t){var e=s[o[t]]||V.clone(l),n=a[o.bigg_id];if(void 0===n)a[o.bigg_id]=e;else for(var r=0;r<e.length;r++){var i=e[r];null!==i&&(n[r]=i)}})}),r[e]=a})();return r}function wg(t){return isFinite(t)?t:null}function xg(t,e,n){if(null===t)return null;e=-1!==e.indexOf("abs");if(1===t.length)return null===(o=vg(t[0]))?null:(o=o,e?Math.abs(o):o);if(2!==t.length)throw new Error("Data array must be of length 1 or 2");var r,i,o=t.map(vg);if(null===o[0]||null===o[1])return null;if("diff"===n)return t=o[0],i=o[1],e?Math.abs(i-t):i-t;if("fold"===n)return wg((i=o[0],t=o[1],r=e,0===i||0===t?null:(i=i<=t?t/i:-i/t,r?Math.abs(i):i)));if("log2_fold"===n)return wg((t=o[0],r=o[1],e=e,0===t||r/t<0?null:(r=Math.log(r/t)/Math.log(2),e?Math.abs(r):r)));throw new Error("Bad data compare_style: "+n)}function Eg(t){return null!==t&&null!==t[0]&&t[0]<0}function Cg(t,i,o,a,s,l){var c=t,u=null===i,h={};return o.forEach(function(t){var e,n,r,t=t.bigg_id;t in h||(h[t]=!0,u?c=Bg(c,t,t+"\n"):t in i&&(n=null===(r=xg(e=i[t],a,l))?lg:op(".3g"),1===e.length?c=Bg(c,t,t+" ("+d(e[0],n)+")\n"):2===e.length&&(r=k.any(e,function(t){return null!==vg(t)})?t+" ("+d(e[0],n)+", "+d(e[1],n)+": "+d(r,n)+")\n":t+" ("+d(e[0],n)+", "+d(e[1],n)+")\n",c=Bg(c,t,r))))}),(c=c.replace(hg,"\n").replace(dg,"$1")).split("\n").map(function(t){for(var e=0,n=o.length;e<n;e++){var r=o[e];if(-1!==t.indexOf(r.bigg_id))return"name"===s&&(t=Bg(t,r.bigg_id,r.name)),{bigg_id:r.bigg_id,name:r.name,text:t}}return{bigg_id:null,name:null,text:t}});function d(t,e){return null===t?"nd":e(t).replace("−","-")}}function kg(t,e){var n,r;return null===t?i(null):1===t.length?(n=null===e?lg:op(".3g"),i(t[0],n)):2===t.length?(n=null===e?lg:op(".3g"),r=i(t[0],n),(r+=", "+i(t[1],n))+": "+i(e,n)):"";function i(t,e){return null===t?"(nd)":e(t).replace("−","-")}}function Mg(t,e,i){var n=[null],r=1;for(s in e){r=(n=e[s].map(function(){return null})).length;break}if(""==t)return V.clone(n);for(var o=[],a=0;a<r;a++){var s,l=t,c=!0;for(s in e){var u=vg(e[s][a]);null===u?u=0:c=!1,l=Bg(l,s,u)}if(c)o.push(null);else{for(;;){var h=l;if((h=(h=(h=h.replace(gg," $1 ")).replace(bg,function(t,e,n,r){return e+n.split(mg).map(parseFloat).reduce(function(t,e){return t+e})+r})).replace(yg,function(t,e,n,r){n=n.split(_g).map(parseFloat);return e+("min"==i?Math.min.apply(null,n):n.reduce(function(t,e){return t+e})/n.length)+r}))==l)break;l=h}var d=Number(l);isNaN(d)?(console.warn("Could not evaluate "+t),o.push(null)):o.push(d)}}return o}function Bg(t,e,n){e="(^|[\\s\\(\\)])"+e.replace(ug,"\\$1")+"([\\s\\(\\)]|$)";return t.replace(new RegExp(e,"g"),"$1"+n+"$2")}let v={importAndCheck:function(t,e,n){if(!t)return null;if(-1===["reaction_data","metabolite_data","gene_data"].indexOf(e))throw new Error("Invalid name argument: "+e);if(null===(t=t instanceof Array?t:[t])||1===t.length||2===t.length||console.warn("Bad data style: "+e),t=V.arrayToObject(t),"gene_data"===e){if(void 0===n)throw new Error("Must pass all_reactions argument for gene_data");t=Ag(t,n)}return t},floatForData:xg,reverse_flux_for_data:Eg,gene_string_for_data:Cg,text_for_data:kg,csv_converter:function(t){var e=t[0].length,r=[];if(e<2||3<e)throw new Error("CSV file must have 2 or 3 columns");for(var n=1;n<e;n++)r[n-1]={};return t.slice(1).forEach(function(t){for(var e=1,n=t.length;e<n;e++)r[e-1][t[0]]=t[e]}),r},genes_for_gene_reaction_rule:function(t){return t=t.replace(fg,"$1$2").replace(pg,"").split(" ").filter(function(t){return""!=t}),V.unique_strings_array(t)},evaluate_gene_reaction_rule:Mg,replace_gene_in_rule:Bg,apply_reaction_data_to_reactions:function(r,i,o,a,t){var s,l,c;return k.isUndefined(t)&&(t=Object.keys(r)),null===i?(t.map(function(t){for(l in(s=r[t]).data=null,s.data_string="",s.segments)(c=s.segments[l]).data=null;s.gene_string=null}),!1):(t.map(function(t){s=r[t];var t=i[s.bigg_id]||i[s.name]||null,e=xg(t,o,a),n=Eg(t),t=kg(t,e);for(l in s.data=e,s.data_string=t,s.reverse_flux=n,s.gene_string=null,s.segments)(c=s.segments[l]).data=s.data,c.reverse_flux=s.reverse_flux}),!0)},apply_metabolite_data_to_nodes:function(r,i,o,a,t){return k.isUndefined(t)&&(t=Object.keys(r)),null===i?(t.map(function(t){r[t].data=null,r[t].data_string=""}),!1):(t.map(function(t){var t=r[t],e=i[t.bigg_id]||i[t.name]||null,n=xg(e,o,a),e=kg(e,n);t.data=n,t.data_string=e}),!0)},apply_gene_data_to_reactions:function(l,c,u,h,d,f,t){if(k.isUndefined(t)&&(t=Object.keys(l)),null===c)return t.map(function(t){var e,n=l[t];for(e in n.data=null,n.data_string="",n.reverse_flux=!1,n.segments)n.segments[e].data=null;n.gene_string=null}),!1;var e,p=[null];for(e in c){for(var n in c[e]){p=c[e][n].map(function(){return null});break}break}return t.map(function(t){var e,n,r=l[t],t=r.gene_reaction_rule,i=c[r.bigg_id],i=k.isUndefined(i)?(e={},V.clone(p)):Mg(t,e=i,f),o=xg(i,u,d),a=Eg(i),i=kg(i,o);for(n in r.data=o,r.data_string=i,r.reverse_flux=a,r.segments){var s=r.segments[n];s.data=r.data,s.reverse_flux=r.reverse_flux}r.gene_string=Cg(t,e,r.genes,u,h,d)}),!0}};var Tg=V.make_class();Tg.from_cobra_json=function(t){if(!t.reactions||!t.metabolites)throw new Error("Bad model data.");for(var n={},e=0,r=t.genes.length;e<r;e++){var i=(l=t.genes[e]).id;n[i]=l}var o=new Tg;o.reactions={};for(e=0,r=t.reactions.length;e<r;e++){var i=(l=t.reactions[e]).id,a=V.clone(l);if(delete a.id,a.bigg_id=i,a.data_string="",a.genes=[],a.reversibility=a.lower_bound<0&&0<a.upper_bound,a.upper_bound<=0&&a.lower_bound<0)for(var s in a.metabolites)a.metabolites[s]=-a.metabolites[s];delete a.lower_bound,delete a.upper_bound,"gene_reaction_rule"in a&&v.genes_for_gene_reaction_rule(a.gene_reaction_rule).forEach(function(t){var e;t in n?((e=V.clone(n[t])).bigg_id=e.id,delete e.id,a.genes.push(e)):console.warn("Could not find gene for gene_id "+t)}),o.reactions[i]=a}o.metabolites={};for(e=0,r=t.metabolites.length;e<r;e++){var l,i=(l=t.metabolites[e]).id,c=V.clone(l);delete c.id,c.bigg_id=i,o.metabolites[i]=c}return o},Tg.build_reaction_string=function(t,e){function n(t){return 1==t?"":String(t)+" "}var r,i=[],o=[];for(r in t){var a=t[r];0<a?o.push(n(a)+r):i.push(n(Math.abs(a))+r)}var s=i.join(" + ");s+=e?" ↔ ":" → ";return s+=o.join(" + ")},Tg.prototype={init:function(){this.reactions={},this.metabolites={}},apply_reaction_data:function(t,e,n){v.apply_reaction_data_to_reactions(this.reactions,t,e,n)},apply_metabolite_data:function(t,e,n){v.apply_metabolite_data_to_nodes(this.metabolites,t,e,n)},apply_gene_data:function(t,e,n,r,i){v.apply_gene_data_to_reactions(this.reactions,t,e,n,r,i)}};let Jt=Tg;function Sg(t){return(Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zg(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?Ng(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ng(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Ng(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Og(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Sg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Sg(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Sg(t)?t:t+""))(r.key),r)}}var Ig=(()=>{function o(t,e,n,r){var i=this;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");t=t.append("div").attr("id","rxn-input");this.placed_div=qt(t,e,{x:240,y:0}),this.placed_div.hide(),this.completely=Yp(t.node(),{backgroundColor:"#eee"}),t.append("button").attr("class","button input-close-button").text("×").on("mousedown",function(){return i.hideDropdown()}),this.map=e;this.direction_arrow=new cg(e.sel),this.direction_arrow.setRotation(90),this.setUpMapCallbacks(e),this.zoomContainer=n,this.setUpZoomCallbacks(n),this.settings=r,this.toggle(!1),this.target_coords=null}return t=o,(e=[{key:"setUpMapCallbacks",value:function(t){var r=this;t.callback_manager.set("select_metabolite_with_id.input",function(t,e){r.is_active&&r.reload(t,e,!1)&&r.showDropdown(e),r.hideTarget()}),t.callback_manager.set("select_selectable.input",function(t,e,n){r.hideTarget(),1===t&&r.is_active&&n?r.reload(e,n,!1)&&r.showDropdown(n):r.toggle(!1)}),t.callback_manager.set("deselect_nodes",function(){r.direction_arrow.hide(),r.hideDropdown()}),t.callback_manager.set("before_svg_export",function(){r.direction_arrow.hide(),r.hideTarget()})}},{key:"setUpZoomCallbacks",value:function(t){}},{key:"is_visible",value:function(){return this.placed_div.is_visible()}},{key:"toggle",value:function(t){this.is_active=void 0===t?!this.is_active:t,this.is_active?(this.toggleStartReactionListener(!0),t=!0,k.isNull(this.target_coords)?t=this.reloadAtSelected():this.placed_div.place(this.target_coords),t&&(this.showDropdown(),this.map.set_status("Click on the canvas or an existing metabolite")),this.direction_arrow.show()):(this.toggleStartReactionListener(!1),this.hideDropdown(),this.map.set_status(null),this.direction_arrow.hide())}},{key:"showDropdown",value:function(t){var e=this;this.clear_escape=this.map.key_manager.addEscapeListener(function(){return e.hideDropdown()},!0),this.completely.input.blur(),this.completely.repaint(),this.completely.setText(""),this.completely.input.focus()}},{key:"hideDropdown",value:function(){this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.placed_div.hide(),this.completely.input.blur(),this.completely.hideDropDown()}},{key:"place",value:function(t){this.placed_div.place(t),this.direction_arrow.setLocation(t),this.direction_arrow.show()}},{key:"reloadAtSelected",value:function(){this.map.deselect_text_labels();var t,e=this.map.select_single_node();return null!==e&&(t={x:e.x,y:e.y},this.reload(e,t,!1))}},{key:"alreadyDrawn",value:function(t,e){for(var n in e)if(e[n].bigg_id===t)return!0;return!1}},{key:"reload",value:function(e,n,r){var i=this;if(r||e){if(this.place(n),null===this.map.cobra_model)return this.completely.setText("Cannot add: No model."),!1;var t,o,a="name"===this.settings.get("identifiers_on_map"),s=this.settings.get("allow_building_duplicate_reactions"),l=[],c=this.map.cobra_model.reactions,u=this.map.cobra_model.metabolites,h=this.map.reactions,d=this.map.has_data_on_reactions,f=e?a?e.name:e.bigg_id:"",p={};for(t in c){var g=c[t],m=g.name,_=a?m:t;if(s||!this.alreadyDrawn(t,h))for(var b in g.metabolites)if((r||b===e.bigg_id)&&!(t in p)){var y={},v=[],A=void 0;if(a)for(A in g.metabolites){var w=u[A].name;y[w]=g.metabolites[A],v.push(w)}else for(A in y=V.clone(g.metabolites),g.metabolites)v.push(A);var b=k.flatten(g.genes.map(function(t){return[t.name,t.biggId]})),x=Jt.build_reaction_string(y,g.reversibility,g.lower_bound,g.upper_bound),b=[_].concat(v).concat(b).filter(function(t){return t});l.push(d?{reaction_data:g.data,html:"<b>"+_+"</b>: "+g.data_string,matches:b,id:t}:{html:"<b>"+_+"</b>\t"+(o=[f],x.replace(new RegExp("(^| )("+o.join("|")+")($| )","g"),"$1<b>$2</b>$3")),matches:b,id:t}),p[t]=!0}}this.completely.options=l.sort(d?function(t,e){return Math.abs(t.reaction_data)>Math.abs(e.reaction_data)?-1:1}:function(t,e){return t.html.toLowerCase()<e.html.toLowerCase()?-1:1}),this.completely.setText("");return this.completely.onEnter=function(t){this.setText(""),this.onChange(""),null!==(t=t)&&(r?i.map.new_reaction_from_scratch(t,n,i.direction_arrow.getRotation()):e.node_id in i.map.nodes?i.map.new_reaction_for_metabolite(t,e.node_id,i.direction_arrow.getRotation()):(console.error("Selected node no longer exists"),i.hideDropdown()))},!0}console.error("No selected node and not starting from scratch")}},{key:"toggleStartReactionListener",value:function(t){var e,n=this;if(void 0===t)this.start_reaction_listener=!this.start_reaction_listener;else{if(this.start_reaction_listener===t)return;this.start_reaction_listener=t}this.start_reaction_listener?(e=this.map.sel.node(),this.map.sel.on("click.start_reaction",function(t){n.direction_arrow.dragging||(t={x:(t=zg(_n(t,e),2))[0],y:t[1]},n.map.deselect_nodes(),n.map.deselect_text_labels(),n.reload(null,t,!0)&&n.showDropdown(t),n.showTarget(n.map,t))}),this.map.sel.style("cursor","pointer")):(this.map.sel.on("click.start_reaction",null),this.map.sel.style("cursor",null),this.hideTarget())}},{key:"hideTarget",value:function(){this.target_coords&&this.map.sel.selectAll(".start-reaction-target").remove(),this.target_coords=null}},{key:"showTarget",value:function(t,e){t=t.sel.selectAll(".start-reaction-target").data([12,5]);t.enter().append("circle").classed("start-reaction-target",!0).attr("r",function(t){return t}).style("stroke-width",4).merge(t).style("visibility","visible").attr("transform","translate("+e.x+","+e.y+")"),this.target_coords=e}}])&&Og(t.prototype,e),n&&Og(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();function Dg(t){return(Dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Dg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Dg(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Dg(t)?t:t+""))(r.key),r)}}var Lg=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return e=t,(n=[{key:"set",value:function(t,e){void 0===this.callbacks&&(this.callbacks={}),void 0===this.callbacks[t]&&(this.callbacks[t]=[]),this.callbacks[t].push(e)}},{key:"remove",value:function(t){void 0===this.callbacks||0===Object.keys(this.callbacks).length?console.warn("No callbacks to remove"):delete this.callbacks[t]}},{key:"run",value:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(void 0!==this.callbacks)for(var o in this.callbacks)o.split(".")[0]===t&&this.callbacks[o].forEach(function(t){t.apply(e,r)})}}])&&jg(e.prototype,n),r&&jg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r})();function Pg(t){return((t=Math.exp(t))+1/t)/2}let Kt=function n(h,d,f){function t(t,e){var r,i,o,a=t[0],s=t[1],l=t[2],t=e[0],n=e[2],c=t-a,u=e[1]-s,t=c*c+u*u;return(n=t<1e-12?(o=Math.log(n/l)/h,function(t){return[a+t*c,s+t*u,l*Math.exp(h*t*o)]}):(r=Math.sqrt(t),e=(n*n-l*l+f*t)/(2*l*d*r),t=(n*n-l*l-f*t)/(2*n*d*r),i=Math.log(Math.sqrt(e*e+1)-e),o=(Math.log(Math.sqrt(t*t+1)-t)-i)/h,function(t){var t=t*o,e=Pg(i),n=l/(d*r)*(e*(n=h*t+i,((n=Math.exp(2*n))-1)/(n+1))-(n=i,((n=Math.exp(i))-1/n)/2));return[a+n*c,s+n*u,l*e/Pg(h*t+i)]})).duration=1e3*o*h/Math.SQRT2,n}return t.rho=function(t){var t=Math.max(.001,+t),e=t*t;return n(t,e,e*e)},t}(Math.SQRT2,2,4);var Fg,Rg,Wg=0,Ug=0,Yg=0,Gg=1e3,Vg=0,Qg=0,qg=0,Hg="object"==typeof performance&&performance.now?performance:Date,Zg="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xg(){return Qg||(Zg(Jg),Qg=Hg.now()+qg)}function Jg(){Qg=0}function Kg(){this._call=this._time=this._next=null}function $g(t,e,n){var r=new Kg;return r.restart(t,e,n),r}function tm(){Qg=(Vg=Hg.now())+qg,Wg=Ug=0;try{Xg(),++Wg;for(var t,e=Fg;e;)0<=(t=Qg-e._time)&&e._call.call(void 0,t),e=e._next;--Wg}finally{for(var n,r,i=Fg,o=1/(Wg=0);i;)i=i._call?(o>i._time&&(o=i._time),(n=i)._next):(r=i._next,i._next=null,n?n._next=r:Fg=r);Rg=n,nm(o),Qg=0}}function em(){var t=Hg.now(),e=t-Vg;Gg<e&&(qg-=e,Vg=t)}function nm(t){Wg||(Ug=Ug&&clearTimeout(Ug),24<t-Qg?(t<1/0&&(Ug=setTimeout(tm,t-Hg.now()-qg)),Yg=Yg&&clearInterval(Yg)):(Yg||(Vg=Hg.now(),Yg=setInterval(em,Gg)),Wg=1,Zg(tm)))}function rm(e,n,t){var r=new Kg;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}Kg.prototype=$g.prototype={constructor:Kg,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Xg():+n)+(null==e?0:+e),this._next||Rg===this||(Rg?Rg._next=this:Fg=this,Rg=this),this._call=t,this._time=n,nm()},stop:function(){this._call&&(this._call=null,this._time=1/0,nm())}};var im=Ht("start","end","cancel","interrupt"),om=[],am=0,sm=1,lm=2,cm=3,um=4,hm=5,dm=6;function fm(t,e,n,r,i,o){var a,s,l,c,u,h=t.__transition;if(h){if(n in h)return}else t.__transition={};function d(t){var e,n,r,i;if(l.state!==sm)return p();for(e in u)if((i=u[e]).name===l.name){if(i.state===cm)return rm(d);i.state===um?(i.state=dm,i.timer.stop(),i.on.call("interrupt",a,a.__data__,i.index,i.group),delete u[e]):+e<s&&(i.state=dm,i.timer.stop(),i.on.call("cancel",a,a.__data__,i.index,i.group),delete u[e])}if(rm(function(){l.state===cm&&(l.state=um,l.timer.restart(f,l.delay,l.time),f(t))}),l.state=lm,l.on.call("start",a,a.__data__,l.index,l.group),l.state===lm){for(l.state=cm,c=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(a,a.__data__,l.index,l.group))&&(c[++n]=i);c.length=n+1}}function f(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(p),l.state=hm,1),n=-1,r=c.length;++n<r;)c[n].call(a,e);l.state===hm&&(l.on.call("end",a,a.__data__,l.index,l.group),p())}function p(){for(var t in l.state=dm,l.timer.stop(),delete u[s],u)return;delete a.__transition}a=t,s=n,l={name:e,index:r,group:i,on:im,tween:om,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:am},((u=a.__transition)[s]=l).timer=$g(function(t){l.state=sm,l.timer.restart(d,l.delay,l.time),l.delay<=t&&d(t-l.delay)},0,l.time)}function pm(t,e){t=mm(t,e);if(t.state>am)throw new Error("too late; already scheduled");return t}function gm(t,e){t=mm(t,e);if(t.state>cm)throw new Error("too late; already running");return t}function mm(t,e){t=t.__transition;if(t=t&&t[e])return t;throw new Error("transition not found")}function _m(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name!==e?a=!1:(r=lm<n.state&&n.state<hm,n.state=dm,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]);a&&delete t.__transition}}var bm,ym=180/Math.PI,vm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Am(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ym,skewX:Math.atan(l)*ym,scaleX:a,scaleY:s}}function wm(d,f,p,g){function m(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,o,a,s,l,c,u=[],h=[];return t=d(t),e=d(e),r=t.translateX,i=t.translateY,l=e.translateX,a=e.translateY,s=u,o=h,r!==l||i!==a?(n=s.push("translate(",null,f,null,p),o.push({i:n-4,x:Tf(r,l)},{i:n-2,x:Tf(i,a)})):(l||a)&&s.push("translate("+l+f+a+p),o=t.rotate,r=u,n=h,o!==(i=e.rotate)?(180<o-i?i+=360:180<i-o&&(o+=360),n.push({i:r.push(m(r)+"rotate(",null,g)-2,x:Tf(o,i)})):i&&r.push(m(r)+"rotate("+i+g),s=t.skewX,l=u,a=h,s!==(o=e.skewX)?a.push({i:l.push(m(l)+"skewX(",null,g)-2,x:Tf(s,o)}):o&&l.push(m(l)+"skewX("+o+g),r=t.scaleX,i=t.scaleY,a=e.scaleY,s=u,l=h,r!==(o=e.scaleX)||i!==a?(c=s.push(m(s)+"scale(",null,",",null,")"),l.push({i:c-4,x:Tf(r,o)},{i:c-2,x:Tf(i,a)})):1===o&&1===a||s.push(m(s)+"scale("+o+","+a+")"),t=e=null,function(t){for(var e,n=-1,r=h.length;++n<r;)u[(e=h[n]).i]=e.x(t);return u.join("")}}}var xm=wm(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?vm:Am(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Em=wm(function(t){return null!=t&&((bm=bm||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),t=bm.transform.baseVal.consolidate())?Am((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):vm},", ",")",")");function Cm(t,e,n){var r=t._id;return t.each(function(){var t=gm(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return mm(t,r).value[e]}}function km(t,e){var n;return("number"==typeof e?Tf:e instanceof af?Gt:(n=af(e))?(e=n,Gt):Of)(t,e)}function Mm(r,i){var o,a;function t(){var e,n,t=i.apply(this,arguments);return o=t!==a?(a=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):o}return t._value=i,t}function Bm(r,i){var o,a;function t(){var e,n,t=i.apply(this,arguments);return o=t!==a?(a=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):o}return t._value=i,t}var Tm=y.prototype.constructor;function Sm(t){return function(){this.style.removeProperty(t)}}function zm(i,o,a){var s,l;function t(){var e,n,r,t=o.apply(this,arguments);return s=t!==l?(l=t)&&(e=i,n=t,r=a,function(t){this.style.setProperty(e,n.call(this,t),r)}):s}return t._value=o,t}function Nm(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var Om=0;function Im(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}Fe=y.prototype,Im.prototype={constructor:Im,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ja(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,fm(h[d],e,n,d,h,mm(s,n)));return new Im(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=$a(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=t.call(l,l.__data__,h,c),p=mm(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&fm(d,e,n,g,f,p);o.push(f),a.push(l)}return new Im(o,a,e,n)},selectChild:Fe.selectChild,selectChildren:Fe.selectChildren,filter:function(t){"function"!=typeof t&&(t=es(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Im(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),o=new Array(r),a=0;a<i;++a)for(var s,l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=l[d]||c[d])&&(h[d]=s);for(;a<r;++a)o[a]=e[a];return new Im(o,this._parents,this._name,this._id)},selection:function(){return new Tm(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++Om,r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&fm(a,t,n,c,s,{time:(a=mm(a,e)).time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease});return new Im(r,this._parents,t,n)},call:Fe.call,nodes:Fe.nodes,node:Fe.node,size:Fe.size,empty:Fe.empty,each:Fe.each,on:function(t,e){var n,r,i,o,a,s,l=this._id;return arguments.length<2?mm(this.node(),l).on.on(t):this.each((n=l,i=e,s=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?pm:gm,function(){var t=s(this,n),e=t.on;e!==o&&(a=(o=e).copy()).on(r,i),t.on=a}))},attr:function(t,e){var n=ps(t),r="transform"===n?Em:km;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,o){var a,s,l;return function(){var t,e,n=o(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===a&&e===s?l:(s=e,l=i(a=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,o){var a,s,l;return function(){var t,e,n=o(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===a&&e===s?l:(s=e,l=i(a=t,n));this.removeAttribute(r)}})(n,r,Cm(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,o,a=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===a?null:t===i?o:o=n(i=t,r)}}:function(e,n,r){var i,o,a=r+"";return function(){var t=this.getAttribute(e);return t===a?null:t===i?o:o=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return t=ps(t),this.tween(n,(t.local?Mm:Bm)(t,e))},style:function(t,e,n){var r,i,o,a,s,l,c,u,h,d,f,p,g,m,_,b,y,v,A,w,x,E,C,k,M,B="transform"==(t+="")?xm:km;return null==e?this.styleTween(t,(x=t,E=B,function(){var t=ms(this,x),e=(this.style.removeProperty(x),ms(this,x));return t===e?null:t===C&&e===k?M:M=E(C=t,k=e)})).on("end.style."+t,Sm(t)):"function"==typeof e?this.styleTween(t,(b=B,y=Cm(this,"style."+(_=t),e),function(){var t=ms(this,_),e=y(this),n=e+"";return null==e&&(this.style.removeProperty(_),n=e=ms(this,_)),t===n?null:t===v&&n===A?w:(A=n,w=b(v=t,e))})).each((c=this._id,m="end."+(g="style."+(u=t)),function(){var t=gm(this,c),e=t.on,n=null==t.value[g]?p=p||Sm(u):void 0;e===h&&f===n||(d=(h=e).copy()).on(m,f=n),t.on=d})):this.styleTween(t,(r=t,i=B,l=(o=e)+"",function(){var t=ms(this,r);return t===l?null:t===a?s:s=i(a=t,o)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,zm(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Cm(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Nm(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=mm(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(i,o){var a,s;return function(){var t=gm(this,i),e=t.tween;if(e!==a)for(var n=0,r=(s=a=e).length;n<r;++n)if(s[n].name===o){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(o,a,s){var l,c;if("function"!=typeof s)throw new Error;return function(){var t=gm(this,o),e=t.tween;if(e!==l){c=(l=e).slice();for(var n={name:a,value:s},r=0,i=c.length;r<i;++r)if(c[r].name===a){c[r]=n;break}r===i&&c.push(n)}t.tween=c}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){pm(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){pm(this,t).delay=e}})(e,t)):mm(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){gm(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){gm(this,t).duration=e}})(e,t)):mm(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(((t,e)=>{if("function"!=typeof e)throw new Error;return function(){gm(this,t).ease=e}})(e,t)):mm(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;gm(this,e).ease=t}));var e,n},end:function(){var i,o,a=this,s=a._id,l=a.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};a.each(function(){var t=gm(this,s),e=t.on;e!==i&&((o=(i=e).copy())._.cancel.push(n),o._.interrupt.push(n),o._.end.push(r)),t.on=o}),0===l&&t()})},[Symbol.iterator]:Fe[Symbol.iterator]};var Dm={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};y.prototype.interrupt=function(t){return this.each(function(){_m(this,t)})},y.prototype.transition=function(t){var e,n;t=t instanceof Im?(e=t._id,t._name):(e=++Om,(n=Dm).time=Xg(),null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&fm(a,t,e,c,s,n||((t,e)=>{for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n})(a,e));return new Im(r,this._parents,t,e)};let $t=t=>()=>t;function jm(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Lm(t,e,n){this.k=t,this.x=e,this.y=n}Lm.prototype={constructor:Lm,scale:function(t){return 1===t?this:new Lm(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Lm(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pm=new Lm(1,0,0);function Fm(t){t.stopImmediatePropagation()}function Rm(t){t.preventDefault(),t.stopImmediatePropagation()}function Wm(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Um(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ym(){return this.__zoom||Pm}function Gm(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Vm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qm(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],e=t.invertY(e[1][1])-n[1][1];return t.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),o<e?(o+e)/2:Math.min(0,o)||Math.max(0,e))}function qm(){var c,u,s,h=Wm,d=Um,f=Qm,o=Gm,e=Vm,a=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],l=250,g=Kt,n=Ht("start","zoom","end"),m=500,_=150,b=0,y=10;function v(t){t.property("__zoom",Ym).on("wheel.zoom",i,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",M).filter(e).on("touchstart.zoom",B).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(t,e){return(e=Math.max(a[0],Math.min(a[1],e)))===t.k?t:new Lm(e,t.x,t.y)}function w(t,e,n){var r=e[0]-n[0]*t.k,e=e[1]-n[1]*t.k;return r===t.x&&e===t.y?t:new Lm(t.k,r,e)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function E(t,n,l,c){t.on("start.zoom",function(){C(this,arguments).event(c).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(c).end()}).tween("zoom",function(){var t=arguments,r=C(this,t).event(c),e=d.apply(this,t),i=null==l?x(e):"function"==typeof l?l.apply(this,t):l,o=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,a="function"==typeof n?n.apply(this,t):n,s=g(e.invert(i).concat(o/e.k),a.invert(i).concat(o/a.k));return function(t){var e,n;t=1===t?a:(e=s(t),new Lm(n=o/e[2],i[0]-e[0]*n,i[1]-e[1]*n)),r.zoom(null,t)}})}function C(t,e,n){return!n&&t.__zooming||new r(t,e)}function r(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=d.apply(t,e),this.taps=0}function i(t,...e){if(h.apply(this,arguments)){var n=C(this,e).event(t),e=this.__zoom,r=Math.max(a[0],Math.min(a[1],e.k*Math.pow(2,o.apply(this,arguments)))),i=_n(t);if(n.wheel)n.mouse[0][0]===i[0]&&n.mouse[0][1]===i[1]||(n.mouse[1]=e.invert(n.mouse[0]=i)),clearTimeout(n.wheel);else{if(e.k===r)return;n.mouse=[i,e.invert(i)],_m(this),n.start()}Rm(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},_),n.zoom("mouse",f(w(A(e,r),n.mouse[0],n.mouse[1]),n.extent,p))}}function k(t,...e){var r,i,n,o,a;!s&&h.apply(this,arguments)&&(r=t.currentTarget,i=C(this,e,!0).event(t),n=tn(t.view).on("mousemove.zoom",function(t){{var e,n;Rm(t),i.moved||(e=t.clientX-o,n=t.clientY-a,i.moved=b<e*e+n*n)}i.event(t).zoom("mouse",f(w(i.that.__zoom,i.mouse[0]=_n(t,r),i.mouse[1]),i.extent,p))},!0).on("mouseup.zoom",function(t){n.on("mousemove.zoom mouseup.zoom",null),Jp(t.view,i.moved),Rm(t),i.event(t).end()},!0),e=_n(t,r),o=t.clientX,a=t.clientY,Xp(t.view),Fm(t),i.mouse=[e,this.__zoom.invert(e)],_m(this),i.start())}function M(t,...e){var n,r,i,o;h.apply(this,arguments)&&(o=this.__zoom,n=_n(t.changedTouches?t.changedTouches[0]:t,this),r=o.invert(n),i=o.k*(t.shiftKey?.5:2),o=f(w(A(o,i),n,r),d.apply(this,e),p),Rm(t),0<l?tn(this).transition().duration(l).call(E,o,n,t):tn(this).call(v.transform,o,n,t))}function B(t,...e){if(h.apply(this,arguments)){var n,r,i,o,a=t.touches,s=a.length,l=C(this,e,t.changedTouches.length===s).event(t);for(Fm(t),r=0;r<s;++r)o=[o=_n(i=a[r],this),this.__zoom.invert(o),i.identifier],l.touch0?l.touch1||l.touch0[2]===o[2]||(l.touch1=o,l.taps=0):(l.touch0=o,n=!0,l.taps=1+!!c);c=c&&clearTimeout(c),n&&(l.taps<2&&(u=o[0],c=setTimeout(function(){c=null},m)),_m(this),l.start())}}function T(t,...e){if(this.__zooming){var n,r=C(this,e).event(t),i=t.changedTouches,o=i.length;for(Rm(t),n=0;n<o;++n)h=_n(u=i[n],this),r.touch0&&r.touch0[2]===u.identifier?r.touch0[0]=h:r.touch1&&r.touch1[2]===u.identifier&&(r.touch1[0]=h);if(u=r.that.__zoom,r.touch1)var e=r.touch0[0],t=r.touch0[1],a=r.touch1[0],s=r.touch1[1],l=(l=a[0]-e[0])*l+(l=a[1]-e[1])*l,c=(c=s[0]-t[0])*c+(c=s[1]-t[1])*c,u=A(u,Math.sqrt(l/c)),h=[(e[0]+a[0])/2,(e[1]+a[1])/2],l=[(t[0]+s[0])/2,(t[1]+s[1])/2];else{if(!r.touch0)return;h=r.touch0[0],l=r.touch0[1]}r.zoom("touch",f(w(u,h,l),r.extent,p))}}function S(t,...e){if(this.__zooming){var n,r,i=C(this,e).event(t),o=t.changedTouches,a=o.length;for(Fm(t),s&&clearTimeout(s),s=setTimeout(function(){s=null},m),n=0;n<a;++n)r=o[n],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):(i.end(),2===i.taps&&(r=_n(r,this),Math.hypot(u[0]-r[0],u[1]-r[1])<y)&&(e=tn(this).on("dblclick.zoom"))&&e.apply(this,arguments))}}return v.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",Ym),t!==i?E(t,e,n,r):i.interrupt().each(function(){C(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},v.scaleBy=function(t,e,n,r){v.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,r)},v.scaleTo=function(t,o,a,e){v.transform(t,function(){var t=d.apply(this,arguments),e=this.__zoom,n=null==a?x(t):"function"==typeof a?a.apply(this,arguments):a,r=e.invert(n),i="function"==typeof o?o.apply(this,arguments):o;return f(w(A(e,i),n,r),t,p)},a,e)},v.translateBy=function(t,e,n,r){v.transform(t,function(){return f(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),d.apply(this,arguments),p)},null,r)},v.translateTo=function(t,r,i,o,e){v.transform(t,function(){var t=d.apply(this,arguments),e=this.__zoom,n=null==o?x(t):"function"==typeof o?o.apply(this,arguments):o;return f(Pm.translate(n[0],n[1]).scale(e.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),t,p)},o,e)},r.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=tn(this.that).datum();n.call(t,this.that,new jm(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:n}),e)}},v.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:$t(+t),v):o},v.filter=function(t){return arguments.length?(h="function"==typeof t?t:$t(!!t),v):h},v.touchable=function(t){return arguments.length?(e="function"==typeof t?t:$t(!!t),v):e},v.extent=function(t){return arguments.length?(d="function"==typeof t?t:$t([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):d},v.scaleExtent=function(t){return arguments.length?(a[0]=+t[0],a[1]=+t[1],v):[a[0],a[1]]},v.translateExtent=function(t){return arguments.length?(p[0][0]=+t[0][0],p[1][0]=+t[1][0],p[0][1]=+t[0][1],p[1][1]=+t[1][1],v):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},v.constrain=function(t){return arguments.length?(f=t,v):f},v.duration=function(t){return arguments.length?(l=+t,v):l},v.interpolate=function(t){return arguments.length?(g=t,v):g},v.on=function(){var t=n.on.apply(n,arguments);return t===n?v:t},v.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,v):Math.sqrt(b)},v.tapDistance=function(t){return arguments.length?(y=+t,v):y},v}function Hm(t){return(Hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Hm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Hm(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Hm(t)?t:t+""))(r.key),r)}}var Xm=(()=>{function s(t,e,n){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");t.classed("escher-container",!0),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Mozilla")&&t.on("touchstart touchmove",function(t){t.sourceEvent.stopPropagation()});var r=t.append("div").attr("class","escher-zoom-container"),i=r.append("div").attr("class","escher-3d-transform-container"),o=i.append("svg").attr("class","escher-svg").attr("xmlns","http://www.w3.org/2000/svg"),a=(o.select(".zoom-g").remove(),o.append("g").attr("class","zoom-g"));this.selection=t,this.container=r,this.css3TransformContainer=i,this.svg=o,this.zoomedSel=a,this.windowTranslate={x:0,y:0},this.windowScale=1,this._scrollBehavior=e,this._use3dTransform=n,this._panDragOn=!0,this._zoomBehavior=null,this._zoomTimeout=null,this._svgScale=this.windowScale,this._svgTranslate=this.windowTranslate,this._3dTransform=null,this._requestedFrame=!1,this.callbackManager=new Lg,this._updateScroll()}return t=s,(e=[{key:"setScrollBehavior",value:function(t){this._scrollBehavior=t,this._updateScroll()}},{key:"setUse3dTransform",value:function(t){this._use3dTransform=t}},{key:"togglePanDrag",value:function(t){k.isUndefined(t)?this._panDragOn=!this._panDragOn:this._panDragOn=t,this._panDragOn?this.zoomedSel.style("cursor","grab"):"grab"===this.zoomedSel.style("cursor")&&this.zoomedSel.style("cursor",null),this._updateScroll()}},{key:"_updateScroll",value:function(){var t,n=this;if(!k.contains(["zoom","pan","none"],this._scrollBehavior))throw Error("Bad value for scroll_behavior: "+this._scrollBehavior);this.container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null).on("dblclick.zoom",null).on("mousewheel.escher",null).on("DOMMouseScroll.escher",null).on("wheel.escher",null).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this._zoomBehavior=qm().on("start",function(t){null!==t.sourceEvent&&(t.sourceEvent.stopPropagation(),t.sourceEvent.preventDefault())}).on("zoom",function(t){n._goToCallback(t.transform.k,{x:t.transform.x,y:t.transform.y})}),this.container.call(this._zoomBehavior),this.container.on("dblclick.zoom",null),this._panDragOn||this.container.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),"zoom"!==this._scrollBehavior&&this.container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null),"pan"===this._scrollBehavior&&(this.container.on("mousewheel.escher",t=function(t){function e(t,e){return.5*(k.isUndefined(t)?e:-t/1.5)}t=t.sourceEvent,t.stopPropagation(),t.preventDefault(),t.returnValue=!1,t={x:n.windowTranslate.x-e(t.wheelDeltaX,t.deltaX),y:n.windowTranslate.y-e(t.wheelDeltaY,t.deltaY)};n.goTo(n.windowScale,t)}),this.container.on("DOMMouseScroll.escher",t),this.container.on("wheel.escher",t)),this.goTo(this.windowScale,this.windowTranslate)}},{key:"goTo",value:function(t,e){t?e&&"x"in e&&"y"in e&&!k.isNaN(e.x)&&!k.isNaN(e.y)?(e=Pm.translate(e.x,e.y).scale(t),this.container.call(this._zoomBehavior.transform,e)):console.error("Bad translate value"):console.error("Bad scale value")}},{key:"_goToCallback",value:function(t,e){var n=this;this.windowScale!==t&&(this.windowScale=t,this.callbackManager.run("zoom_change")),this.windowTranslate=e,this._use3dTransform?(k.isNull(this._zoomTimeout)||clearTimeout(this._zoomTimeout),this._goTo3d(t,e,this._svgScale,this._svgTranslate),this._zoomTimeout=k.delay(function(){n._requestedFrame=!1,n._goToSvg(t,e)},100)):this._goToSvg(t,e),this.callbackManager.run("go_to")}},{key:"_goTo3dFrame",value:function(){var e=this;this._requestedFrame||(this._requestedFrame=!0,window.requestAnimationFrame(function(){e._requestedFrame=!1;var t=e._3dTransform;t?(e.css3TransformContainer.style("transform",t),e.css3TransformContainer.style("-webkit-transform",t),e.css3TransformContainer.style("transform-origin","0 0"),e.css3TransformContainer.style("-webkit-transform-origin","0 0")):console.warn("No _3dTransform defined")}))}},{key:"_goTo3d",value:function(t,e,n,r){t/=n,n=V.c_minus_c(e,V.c_times_scalar(r,t)),e="translate("+n.x+"px,"+n.y+"px) scale("+t+")";this._3dTransform=e,this._goTo3dFrame()}},{key:"_clear3d",value:function(){this._3dTransform&&(this._3dTransform=null,this.css3TransformContainer.style("transform",null),this.css3TransformContainer.style("-webkit-transform",null),this.css3TransformContainer.style("transform-origin",null),this.css3TransformContainer.style("-webkit-transform-origin",null))}},{key:"_goToSvgFrame",value:function(){var n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._requestedFrame&&!r||(this._requestedFrame=!0,window.requestAnimationFrame(function(){n._requestedFrame=!1,n._clear3d();var t=n._svgScale,e=n._svgTranslate;n.zoomedSel.attr("transform","translate("+e.x+","+e.y+") scale("+t+")"),r&&r()}))}},{key:"_goToSvg",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._svgScale=t,this._svgTranslate=e,this._goToSvgFrame(n)}},{key:"zoomBy",value:function(t){var e=this.get_size(),e={x:e.width/2-((e.width/2-this.windowTranslate.x)*t+this.windowTranslate.x),y:e.height/2-((e.height/2-this.windowTranslate.y)*t+this.windowTranslate.y)};this.goTo(this.windowScale*t,V.c_plus_c(this.windowTranslate,e))}},{key:"zoom_in",value:function(){this.zoomBy(1.5)}},{key:"zoom_out",value:function(){this.zoomBy(.667)}},{key:"get_size",value:function(){var t=this.selection.node().getBoundingClientRect();return{width:t.width,height:t.height}}},{key:"translateOffScreen",value:function(t){var e=this.get_size(),n={min:-this.windowTranslate.x/this.windowScale+120/this.windowScale,max:-this.windowTranslate.x/this.windowScale+(e.width-120)/this.windowScale},e={min:-this.windowTranslate.y/this.windowScale+120/this.windowScale,max:-this.windowTranslate.y/this.windowScale+(e.height-120)/this.windowScale};t.x<n.min?(this.windowTranslate.x=this.windowTranslate.x-(t.x-n.min)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)):t.x>n.max&&(this.windowTranslate.x=this.windowTranslate.x-(t.x-n.max)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)),t.y<e.min?(this.windowTranslate.y=this.windowTranslate.y-(t.y-e.min)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)):t.y>e.max&&(this.windowTranslate.y=this.windowTranslate.y-(t.y-e.max)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate))}}])&&Zm(t.prototype,e),n&&Zm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();function Jm(t,e,n,r){var i=V.distance(e,n);return t&&i?"start"===r?{x:e.x+t*(n.x-e.x)/i,y:e.y+t*(n.y-e.y)/i}:"end"===r?{x:n.x-t*(n.x-e.x)/i,y:n.y-t*(n.y-e.y)/i}:void console.error("bad displace value: "+r):(console.warn("No space for displacement"),{x:e.x,y:e.y})}(On=V.make_class()).prototype={init:function(t,e,n){this.behavior=t,this.settings=e,this.map=n,this.callback_manager=new Lg},create_reaction:function(t){var e=t.append("g").attr("id",function(t){return"r"+t.reaction_id}).attr("class","reaction");return this.create_reaction_label(e),this.callback_manager.run("create_reaction",this,t),e},update_reaction:function(t,e,n,r,i,o){t.select(".reaction-label-group").call(function(t){return this.update_reaction_label(t,o)}.bind(this)),V.draw_a_nested_object(t,".segment-group","segments","segment_id",this.create_segment.bind(this),function(t){return this.update_segment(t,e,n,r,i,o)}.bind(this),function(t){t.remove()}),this.callback_manager.run("update_reaction",this,t)},create_bezier:function(t){var e=t.append("g").attr("id",function(t){return t.bezier_id}).attr("class",function(t){return"bezier"});return e.append("path").attr("class","connect-line"),e.append("circle").attr("class",function(t){return"bezier-circle "+t.bezier}).style("stroke-width",String(1)+"px").attr("r",String(7)+"px"),this.callback_manager.run("create_bezier",this,t),e},update_bezier:function(t,e,n,r,i,o,a){var s=this.settings.get("hide_secondary_metabolites");e?(t.attr("visibility","visible"),t.style("visibility",function(t){var t=a[t.reaction_id].segments[t.segment_id],e=o[t.from_node_id],t=o[t.to_node_id];return s&&("metabolite"===t.node_type&&!t.node_is_primary||"metabolite"===e.node_type&&!e.node_is_primary)?"hidden":null}),t.select(".bezier-circle").call(this.behavior.turnOffDrag).call(n).on("mouseover",r).on("mouseout",i).attr("transform",function(t){return null===t.x||null===t.y?"":"translate("+t.x+","+t.y+")"}),t.select(".connect-line").attr("d",function(t){var e=a[t.reaction_id].segments[t.segment_id],e="b1"===t.bezier?o[e.from_node_id]:o[e.to_node_id];return null===t.x||null===t.y||null===e.x||null===e.y?"":"M"+t.x+", "+t.y+" "+e.x+","+e.y}),this.callback_manager.run("update_bezier",this,t)):t.attr("visibility","hidden")},create_node:function(t,e,n){var r=t.append("g").attr("class","node").attr("id",function(t){return"n"+t.node_id});return r.append("circle").attr("class",function(t){var e="node-circle";return null!==t.node_type&&(e+=" "+t.node_type+"-circle"),e}),r.filter(function(t){return"metabolite"===t.node_type}).append("text").attr("class","node-label label"),this.callback_manager.run("create_node",this,t),r},update_node:function(t,n,r,e,i,o,a,s,l){var c=this.settings.get("hide_secondary_metabolites"),u=this.settings.get("primary_metabolite_radius"),h=this.settings.get("secondary_metabolite_radius"),d=this.settings.get("marker_radius"),f=this.settings.get("hide_all_labels"),p=this.settings.get("identifiers_on_map"),g=this.settings.get("metabolite_styles"),m={color:this.settings.get("metabolite_no_data_color"),size:this.settings.get("metabolite_no_data_size")},_=this.map.has_data_on_reactions&&this.settings.get("hide_no_data_reaction"),b=this.map.reactions,y=this.behavior.nodeLabelMouseover,v=this.behavior.nodeLabelMouseout,A=this.behavior.nodeLabelTouch,w=this.behavior.nodeObjectMouseover,x=this.behavior.nodeObjectMouseout,s=(t.select(".node-circle").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).style("visibility",function(t){return E(t,c)||_&&C(t,b)?"hidden":null}).attr("r",function(t){var e;return"metabolite"===t.node_type?r&&-1!==g.indexOf("size")?null===(e=t.data)?m.size:n.metabolite_size(e):t.node_is_primary?u:h:d}).style("fill",function(t){return"metabolite"===t.node_type&&r&&-1!==g.indexOf("color")?null===(t=t.data)?m.color:n.metabolite_color(t):null}).call(this.behavior.turnOffDrag).call(s).on("mousedown",e).on("click",i).on("mouseover",w).on("mouseout",x),t.select(".node-label").attr("visibility",f?"hidden":"visible"));f||s.style("visibility",function(t){return E(t,c)||_&&C(t,b)?"hidden":null}).attr("transform",function(t){return"translate("+t.label_x+","+t.label_y+")"}).text(function(t){var e=t[p];return r&&-1!==g.indexOf("text")&&(e+=" "+t.data_string),e}).call(this.behavior.turnOffDrag).call(l).on("mouseover",y).on("mouseout",v).on("touchend",A);function E(t,e){return"metabolite"===t.node_type&&e&&!t.node_is_primary}function C(t,e){var t=t.connected_segments.map(function(t){return t.reaction_id}),n=!0;return t.forEach(function(t){e[t].data&&(n=!1)}),n}this.callback_manager.run("update_node",this,t)},create_text_label:function(t){var e=t.append("g").attr("id",function(t){return"l"+t.text_label_id}).attr("class","text-label");return e.append("text").attr("class","label"),this.callback_manager.run("create_text_label",this,t),e},update_text_label:function(t){var e=this.behavior.textLabelMousedown,n=this.behavior.textLabelClick,r=this.behavior.turnOffDrag,i=this.behavior.selectableDrag;t.select(".label").text(function(t){return t.text}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).on("mousedown",e).on("click",n).call(r).call(i),this.callback_manager.run("update_text_label",this,t)},create_membrane:function(t){var e=t.append("rect").attr("class","membrane");return this.callback_manager.run("create_membrane",this,t),e},update_membrane:function(t){t.attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).style("stroke-width",function(t){return 10}).attr("rx",function(t){return 20}).attr("ry",function(t){return 20}),this.callback_manager.run("update_membrane",this,t)},create_reaction_label:function(t,e){var n=t.append("g").attr("class","reaction-label-group");return n.append("text").attr("class","reaction-label label"),n.append("g").attr("class","all-genes-label-group"),this.callback_manager.run("create_reaction_label",this,t),n},update_reaction_label:function(t,n){op(".4g");var r=this.settings.get("identifiers_on_map"),i=this.settings.get("reaction_styles"),o=this.settings.get("show_gene_reaction_rules"),a=this.settings.get("hide_all_labels"),s=this.settings.get("gene_font_size"),e=n&&this.settings.get("hide_no_data_reaction"),l=this.behavior.reactionLabelMouseover,c=this.behavior.reactionLabelMouseout,u=this.behavior.reactionLabelTouch,h=this.behavior.geneLabelMouseover,d=this.behavior.geneLabelMouseout,f=this.behavior.geneLabelTouch,p=(t.attr("transform",function(t){return"translate("+t.label_x+","+t.label_y+")"}).call(this.behavior.turnOffDrag).call(this.behavior.reactionLabelDrag),t.select(".reaction-label").attr("visibility",function(t){return!t.data&&e||a?"hidden":null}));a||p.text(function(t){var e=t[r];return n&&-1!==i.indexOf("text")&&(e+=" "+t.data_string),e}).on("mouseover",l).on("mouseout",c).on("touchend",u);function g(t,e){return t+1.5*s*(e+1)}p=t.select(".all-genes-label-group").selectAll(".gene-label-group").data(function(n){var t="gene_string"in n&&null!==n.gene_string&&o&&!a&&-1!==i.indexOf("text"),e="gene_reaction_rule"in n&&null!==n.gene_reaction_rule&&o&&!a;return t?(console.warn("Showing gene_string. See TODO in source."),n.gene_string):e?((t=v.gene_string_for_data(n.gene_reaction_rule,null,n.genes,null,r,null)).forEach(function(t,e){t.label_x=n.label_x,t.label_y=g(n.label_y,e)}),t):[]}),l=p.enter().append("g").attr("class","gene-label-group"),l.append("text").attr("class","gene-label").style("font-size",s+"px"),c=l.merge(p);c.attr("transform",function(t,e){return"translate(0, "+g(0,e)+")"}),c.select("text").text(function(t){return t.text}).on("mouseover",h).on("mouseout",d).on("touchend",f),p.exit().remove(),this.callback_manager.run("update_reaction_label",this,t)},create_segment:function(t){var e=t.append("g").attr("class","segment-group").attr("id",function(t){return"s"+t.segment_id});return e.append("path").attr("class","segment"),e.append("g").attr("class","arrowheads"),e.append("g").attr("class","stoichiometry-labels"),this.callback_manager.run("create_segment",this,t),e},update_segment:function(t,i,n,h,e,r){var o=this,a=null;"undefined"!=typeof IntersectionObserver&&(a=new IntersectionObserver(function(t){V.handle_animation(t,a,o.settings,r,i)},{threshold:.1}));function d(t,e){var n=20,r=13;return e&&(r=null===t?c:i.reaction_size(t),n=2*(r=isNaN(r)?c:r)),{width:n,height:r}}function f(t,e,n,r){return e=e||0<n?t.height:0,(r?y:v)+e+10}var s=this.settings.get("reaction_styles"),p=r&&-1!==s.indexOf("size"),l=r&&-1!==s.indexOf("color"),c=this.settings.get("reaction_no_data_size"),u=this.settings.get("reaction_no_data_color"),g=r&&this.settings.get("hide_no_data_reaction"),m=this.settings,_=this.settings.get("highlight_missing"),b=this.settings.get("hide_secondary_metabolites"),y=this.settings.get("primary_metabolite_radius"),v=this.settings.get("secondary_metabolite_radius"),s=this.behavior.reactionObjectMouseover,A=this.behavior.reactionObjectMouseout,s=(V.update_color_legends(i.reaction_color,r),t.selectAll(".segment").datum(function(){return Object.assign({},this.parentNode.__data__,this.parentNode.parentNode.__data__)}).style("visibility",function(t){var e=h[t.from_node_id],n=h[t.to_node_id];return b&&("metabolite"===n.node_type&&!n.node_is_primary||"metabolite"===e.node_type&&!e.node_is_primary)||!t.data&&g?"hidden":null}).attr("d",function(t){var e,n,r,i,o;return null===t.from_node_id||null===t.to_node_id?null:(r=h[t.from_node_id],i=h[t.to_node_id],e=t.b1,n=t.b2,"metabolite"===r.node_type&&(o=d(t.data,p),r=Jm(f(o,t.reversibility,t.from_node_coefficient,r.node_is_primary),r,null===e?i:e,"start")),"metabolite"==i.node_type&&(o=d(t.data,p),i=Jm(f(o,t.reversibility,t.to_node_coefficient,i.node_is_primary),null===n?r:n,i,"end")),o="M"+r.x+","+r.y+" ",null!==e&&null!==n&&(o+="C"+e.x+","+e.y+" "+n.x+","+n.y+" "),o+(i.x+","+i.y))}).style("stroke-linecap","round").style("stroke",function(t){var e=this.parentNode.parentNode.__data__.bigg_id;return!_||null===n||e in n.reactions?l?null===(e=t.data)?u:i.reaction_color(e):null:"red"}).style("stroke-width",function(t){return p?null===(t=t.data)?c:i.reaction_size(t):null}).each(function(t,e,n){n=n[0];"undefined"!=typeof IntersectionObserver&&null!==a&&(V.handle_animation([{target:n}],a,m,r,i),a.observe(n))}).attr("pointer-events","visibleStroke").on("mouseover",s).on("mouseout",A),t.select(".arrowheads").selectAll(".arrowhead").data(function(t){var e,n,r,i,o,a=[],s=h[t.from_node_id],l=t.b1,c=h[t.to_node_id],u=t.b2;return b&&("metabolite"===c.node_type&&!c.node_is_primary||"metabolite"===s.node_type&&!s.node_is_primary)||("metabolite"===s.node_type&&(t.reversibility||0<t.from_node_coefficient)&&(r=d(t.data,p),e=f(r,t.reversibility,t.from_node_coefficient,s.node_is_primary),i=null===l?c:l,o=V.to_degrees(V.get_angle([s,i]))+90,n=Jm(e,s,i,"start"),a.push({data:t.data,x:n.x,y:n.y,size:r,rotation:o,show_arrowhead_flux:t.from_node_coefficient<0===t.reverse_flux||0===t.data})),"metabolite"===c.node_type&&(t.reversibility||0<t.to_node_coefficient)&&(r=d(t.data,p),e=f(r,t.reversibility,t.to_node_coefficient,c.node_is_primary),i=null===u?s:u,o=V.to_degrees(V.get_angle([c,i]))+90,n=Jm(e,i,c,"end"),a.push({data:t.data,x:n.x,y:n.y,size:r,rotation:o,show_arrowhead_flux:t.to_node_coefficient<0===t.reverse_flux||0===t.data})),t.unconnected_segment_with_arrow&&(r=d(t.data,p),i=c,o=V.to_degrees(V.get_angle([s,i]))+90,a.push({data:t.data,x:s.x,y:s.y,size:r,rotation:o,show_arrowhead_flux:t.to_node_coefficient<0===t.reverse_flux||0===t.data}))),a})),A=(s.enter().append("path").classed("arrowhead",!0).merge(s).attr("d",function(t){return"M"+[-t.size.width/2,0]+" L"+[0,t.size.height]+" L"+[t.size.width/2,0]+" Z"}).attr("transform",function(t){return"translate("+t.x+","+t.y+")rotate("+t.rotation+")"}).style("fill",function(t){return l?t.show_arrowhead_flux?null===(t=t.data)?u:i.reaction_color(t):"#FFFFFF":null}).style("stroke",function(t){return l?null===(t=t.data)?u:i.reaction_color(t):null}).style("visibility",function(t){return!t.data&&g?"hidden":null}),s.exit().remove(),t.select(".stoichiometry-labels").selectAll(".stoichiometry-label").data(function(t){var e,n,r,i=[],o=h[t.from_node_id],a=t.b1,s=h[t.to_node_id],l=t.b2;return b&&("metabolite"==s.node_type&&!s.node_is_primary||"metabolite"==o.node_type&&!o.node_is_primary)||("metabolite"===o.node_type&&1!=Math.abs(t.from_node_coefficient)&&(e=d(t.data,p),n=null===a?s:a,r=Jm(1.5*f(e,!1,0,s.node_is_primary),o,n=V.c_plus_c(n,V.rotate_coords(n,.5,o)),"start"),r=V.c_plus_c(r,{x:0,y:7}),i.push({coefficient:Math.abs(t.from_node_coefficient),x:r.x,y:r.y,data:t.data})),"metabolite"===s.node_type&&1!==Math.abs(t.to_node_coefficient)&&(e=d(t.data,p),n=null===l?o:l,r=Jm(1.5*f(e,!1,0,s.node_is_primary),n=V.c_plus_c(n,V.rotate_coords(n,.5,s)),s,"end"),r=V.c_plus_c(r,{x:0,y:7}),i.push({coefficient:Math.abs(t.to_node_coefficient),x:r.x,y:r.y,data:t.data}))),i}));A.enter().append("text").attr("class","stoichiometry-label").attr("text-anchor","middle").merge(A).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).text(function(t){return t.coefficient}).style("fill",function(t){return l?null===(t=t.data)?u:i.reaction_color(t):null}),A.exit().remove(),this.callback_manager.run("update_segment",this,t)}};let te=On;function Km(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?$m(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$m(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function $m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function t_(t,e,n,r,i,o){t=V.angleNorm(t),i=18*i.length,o=-1<=e-(o<e)-n/2;return Math.abs(t)<Math.PI/7?r||o?{x:.3*-i,y:40}:{x:.3*-i,y:-20}:Math.abs(t-Math.PI)<Math.PI/7?r||!o?{x:.3*-i,y:40}:{x:.3*-i,y:-20}:r?{x:25-38*Math.abs(Math.abs(t)-Math.PI/2),y:(Math.abs(t)-Math.PI/2)*(2*(0<t)-1)*50}:t<0&&o||0<t&&!o?{x:15,y:0}:{x:.5*-i,y:30}}function e_(j,t,L,e,n,i,r,o){var a,s=V.to_radians_norm(o),l=String(++i.reactions),o={x:n.x,y:n.y},c=[o,V.c_plus_c(o,{x:350,y:0})],u={x:(c[0].x+c[1].x)/2,y:(c[0].y+c[1].y)/2},h=(t=>{if(Math.abs(t)>Math.PI)throw new Error("Angle must be between -PI and PI");return Math.abs(t)<Math.PI/7||Math.abs(t-Math.PI)<Math.PI/7?{x:-50,y:-40}:0<t?{x:15*(1-Math.abs(t-Math.PI/2)/(Math.PI/2)),y:10+50*(t-Math.PI/2)}:{x:15*(1-Math.abs(t+Math.PI/2)/(Math.PI/2)),y:10-50*(Math.abs(t)-Math.PI/2)}})(s),d={name:t.name,bigg_id:t.bigg_id,reversibility:t.reversibility,gene_reaction_rule:t.gene_reaction_rule,genes:V.clone(t.genes),metabolites:V.clone(t.metabolites)},f=(V.extend(d,{label_x:u.x+h.x,label_y:u.y+h.y,segments:{}}),[]),p=[],g=0,m=0,_=!1;for(a in d.metabolites){var b=L[a],y=d.metabolites[a],v=b.formula,b={coefficient:y,bigg_id:a,name:b.name};y<0?(b.index=g,y=/C([0-9]+)/.exec(v),n.bigg_id===b.bigg_id?f.push([b.index,1/0]):y&&-1===r.indexOf(V.decompartmentalize(b.bigg_id)[0])&&f.push([b.index,parseInt(y[1])]),g++):(b.index=m,y=/C([0-9]+)/.exec(v),n.bigg_id===b.bigg_id?(p.push([b.index,1/0]),_=!0):y&&-1===r.indexOf(V.decompartmentalize(b.bigg_id)[0])&&p.push([b.index,parseInt(y[1])]),m++),d.metabolites[a]=b}function P(t,e){return e[1]>t[1]?e:t}var F,R=f.reduce(P,[0,0])[0],W=p.reduce(P,[0,0])[0];for(F in d.metabolites){var A=d.metabolites[F];A.coefficient<0?(A.is_primary=A.index===R,A.count=g):(A.is_primary=A.index===W,A.count=m)}var w={},x={};[{node_type:"anchor_reactants",dis:{x:20*(_?1:-1),y:0}},{node_type:"center",dis:{x:0,y:0}},{node_type:"anchor_products",dis:{x:20*(_?-1:1),y:0}}].map(function(t){var e=String(++i.nodes),n="center"===t.node_type?"midmarker":"multimarker";w[e]={node_type:n,x:u.x+t.dis.x,y:u.y+t.dis.y,connected_segments:[],name:null,bigg_id:null,label_x:null,label_y:null,node_is_primary:null,data:null},x[t.node_type]=e});[[x.anchor_reactants,x.center,"reactants"],[x.anchor_products,x.center,"products"]].map(function(t){var e="products"===t[2]?t[0]:t[1],n="products"===t[2]?t[1]:t[0],r=String(++i.segments),t=0===g&&"reactants"===t[2]&&d.reversibility||0===m&&"products"===t[2];d.segments[r]={b1:null,b2:null,from_node_id:e,to_node_id:n,from_node_coefficient:null,to_node_coefficient:null,reversibility:d.reversibility,data:d.data,reverse_flux:d.reverse_flux,unconnected_segment_with_arrow:t},w[e].connected_segments.push({segment_id:r,reaction_id:l}),w[n].connected_segments.push({segment_id:r,reaction_id:l})});var U,E=w;for(U in d.metabolites){var C,k,M,B,T,Y,S,z=d.metabolites[U],N=void 0,O=void 0,O=z.coefficient<0?(N=R,x.anchor_reactants):(N=W,x.anchor_products),I=((t,e,n,r,i,o)=>{var a,s,l=n[0],c=(n=[V.c_minus_c(n[0],l),V.c_minus_c(n[1],l)],r=V.c_minus_c(r,l),t.count-1);t.is_primary?a=20:(a=10,s=t.index>e?t.index-1:t.index);var u,h,d,f,e=[{x:a,y:0},{x:i-a,y:0}];return t.coefficient<0!==o&&t.is_primary?(u={x:e[0].x,y:e[0].y},d={x:.6*r.x+.4*e[0].x,y:.6*r.y+.4*e[0].y},f={x:.25*r.x+.75*u.x,y:.25*r.y+.75*u.y},h={x:n[0].x,y:n[0].y}):t.coefficient<0!==o?(u={x:e[0].x+a_(20,50,s,c),y:e[0].y+o_(24,s,c)},d={x:.6*r.x+.4*e[0].x,y:.6*r.y+.4*e[0].y},f={x:.25*r.x+.75*u.x,y:.25*r.y+.75*u.y},h={x:n[0].x+a_(20,50,s,c),y:n[0].y+o_(80,s,c)}):0<t.coefficient!==o&&t.is_primary?(u={x:e[1].x,y:e[1].y},d={x:.6*r.x+.4*e[1].x,y:.6*r.y+.4*e[1].y},f={x:.25*r.x+.75*u.x,y:.25*r.y+.75*u.y},h={x:n[1].x,y:n[1].y}):0<t.coefficient!==o&&(u={x:e[1].x-a_(20,50,s,c),y:e[1].y+o_(24,s,c)},d={x:.6*r.x+.4*e[1].x,y:.6*r.y+.4*e[1].y},f={x:.25*r.x+.75*u.x,y:.25*r.y+.75*u.y},h={x:n[1].x-a_(20,50,s,c),y:n[1].y+o_(80,s,c)}),{b1:V.c_plus_c(l,d),b2:V.c_plus_c(l,f),circle:V.c_plus_c(l,h)}})(z,N,c,u,350,_);n.bigg_id===z.bigg_id?(T=String(++i.segments),C=(k=Km(0<z.coefficient?[O,e]:[e,O],2))[0],k=k[1],M=(B=Km(0<z.coefficient?[null,z.coefficient]:[z.coefficient,null],2))[0],d.segments[T]={b1:I.b1,b2:I.b2,from_node_id:C,to_node_id:k,from_node_coefficient:M,to_node_coefficient:B[1],reversibility:d.reversibility},n.connected_segments.push({segment_id:T,reaction_id:l}),E[O].connected_segments.push({segment_id:T,reaction_id:l})):(C=String(++i.segments),k=String(++i.nodes),B=(M=Km(0<z.coefficient?[O,k]:[k,O],2))[0],T=M[1],S=(Y=Km(0<z.coefficient?[null,z.coefficient]:[z.coefficient,null],2))[0],d.segments[C]={b1:I.b1,b2:I.b2,from_node_id:B,to_node_id:T,from_node_coefficient:S,to_node_coefficient:Y[1],reversibility:d.reversibility},S=t_(s,z.index,z.count,z.is_primary,z.bigg_id,N),E[k]={connected_segments:[{segment_id:C,reaction_id:l}],x:I.circle.x,y:I.circle.y,node_is_primary:z.is_primary,label_x:I.circle.x+S.x,label_y:I.circle.y+S.y,name:z.name,bigg_id:z.bigg_id,node_type:"metabolite"},E[O].connected_segments.push({segment_id:C,reaction_id:l}))}var D,G=[];for(D in d.metabolites)G.push({bigg_id:D,coefficient:d.metabolites[D].coefficient});d.metabolites=G;t={},t[l]=d,h=c_(t);return E[e]=n,n_(E,t,h,s,o),{new_reactions:t,new_beziers:h,new_nodes:E}}function n_(n,o,a,e,r){function s(t){return null===t?null:V.rotate_coords(t,e,r)}var t,l=[],c=[];for(t in n)(i=>{var t=n[i],e=s({x:t.x,y:t.y}),e=i_(t,o,e);t.connected_segments.map(function(t){var e,n,r=o[t.reaction_id];void 0!==r&&((t=r.segments[r=t.segment_id]).to_node_id===i&&t.b2?(e=s(t.b2),n=r+"_b2",t.b2=V.c_plus_c(t.b2,e),a[n].x=t.b2.x,a[n].y=t.b2.y):t.from_node_id===i&&t.b1&&(e=s(t.b1),n=r+"_b1",t.b1=V.c_plus_c(t.b1,e),a[n].x=t.b1.x,a[n].y=t.b1.y))}),c=V.uniqueConcat([c,e.reaction_ids]),l.push(i)})(t);return{node_ids:l,reaction_ids:c}}function r_(t,i,o,a,s){var l=i_(t,o,s);return t.connected_segments.map(function(t){var n,r,e=o[t.reaction_id];k.isUndefined(e)||(n=t.segment_id,r=e.segments[n],[["b1","from_node_id"],["b2","to_node_id"]].forEach(function(t){var e=t[0];r[t[1]]===i&&r[e]&&(r[e]=V.c_plus_c(r[e],s),(t=a[n+"_"+e]).x=r[e].x,t.y=r[e].y)}),l.reaction_ids.indexOf(t.reaction_id)<0&&l.reaction_ids.push(t.reaction_id))}),l}function i_(n,r,i){n.x=n.x+i.x,n.y=n.y+i.y,n.label_x=n.label_x+i.x,n.label_y=n.label_y+i.y;var o=[];return n.connected_segments.map(function(t){var e=r[t.reaction_id];o.indexOf(t.reaction_id)<0&&(o.push(t.reaction_id),"midmarker"===n.node_type)&&(e.label_x=e.label_x+i.x,e.label_y=e.label_y+i.y)}),{reaction_ids:o}}function o_(t,e,n){n=Math.floor(n/2);return t*(e-n+(n<=e))}function a_(t,e,n,r){r=Math.floor(r/2);return e+Math.abs(n-r+(r<=n))*t}function s_(t){var e,r=[];for(e in t){var n,i=t[e];for(n in i.segments)(e=>{var n=i.segments[e];["b1","b2"].forEach(function(t){null!==n[t]&&r.push(e+"_"+t)})})(n)}return r}function l_(t,i){var e,o={};for(e in t)(n=>{var r=t[n];["b1","b2"].forEach(function(t){var e=r[t];null!==e&&(o[n+"_"+t]={bezier:t,x:e.x,y:e.y,reaction_id:i,segment_id:n})})})(e);return o}function c_(t){var e,n={};for(e in t){var r=l_(t[e].segments,e);V.extend(n,r)}return n}function u_(t){return(u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h_(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?d_(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d_(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function d_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=u_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=u_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==u_(t)?t:t+""))(r.key),r)}}var p_=(()=>{function n(t,e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.map=t,this.undoStack=e,this.emptyBehavior=function(){},this.rotationModeEnabled=!1,this.rotationDrag=rg(),this.selectableMousedown=null,this.textLabelMousedown=null,this.textLabelClick=null,this.selectableDrag=this.emptyBehavior,this.nodeLabelMouseover=null,this.nodeLabelTouch=null,this.nodeLabelMouseout=null,this.reactionLabelMouseover=null,this.reactionLabelTouch=null,this.reactionLabelMouseout=null,this.geneLabelMouseover=null,this.geneLabelTouch=null,this.geneLabelMouseout=null,this.nodeObjectMouseover=null,this.nodeObjectMouseout=null,this.reactionObjectMouseover=null,this.reactionObjectMouseout=null,this.bezierDrag=this.emptyBehavior,this.bezierMouseover=null,this.bezierMouseout=null,this.reactionLabelDrag=this.emptyBehavior,this.nodeLabelDrag=this.emptyBehavior,this.dragging=!1}return t=n,(e=[{key:"averageLocation",value:function(t){var e,n=[],r=[];for(e in t){var i=t[e];void 0!==i.x&&n.push(i.x),void 0!==i.y&&r.push(i.y)}return{x:V.mean(n),y:V.mean(r)}}},{key:"showCenter",value:function(){var i,o,a=this,t=this.map.sel.selectAll("#rotation-center").data([0]),e=t.enter().append("g").attr("id","rotation-center"),s=(e.append("path").attr("d","M-32 0 L32 0").attr("class","rotation-center-line"),e.append("path").attr("d","M0 -32 L0 32").attr("class","rotation-center-line"),e.merge(t));s.attr("transform","translate("+this.center.x+","+this.center.y+")").attr("visibility","visible").on("mouseover",function(){var t=parseFloat(s.selectAll("path").style("stroke-width"));s.selectAll("path").style("stroke-width",2*t+"px")}).on("mouseout",function(){s.selectAll("path").style("stroke-width",null)}).call(rg().on("start",function(t){i=t.x,o=t.y}).on("drag",function(t){var e=V.d3_transform_catch(s.attr("transform")),n=t.x-i,r=(i=t.x,t.y-o),t=(o=t.y,[n+e.translate[0],r+e.translate[1]]);s.attr("transform","translate("+t+")"),a.center={x:t[0],y:t[1]}}))}},{key:"hideCenter",value:function(){this.map.sel.select("#rotation-center").attr("visibility","hidden")}},{key:"toggleRotationMode",value:function(t){var o,a,s,l,c,u,e=this,t=(this.rotationModeEnabled=void 0===t?!this.rotationModeEnabled:t,this.map.sel.selectAll(".node-circle")),n=this.map.sel.selectAll("#canvas");this.rotationModeEnabled?(o=this.map.getSelectedNodes(),0===Object.keys(o).length?console.warn("No selected nodes"):(this.center=this.averageLocation(o),this.showCenter(),a=this.map,s=Object.keys(o),l=this.map.reactions,c=this.map.nodes,u=this.map.beziers,this.rotationDrag=this.getGenericAngularDrag(function(t,e){t.sourceEvent.stopPropagation()},function(t,e,n,r,i){n=n_(o,l,u,n,i);a.draw_these_nodes(n.node_ids),a.draw_these_reactions(n.reaction_ids)},function(){},function(t,e,n,r){var i={},n=(s.forEach(function(t){i[t]=c[t]}),n_(i,l,u,-n,r));a.draw_these_nodes(n.node_ids),a.draw_these_reactions(n.reaction_ids)},function(t,e,n,r){var i={},n=(s.forEach(function(t){i[t]=c[t]}),n_(i,l,u,n,r));a.draw_these_nodes(n.node_ids),a.draw_these_reactions(n.reaction_ids)},function(){return e.center},this.map.sel),n.call(this.rotationDrag),this.selectableDrag=this.rotationDrag)):(this.hideCenter(),t.on("mousedown.center",null),n.on("mousedown.center",null),n.on("mousedown.drag",null),n.on("touchstart.drag",null),this.rotationDrag=null,this.selectableDrag=null)}},{key:"toggleSelectableClick",value:function(t){var n;(t=void 0===t?null===this.selectableMousedown:t)?(n=this.map,this.selectableMousedown=function(t){t.stopPropagation()},this.selectableClick=function(t,e){t.stopPropagation(),t.defaultPrevented||n.select_selectable(this,e,t.shiftKey)},this.nodeMouseover=function(t){tn(this).style("stroke-width",null);var e=parseFloat(tn(this).style("stroke-width"));tn(this.parentNode).classed("selected")||tn(this).style("stroke-width",3*e+"px")},this.nodeMouseout=function(t){tn(this).style("stroke-width",null)}):(this.selectableMousedown=null,this.selectableClick=null,this.nodeMouseover=null,this.nodeMouseout=null,this.map.sel.select("#nodes").selectAll(".node-circle").style("stroke-width",null))}},{key:"toggleTextLabelEdit",value:function(t){var n;(t=void 0===t?null==this.textEditMousedown:t)?(n=this.map,this.textLabelMousedown=function(t){var e;t.defaultPrevented||(e={x:(e=V.d3_transform_catch(tn(this).attr("transform")).translate)[0],y:e[1]},n.callback_manager.run("edit_text_label",null,tn(this),e),t.stopPropagation())},this.textLabelClick=null,this.map.sel.select("#text-labels").selectAll(".label").style("cursor","text"),this.map.sel.on("mousedown.new_text_label",function(t,e){e.preventDefault();e=h_(_n(e,t),2),t=e[0];this.map.callback_manager.run("new_text_label",null,{x:t,y:e[1]})}.bind(this,this.map.sel.node()))):(this.textLabelMousedown=this.selectableMousedown,this.textLabelClick=this.selectableClick,this.map.sel.select("#text-labels").selectAll(".label").style("cursor",null),this.map.sel.on("mousedown.new_text_label",null),this.map.callback_manager.run("hide_text_label_editor"))}},{key:"toggleSelectableDrag",value:function(t){(t=void 0===t?this.selectableDrag===this.emptyBehavior:t)?(this.selectableDrag=this.getSelectableDrag(this.map,this.undoStack),this.bezierDrag=this.getBezierDrag(this.map,this.undoStack)):(this.selectableDrag=this.emptyBehavior,this.bezierDrag=this.emptyBehavior)}},{key:"toggleLabelDrag",value:function(t){(t=void 0===t?this.labelDrag===this.emptyBehavior:t)?(this.reactionLabelDrag=this.getReactionLabelDrag(this.map),this.nodeLabelDrag=this.getNodeLabelDrag(this.map)):(this.reactionLabelDrag=this.emptyBehavior,this.nodeLabelDrag=this.emptyBehavior)}},{key:"toggleLabelMouseover",value:function(t){var e,r=this;(t=void 0===t?null===this.nodeLabelMouseover:t)?(t=function(){r.map.callback_manager.run("delay_hide_tooltip")},this.nodeLabelMouseover=(e=function(n){return function(t,e){r.dragging||r.map.callback_manager.run("show_tooltip",null,n,e)}})("node_label"),this.nodeLabelTouch=e("node_label"),this.nodeLabelMouseout=t,this.reactionLabelMouseover=e("reaction_label"),this.reactionLabelTouch=e("reaction_label"),this.reactionLabelMouseout=t,this.geneLabelMouseover=e("gene_label"),this.geneLabelTouch=e("gene_label"),this.geneLabelMouseout=t):(this.nodeLabelMouseover=null,this.nodeLabelTouch=null,this.nodeLabelMouseout=null,this.reactionLabelMouseover=null,this.reactionLabelTouch=null,this.reactionLabelMouseout=null,this.geneLabelMouseover=null,this.geneLabelTouch=null,this.geneLabelMouseout=null)}},{key:"toggleObjectMouseover",value:function(t){var e,n=this;(t=void 0===t?null===this.nodeObjectMouseover:t)?(t=function(){n.map.callback_manager.run("delay_hide_tooltip")},this.nodeObjectMouseover=(e=function(r){var i=n;return function(t,e){var n;i.dragging||(n=(t=h_(_n(t,e),2))[0],"reaction_object"===r?(n=Object.assign({},e,{xPos:n,yPos:t[1]}),i.map.callback_manager.run("show_tooltip",null,r,n)):i.map.callback_manager.run("show_tooltip",null,r,e))}})("node_object"),this.nodeObjectMouseout=t,this.reactionObjectMouseover=e("reaction_object"),this.reactionObjectMouseout=t):(this.nodeObjectMouseover=null,this.nodeObjectMouseout=null,this.reactionObjectMouseover=null,this.reactionObjectMouseout=null)}},{key:"toggleObjectTouch",value:function(t){var n=this;void 0===t&&(t=null===this.labelTouch),this.objectTouch=t?function(t,e){n.dragging||n.map.callback_manager.run("show_tooltip",null,t,e)}:null}},{key:"toggleBezierDrag",value:function(t){(t=void 0===t?this.bezierDrag===this.emptyBehavior:t)?(this.bezierDrag=this.getBezierDrag(this.map),this.bezierMouseover=function(t){tn(this).style("stroke-width","3px")},this.bezierMouseout=function(t){tn(this).style("stroke-width","1px")}):(this.bezierDrag=this.emptyBehavior,this.bezierMouseover=null,this.bezierMouseout=null)}},{key:"turnOffDrag",value:function(t){t.on("mousedown.drag",null),t.on("touchstart.drag",null)}},{key:"combineNodesAndDraw",value:function(n,r){var i=this.map,t=i.nodes[r],o=i.nodes[n],a=[];return t.connected_segments.forEach(function(e){var t=null;try{if(void 0===(t=i.reactions[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}if(t.from_node_id===r)t.from_node_id=n;else{if(t.to_node_id!==r)return void console.error("Segment does not connect to dragged node");t.to_node_id=n}o.connected_segments.push(e),a.push(V.clone(e))}),i.delete_node_data([r]),i.sel.selectAll(".node-to-combine").classed("node-to-combine",!1),i.draw_everything(),a}},{key:"getSelectableDrag",value:function(u,h){function d(t,e){(t=u.text_labels[t]).x=t.x+e.x,t.y=t.y+e.y}function f(t){e.dragging=t}var o,a,e=this,t=rg(),p=null,g=null,m=null,_=null,b=null,y=(t.on("start",function(t){var n,r,e;f(!0),t.sourceEvent.stopPropagation(),g={x:0,y:0},-1===tn(this).attr("class").indexOf("label")&&(n=this.parentNode.__data__,r=n.bigg_id,e=this.parentNode,p=setTimeout(function(){e.parentNode.insertBefore(e,e.parentNode.firstChild)},200),u.sel.selectAll(".metabolite-circle").on("mouseover.combine",function(t,e){e.bigg_id===r&&e.node_id!==n.node_id&&tn(this).classed("node-to-combine",!0)}).on("mouseout.combine",function(t,e){e.bigg_id===r&&u.sel.selectAll(".node-to-combine").classed("node-to-combine",!1)}))}),t.on("start",function(t){o=t.x,a=t.y}).on("drag",function(t,e){tn(this.parentNode).classed("selected")||u.select_selectable(this,e);var e={},n=(-1===tn(this).attr("class").indexOf("label")?(e.type="node",e.id=this.parentNode.__data__.node_id):(e.type="label",e.id=this.__data__.text_label_id),u.get_selected_node_ids()),r=u.get_selected_text_label_ids(),e=(m=[],b=[],"node"===e.type&&-1===n.indexOf(e.id)?m.push(e.id):"label"===e.type&&-1===r.indexOf(e.id)?b.push(e.id):(m=n,b=r),_=[],t.x-o),n=(o=t.x,t.y-a),i=(a=t.y,{x:e,y:n});g=V.c_plus_c(g,i),m.forEach(function(t){t=r_(u.nodes[t],t,u.reactions,u.beziers,i);_=V.uniqueConcat([_,t.reaction_ids])}),b.forEach(function(t){d(t,i)}),u.draw_these_nodes(m),u.draw_these_reactions(_),u.draw_these_text_labels(b)}),this.combineNodesAndDraw.bind(this));return t.on("end",function(){var e,i,o,t,a,s,n,r,l,c;f(!1),p=_=b=m=g=(null===m||(e=[],u.sel.selectAll(".node-to-combine").each(function(t){e.push(t.node_id)}),1===e.length?(i=e[0],o=this.parentNode.__data__.node_id,t=V.clone(u.nodes[o]),a=y(i,o),s=V.clone(g),h.push(function(){u.nodes[o]=t;var n=u.nodes[i],r=[];a.forEach(function(e){var t=u.reactions[e.reaction_id].segments[e.segment_id];t.from_node_id===i?t.from_node_id=o:t.to_node_id===i?t.to_node_id=o:console.error("Segment does not connect to fixed node"),n.connected_segments=n.connected_segments.filter(function(t){return!(t.reaction_id===e.reaction_id&&t.segment_id===e.segment_id)}),-1===r.indexOf(e.reaction_id)&&r.push(e.reaction_id)}),r_(t,o,u.reactions,u.beziers,V.c_times_scalar(s,-1)),u.draw_these_nodes([o]),u.draw_these_reactions(r)},function(){r_(t,o,u.reactions,u.beziers,V.c_times_scalar(s,1)),y(i,o)})):(n=V.clone(g),r=V.clone(m),l=V.clone(b),c=V.clone(_),h.push(function(){r.forEach(function(t){r_(u.nodes[t],t,u.reactions,u.beziers,V.c_times_scalar(n,-1))}),l.forEach(function(t){d(t,V.c_times_scalar(n,-1))}),u.draw_these_nodes(r),u.draw_these_reactions(c),u.draw_these_text_labels(l)},function(){r.forEach(function(t){r_(u.nodes[t],t,u.reactions,u.beziers,n)}),l.forEach(function(t){d(t,n)}),u.draw_these_nodes(r),u.draw_these_reactions(c),u.draw_these_text_labels(l)})),u.sel.selectAll(".metabolite-circle").on("mouseover.combine",null).on("mouseout.combine",null),clearTimeout(p)),null)}),t}},{key:"getBezierDrag",value:function(o){function r(t,e,n,r,i){(t=o.reactions[t].segments[e])[n]=V.c_plus_c(t[n],i),o.beziers[r].x=t[n].x,o.beziers[r].y=t[n].y}return this.getGenericDrag(function(t){t.dragging=!0},function(t,e,n){r(t.reaction_id,t.segment_id,t.bezier,t.bezier_id,e),o.draw_these_reactions([t.reaction_id],!1),o.draw_these_beziers([t.bezier_id])},function(t){t.dragging=!1},function(t,e){r(t.reaction_id,t.segment_id,t.bezier,t.bezier_id,V.c_times_scalar(e,-1)),o.draw_these_reactions([t.reaction_id],!1),o.draw_these_beziers([t.bezier_id])},function(t,e){r(t.reaction_id,t.segment_id,t.bezier,t.bezier_id,e),o.draw_these_reactions([t.reaction_id],!1),o.draw_these_beziers([t.bezier_id])},this.map.sel)}},{key:"getReactionLabelDrag",value:function(r){function i(t,e){(t=r.reactions[t]).label_x=t.label_x+e.x,t.label_y=t.label_y+e.y}return this.getGenericDrag(function(t){r.callback_manager.run("hide_tooltip")},function(t,e,n){i(t.reaction_id,e),r.draw_these_reactions([t.reaction_id])},function(){},function(t,e){i(t.reaction_id,V.c_times_scalar(e,-1)),r.draw_these_reactions([t.reaction_id])},function(t,e){i(t.reaction_id,e),r.draw_these_reactions([t.reaction_id])},this.map.sel)}},{key:"getNodeLabelDrag",value:function(r){function i(t,e){(t=r.nodes[t]).label_x=t.label_x+e.x,t.label_y=t.label_y+e.y}return this.getGenericDrag(function(t){r.callback_manager.run("hide_tooltip")},function(t,e,n){i(t.node_id,e),r.draw_these_nodes([t.node_id])},function(){},function(t,e){i(t.node_id,V.c_times_scalar(e,-1)),r.draw_these_nodes([t.node_id])},function(t,e){i(t.node_id,e),r.draw_these_nodes([t.node_id])},this.map.sel)}},{key:"getGenericDrag",value:function(n,i,a,s,l,t){var c,o,u,h=this,e=rg(),d=this.undoStack;t.node();return e.on("start",function(t,e){h.dragging=!0,t.sourceEvent.stopPropagation(),c={x:0,y:0},n(e),o=t.x,u=t.y}),e.on("drag",function(t,e){var n=t.x-o,r=(o=t.x,t.y-u),n=(u=t.y,{x:n,y:r}),r=h_(_n(t,e),2),t={x:r[0],y:r[1]};c=V.c_plus_c(c,n),i(e,n,c,t)}),e.on("end",function(t,e){h.dragging=!1;var t=h_(_n(t,e),2),n=t[0],t=t[1],r=V.clone(e),i=V.clone(c),o={x:n,y:t};d.push(function(){s(r,i,o)},function(){l(r,i,o)}),a()}),e}},{key:"getGenericAngularDrag",value:function(n,o,a,s,l,c,t){var u,h,d,f=this,e=rg(),p=this.undoStack,g=t.node();return e.on("start",function(t,e){f.dragging=!0,t.sourceEvent.stopPropagation(),u=0,n(t,e),h=t.x,d=t.y}),e.on("drag",function(t,e){var n=t.x-h,r=(h=t.x,t.y-d),n=(d=t.y,{x:n,y:r}),r=h_(_n(t,g),2),r={x:r[0],y:r[1]},i=c(),n=V.angle_for_event(n,r,i);o(t,e,n,u+=n,i)}),e.on("end",function(t,e){f.dragging=!1;var n=V.clone(e),r=u,i=V.clone(c());p.push(function(){return s(t,n,r,i)},function(){return l(t,n,r,i)}),a()}),e}}])&&f_(t.prototype,e),r&&f_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r})();let w={GaBuGeRd:[{type:"min",color:"#c8c8c8",size:12,duration:4},{type:"value",value:.01,color:"#9696ff",size:16,duration:3},{type:"value",value:20,color:"#209123",size:20,duration:2},{type:"max",color:"#ff0000",size:25,duration:1}],GaBuRd:[{type:"min",color:"#c8c8c8",size:12,duration:3},{type:"median",color:"#9696ff",size:20,duration:2},{type:"max",color:"#ff0000",size:25,duration:1}],RdYlBu:[{type:"min",color:"#d7191c",size:12,duration:3},{type:"median",color:"#ffffbf",size:20,duration:2},{type:"max",color:"#2c7bb6",size:25,duration:1}],GeGaRd:[{type:"min",color:"#209123",size:25,duration:1},{type:"value",value:0,color:"#c8c8c8",size:12,duration:3},{type:"max",color:"#ff0000",size:25,duration:1}],WhYlRd:[{type:"min",color:"#fffaf0",size:20,duration:4},{type:"median",color:"#f1c470",size:30,duration:3},{type:"max",color:"#800000",size:40,duration:2}]};function g_(t){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=g_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=g_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==g_(t)?t:t+""))(r.key),r)}}var __=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.x=rp(),this.y=rp(),this.x_size=rp(),this.y_size=rp(),this.size=rp(),this.reaction_color=rp().clamp(!0),this.reaction_size=rp().clamp(!0),this.reaction_animation_duration=rp().clamp(!0),this.metabolite_color=rp().clamp(!0),this.metabolite_size=rp().clamp(!0)}return e=t,(n=[{key:"connectToSettings",value:function(o,a,s){var l=this;["reaction","metabolite"].forEach(function(e){var n="".concat(e,"_scale"),r="".concat(e,"_scale_preset"),t=o.get(r),i=o.get(n);t&&i&&i!==w[t]?(console.warn("Both ".concat(n," and ").concat(r," are defined. Ignoring ").concat(r,". Set ").concat(r,' to "false" to hide this warning.')),o.set(r,null)):t?o.set(n,w[t]):i||console.error("Must provide a ".concat(n," or ").concat(r)),o.get(n)&&o.get(n).length<2?console.error("Bad value for option ".concat(n,". Scales must have at least 2 points.")):l.setScale(e,n,s),o.streams[n].onValue(function(t){t&&t!==w[o.get(r)]&&o.set(r,null),l.setScale(e,t,s)}),o.streams[r].onValue(function(t){t&&o.set(n,w[t])}),a.callback_manager.set("calc_data_stats__".concat(e),function(t){t&&l.setScale(e,o.get("".concat(e,"_scale")),s)})})}},{key:"sortScale",value:function(t,n){t=t.map(function(t){var e;if(t.type in n)e=n[t.type];else{if("value"!==t.type)throw new Error("Bad domain type "+t.type);e=t.value}return{v:e,color:t.color,size:t.size,duration:t.duration}}).sort(function(t,e){return t.v-e.v});return{domain:t.map(function(t){return t.v}),color_range:t.map(function(t){return t.color}),size_range:t.map(function(t){return t.size}),duration_range:t.map(function(t){return t.duration})}}},{key:"setScale",value:function(t,e,n){"reaction"===t?this.setReactionScale(e,n):this.setMetaboliteScale(e,n)}},{key:"setReactionScale",value:function(t,e){e=e().reaction;null!==e&&(t=this.sortScale(t,e),this.reaction_color.domain(t.domain),this.reaction_size.domain(t.domain),this.reaction_animation_duration.domain(t.domain),this.reaction_color.range(t.color_range),this.reaction_size.range(t.size_range),this.reaction_animation_duration.range(t.duration_range))}},{key:"setMetaboliteScale",value:function(t,e){e=e().metabolite;null!==e&&(t=this.sortScale(t,e),this.metabolite_color.domain(t.domain),this.metabolite_size.domain(t.domain),this.metabolite_color.range(t.color_range),this.metabolite_size.range(t.size_range))}}])&&m_(e.prototype,n),r&&m_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r})();function b_(t){return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=b_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=b_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==b_(t)?t:t+""))(r.key),r)}}function v_(t,e){return e-1<t+1?0:t+1}var A_=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.stack=Array(40),this.current=-1,this.oldest=-1,this.newest=-1,this.endOfStack=!0,this.topOfStack=!0}return e=t,(n=[{key:"push",value:function(t,e){return this.current=v_(this.current,this.stack.length),this.endOfStack?this.oldest=this.current:this.oldest===this.current&&(this.oldest=v_(this.oldest,this.stack.length)),this.stack[this.current]={undo:t,redo:e},this.newest=this.current,this.topOfStack=!0,this.endOfStack=!1,{do:function(){return e()}}}},{key:"undo",value:function(){if(this.endOfStack)return console.warn("End of stack.");var t,e;this.stack[this.current].undo(),this.current===this.oldest?this.endOfStack=!0:this.current=(t=this.current,e=this.stack.length,t-1<0?e-1:t-1),this.topOfStack=!1}},{key:"redo",value:function(){if(this.topOfStack)return console.warn("Top of stack.");this.endOfStack||(this.current=v_(this.current,this.stack.length)),this.stack[this.current].redo(),this.current===this.newest&&(this.topOfStack=!0),this.endOfStack=!1}}])&&y_(e.prototype,n),r&&y_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r})();function w_(t){return(w_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=w_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=w_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==w_(t)?t:t+""))(r.key),r)}}function E_(t,e){var n;return!e||(n=(e=k.isArray(t)?t:[t]).reduce(function(t,e){var n=e.replace("ctrl+","meta+");return n!==e&&t.push(n),t},e.slice())).length===e.length?t:n}var C_=(()=>{return t=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,a=this,s=t;if(!(a instanceof s))throw new TypeError("Cannot call a class as a function");this.assignedKeys=e,this.inputList=n,this.mousetrap=r?new(Ha())(r):new(Ha()),this.ctrlEqualsCmd=i,this.mousetrap.stopCallback=function(){return!1},this.escapeQueue=[],this.removeEscapeListener=null,this.settings=o,this.enabled=!0,this.update()},(e=[{key:"update",value:function(){var a=this;if(this.mousetrap.reset(),this.enabled)for(var e in this.assignedKeys)(()=>{var o=a.assignedKeys[e];if(!o.key)return;var t=E_(o.key,a.ctrlEqualsCmd);o.inputList=a.inputList,a.mousetrap.bind(t,function(t){if(!o.requires||a.settings.get(o.requires)){var e=!1;if(o.ignoreWithInput)for(var n=0,r=o.inputList.length;n<r;n++){var i=o.inputList[n],i=k.isFunction(i)?i():i;if(null!==i&&i.is_visible()){e=!0;break}}e||(o.fn?o.fn.call(o.target):console.warn("No function for key: "+o.key),t.preventDefault())}},"keydown")})()}},{key:"toggle",value:function(t){k.isUndefined(t)&&(t=!this.enabled),this.enabled=t,this.update()}},{key:"addEnterListener",value:function(t,e){return this.addKeyListener("enter",t,e)}},{key:"_tryDropEscapeListener",value:function(){0===this.escapeQueue.length&&this.removeEscapeListener&&(this.removeEscapeListener(),this.removeEscapeListener=null)}},{key:"addEscapeListener",value:function(e){var n=this;return null===this.removeEscapeListener&&(this.removeEscapeListener=this.addKeyListener("escape",function(){0<n.escapeQueue.length&&n.escapeQueue.pop()(),n._tryDropEscapeListener()})),this.escapeQueue.push(e),function(){var t=n.escapeQueue.indexOf(e);-1<t&&n.escapeQueue.splice(t,1),n._tryDropEscapeListener()}}},{key:"addKeyListener",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=this.mousetrap.unbind.bind(this.mousetrap,t);return this.mousetrap.bind(E_(t,this.ctrlEqualsCmd),function(t){t.preventDefault(),e(),n&&r()}),r}}])&&x_(t.prototype,e),n&&x_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();function k_(t){return(k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=k_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=k_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==k_(t)?t:t+""))(r.key),r)}}var B_=(()=>{function n(t,e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.selection=t,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.resizeEnabled=!0,this.callbackManager=new Lg,this.setup()}return t=n,(e=[{key:"toggleResize",value:function(t){(t=k.isUndefined(t)?!this.resizeEnabled:t)?this.selection.selectAll(".drag-rect").style("pointer-events","auto"):this.selection.selectAll(".drag-rect").style("pointer-events","none")}},{key:"setup",value:function(){function e(t){t.sourceEvent.stopPropagation()}function i(t,e,n){return n=V.d3_transform_catch(n).translate,null!==t&&(n[0]=t),null!==e&&(n[1]=e),"translate("+n+")"}var o,a,s=this,t=this.selection.append("g").classed("canvas-group",!0).data([{x:this.x,y:this.y}]),l=t.append("rect").attr("id","mouse-node").attr("width",10*this.width).attr("height",10*this.height).attr("transform","translate("+[this.x-10*this.width/2,this.y-10*this.height/2]+")").attr("pointer-events","all"),c=(this.mouseNode=l,t.append("rect").attr("id","canvas").attr("width",this.width).attr("height",this.height).attr("transform","translate("+[this.x,this.y]+")")),n=(t.append("image").attr("id","canvas-background").attr("xlink:href","").attr("width",this.width).attr("height",this.height).attr("transform","translate("+[this.x,this.y]+")"),rg().on("start",e).on("drag",function(t,e){var n=e.x;e.x=Math.min(e.x+s.width-50,t.x),s.x=e.x,s.width=s.width+(n-e.x),u.attr("transform",function(t){return i(t.x-50,null,u.attr("transform"))}),l.attr("transform",function(t){return i(t.x,null,l.attr("transform"))}).attr("width",10*s.width),c.attr("transform",function(t){return i(t.x,null,c.attr("transform"))}).attr("width",s.width),d.attr("transform",function(t){return i(t.x+50,null,d.attr("transform"))}).attr("width",s.width-100),f.attr("transform",function(t){return i(t.x+50,null,f.attr("transform"))}).attr("width",s.width-100),s.callbackManager.run("resize")})),u=t.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x-50,t.y+50]+")"}).attr("height",this.height-100).attr("id","dragleft").attr("width",100).attr("cursor","ew-resize").classed("resize-rect",!0).call(n),n=rg().on("start",function(t){o=t.x,e(t)}).on("drag",function(t,e){t.sourceEvent.stopPropagation();var n=t.x-o,r=(o=t.x,Math.max(e.x+50,e.x+s.width+n));s.width=r-e.x,h.attr("transform",function(t){return i(r-50,null,h.attr("transform"))}),l.attr("width",10*s.width),c.attr("width",s.width),d.attr("width",s.width-100),f.attr("width",s.width-100),s.callbackManager.run("resize")}),h=t.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x+s.width-50,t.y+50]+")"}).attr("id","dragright").attr("height",this.height-100).attr("width",100).attr("cursor","ew-resize").classed("resize-rect",!0).call(n),n=rg().on("start",e).on("drag",function(t,e){t.sourceEvent.stopPropagation();var n=e.y;e.y=Math.min(e.y+s.height-50,t.y),s.y=e.y,s.height=s.height+(n-e.y),d.attr("transform",function(t){return i(null,t.y-50,d.attr("transform"))}),l.attr("transform",function(t){return i(null,t.y,l.attr("transform"))}).attr("width",10*s.height),c.attr("transform",function(t){return i(null,t.y,c.attr("transform"))}).attr("height",s.height),u.attr("transform",function(t){return i(null,t.y+50,u.attr("transform"))}).attr("height",s.height-100),h.attr("transform",function(t){return i(null,t.y+50,h.attr("transform"))}).attr("height",s.height-100),s.callbackManager.run("resize")}),d=t.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x+50,t.y-50]+")"}).attr("height",100).attr("width",this.width-100).attr("cursor","ns-resize").classed("resize-rect",!0).call(n),n=rg().on("start",function(t){a=t.y,e(t)}).on("drag",function(t,e){t.sourceEvent.stopPropagation();var n=t.y-a,r=(a=t.y,Math.max(e.y+50,e.y+s.height+n));s.height=r-e.y,f.attr("transform",function(t){return i(null,r-50,f.attr("transform"))}),l.attr("height",10*s.height),c.attr("height",s.height),u.attr("height",s.height-100),h.attr("height",s.height-100),s.callbackManager.run("resize")}),f=t.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x+50,t.y+s.height-50]+")"}).attr("height",100).attr("width",this.width-100).attr("cursor","ns-resize").classed("resize-rect",!0).call(n)}},{key:"sizeAndLocation",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}])&&M_(t.prototype,e),r&&M_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r})();function T_(t){return(T_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=T_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=T_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==T_(t)?t:t+""))(r.key),r)}}var z_=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.index={}}return e=t,(n=[{key:"insert",value:function(t,e,n,r){if(!n&&t in this.index)throw new Error("id is already in the index");if(r&&!("name"in e&&"data"in e))throw new Error("malformed record");this.index[t]=e}},{key:"remove",value:function(t){return t in this.index&&(delete this.index[t],!0)}},{key:"find",value:function(t){var e,n=RegExp(t,"i"),r=[];for(e in this.index){var i=this.index[e];n.exec(i.name)&&r.push(i.data)}return r}}])&&S_(e.prototype,n),r&&S_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r})();function N_(t){return(N_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O_(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function I_(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O_(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],(t=P_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):O_(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function D_(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?j_(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j_(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function j_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function L_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P_(r.key),r)}}function P_(t){t=((t,e)=>{if("object"!=N_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=N_(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==N_(t)?t:t+""}function F_(e){return function(t){return e.apply(null,t)}}var R_=(()=>{function C(t,e,n,r,i,o,a,s,l,c,u){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");var h;null===a&&(a={x:-(h=r.get_size()).width,y:-h.height,width:3*h.width,height:3*h.height}),l=k.isUndefined(l)||null===l||""===l?"new_map":String(l),c=k.isUndefined(c)||null===c||""===c?V.generate_map_id():String(c),u=k.isUndefined(u)||null===u?"":String(u),this.callback_manager=new Lg,this.svg=t,this.defs=V.setup_defs(t,e),this.canvas=new B_(n,a),this.setup_containers(n),this.sel=n,this.zoomContainer=r,this.settings=i,this.cobra_model=o,this.largest_ids={reactions:-1,nodes:-1,segments:-1,text_labels:-1},this.undo_stack=new A_,this.behavior=new p_(this,this.undo_stack),this.draw=new te(this.behavior,this.settings,this),this.key_manager=new C_,this.key_manager.settings=i,this.key_manager.ctrlEqualsCmd=!0,this.enable_search=s,this.search_index=new z_,this.map_name=l,this.map_id=c,this.map_description=u;this.beziers_enabled=!1,this.has_data_on_reactions=!1,this.has_data_on_nodes=!1,this.imported_reaction_data=null,this.imported_metabolite_data=null,this.imported_gene_data=null,this.nodes={},this.reactions={},this.beziers={},this.text_labels={},this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.scale=new __,this.scale.connectToSettings(this.settings,this,this.get_data_statistics.bind(this)),this.rotation_on=!1}return t=C,n=[{key:"from_data",value:function(t,e,n,r,i,o,a,s){var l,c,u=new C(e,n,r,i,o,a,t[1].canvas,s,t[0].map_name,t[0].map_id,t[0].map_description.replace(/(\nLast Modified.*)+$/g,"")+"\nLast Modified "+Date(Date.now()).toString());for(l in u.reactions=t[1].reactions,u.nodes=t[1].nodes,u.text_labels=t[1].text_labels,u.nodes){var h=u.nodes[l];h.connected_segments=[],s&&"metabolite"===h.node_type&&(u.search_index.insert("n"+l,{name:h.bigg_id,data:{type:"metabolite",node_id:l}}),u.search_index.insert("n_name"+l,{name:h.name,data:{type:"metabolite",node_id:l}}))}for(c in u.reactions){var d=u.reactions[c];if(s)for(var f in u.search_index.insert("r"+c,{name:d.bigg_id,data:{type:"reaction",reaction_id:c}}),u.search_index.insert("r_name"+c,{name:d.name,data:{type:"reaction",reaction_id:c}}),d.genes){var p=d.genes[f];u.search_index.insert("r"+c+"_g"+f,{name:p.bigg_id,data:{type:"reaction",reaction_id:c}}),u.search_index.insert("r"+c+"_g_name"+f,{name:p.name,data:{type:"reaction",reaction_id:c}})}var g,m,_,b,y=[];for(b in d.segments)(()=>{if((g=d.segments[b]).reversibility=d.reversibility,!(g.from_node_id in u.nodes&&g.to_node_id in u.nodes))return console.warn("Bad node references in segment "+b+". Deleting segment."),y.push(b);var e=u.nodes[g.from_node_id],n=u.nodes[g.to_node_id];d.metabolites.forEach(function(t){t.bigg_id===e.bigg_id?g.from_node_coefficient=t.coefficient:t.bigg_id===n.bigg_id&&(g.to_node_coefficient=t.coefficient)}),[e,n].forEach(function(t){t.connected_segments.push({segment_id:b,reaction_id:c})}),m=u.nodes[g.from_node_id],_=u.nodes[g.to_node_id],"metabolite"!=m.node_type&&"metabolite"!=_.node_type||(_=V.c_plus_c(m,V.c_times_scalar(V.c_minus_c(_,m),.5)),null===g.b1&&(g.b1=_),null===g.b2&&(g.b2=_))})();y.forEach(function(t){delete d.segments[t]})}if(s)for(var v in u.text_labels){var A=u.text_labels[v];u.search_index.insert("l"+v,{name:A.text,data:{type:"text_label",text_label_id:v}})}u.beziers=c_(u.reactions),u.largest_ids.reactions=E(u.reactions),u.largest_ids.nodes=E(u.nodes),u.largest_ids.text_labels=E(u.text_labels);var w,x=0;for(w in u.reactions)x=E(u.reactions[w].segments,x);return u.largest_ids.segments=x,u.apply_reaction_data_to_map(null),u.apply_metabolite_data_to_map(null),u.apply_gene_data_to_map(null),u;function E(t,e){return k.isUndefined(e)&&(e=0),k.isUndefined(t)?e:Math.max.apply(null,Object.keys(t).map(function(t){return parseInt(t)}).concat([e]))}}}],(e=[{key:"setup_containers",value:function(t){t.append("g").attr("id","reactions"),t.append("g").attr("id","nodes"),t.append("g").attr("id","beziers"),t.append("g").attr("id","text-labels")}},{key:"reset_containers",value:function(){this.sel.select("#reactions").selectAll(".reaction").remove(),this.sel.select("#nodes").selectAll(".node").remove(),this.sel.select("#beziers").selectAll(".bezier").remove(),this.sel.select("#text-labels").selectAll(".text-label").remove()}},{key:"set_status",value:function(t,e){this.callback_manager.run("set_status",null,t),clearTimeout(this._status_timer),this._status_timer=null,void 0!==e&&(this._status_timer=setTimeout(function(){this.callback_manager.run("set_status",null,"")}.bind(this),e))}},{key:"clearMapData",value:function(){this.reactions={},this.beziers={},this.nodes={},this.text_labels={},this.map_name="new_map",this.map_id=V.generate_map_id(),this.map_description=""}},{key:"has_cobra_model",value:function(){return null!==this.cobra_model}},{key:"draw_everything",value:function(){this.draw_all_reactions(!0,!0),this.draw_all_nodes(!0),this.draw_all_text_labels()}},{key:"draw_all_reactions",value:function(t,e){k.isUndefined(t)&&(t=!0),k.isUndefined(e)&&(e=!0);var n,r=[];for(n in this.reactions)r.push(n);this.draw_these_reactions(r,!1),t&&this.beziers_enabled&&this.draw_all_beziers(),e&&this.clear_deleted_reactions(t)}},{key:"draw_these_reactions",value:function(t,e){k.isUndefined(e)&&(e=!0);var t=V.object_slice_for_ids_ref(this.reactions,t),n=function(t){return this.draw.update_reaction(t,this.scale,this.cobra_model,this.nodes,this.defs,this.has_data_on_reactions)}.bind(this);V.draw_an_object(this.sel,"#reactions",".reaction",t,"reaction_id",this.draw.create_reaction.bind(this.draw),n),e&&(n=s_(t),this.draw_these_beziers(n))}},{key:"clear_deleted_reactions",value:function(t){k.isUndefined(t)&&(t=!0),V.draw_an_object(this.sel,"#reactions",".reaction",this.reactions,"reaction_id",null,function(t){V.draw_a_nested_object(t,".segment-group","segments","segment_id",null,null,function(t){t.remove()})},function(t){t.remove()}),!0===t&&this.clear_deleted_beziers()}},{key:"draw_all_nodes",value:function(t){void 0===t&&(t=!0);var e,n=[];for(e in this.nodes)n.push(e);this.draw_these_nodes(n),t&&this.clear_deleted_nodes()}},{key:"draw_these_nodes",value:function(t){var t=V.object_slice_for_ids_ref(this.nodes,t),e=function(t){return this.draw.create_node(t,this.nodes,this.reactions)}.bind(this),n=function(t){return this.draw.update_node(t,this.scale,this.has_data_on_nodes,this.behavior.selectableMousedown,this.behavior.selectableClick,this.behavior.nodeMouseover,this.behavior.nodeMouseout,this.behavior.selectableDrag,this.behavior.nodeLabelDrag)}.bind(this);V.draw_an_object(this.sel,"#nodes",".node",t,"node_id",e,n)}},{key:"clear_deleted_nodes",value:function(){V.draw_an_object(this.sel,"#nodes",".node",this.nodes,"node_id",null,null,function(t){t.remove()})}},{key:"draw_all_text_labels",value:function(){this.draw_these_text_labels(Object.keys(this.text_labels)),this.clear_deleted_text_labels()}},{key:"draw_these_text_labels",value:function(t){t=V.object_slice_for_ids_ref(this.text_labels,t);V.draw_an_object(this.sel,"#text-labels",".text-label",t,"text_label_id",this.draw.create_text_label.bind(this.draw),this.draw.update_text_label.bind(this.draw))}},{key:"clear_deleted_text_labels",value:function(){V.draw_an_object(this.sel,"#text-labels",".text-label",this.text_labels,"text_label_id",null,null,function(t){t.remove()})}},{key:"draw_all_beziers",value:function(){var t,e=[];for(t in this.beziers)e.push(t);this.draw_these_beziers(e),this.clear_deleted_beziers()}},{key:"draw_these_beziers",value:function(t){var t=V.object_slice_for_ids_ref(this.beziers,t),e=function(t){return this.draw.update_bezier(t,this.beziers_enabled,this.behavior.bezierDrag,this.behavior.bezierMouseover,this.behavior.bezierMouseout,this.nodes,this.reactions)}.bind(this);V.draw_an_object(this.sel,"#beziers",".bezier",t,"bezier_id",this.draw.create_bezier.bind(this.draw),e)}},{key:"clear_deleted_beziers",value:function(){V.draw_an_object(this.sel,"#beziers",".bezier",this.beziers,"bezier_id",null,null,function(t){t.remove()})}},{key:"show_beziers",value:function(){this.toggle_beziers(!0)}},{key:"hide_beziers",value:function(){this.toggle_beziers(!1)}},{key:"toggle_beziers",value:function(t){k.isUndefined(t)?this.beziers_enabled=!this.beziers_enabled:this.beziers_enabled=t,this.draw_all_beziers(),this.callback_manager.run("toggle_beziers",null,this.beziers_enabled)}},{key:"apply_reaction_data_to_map",value:function(t,e){var n=this.settings.get("reaction_styles"),r=this.settings.get("reaction_compare_style"),n=v.apply_reaction_data_to_reactions(this.reactions,t,n,r,e);return this.has_data_on_reactions=n,this.imported_reaction_data=n?t:null,this.calc_data_stats("reaction")}},{key:"apply_metabolite_data_to_map",value:function(t,e){var n=this.settings.get("metabolite_styles"),r=this.settings.get("metabolite_compare_style"),n=v.apply_metabolite_data_to_nodes(this.nodes,t,n,r,e);return this.has_data_on_nodes=n,this.imported_metabolite_data=n?t:null,this.calc_data_stats("metabolite")}},{key:"apply_gene_data_to_map",value:function(t,e){var n=this.settings.get("reaction_styles"),r=this.settings.get("reaction_compare_style"),i=this.settings.get("identifiers_on_map"),o=this.settings.get("and_method_in_gene_reaction_rule"),n=v.apply_gene_data_to_reactions(this.reactions,t,n,i,r,o,e);return this.has_data_on_reactions=n,this.imported_gene_data=n?t:null,this.calc_data_stats("reaction")}},{key:"get_data_statistics",value:function(){return this.data_statistics}},{key:"calc_data_stats",value:function(n){if(-1===["reaction","metabolite"].indexOf(n))throw new Error("Bad type "+n);"data_statistics"in this?n in this.data_statistics||(this.data_statistics[n]=null):(this.data_statistics={},this.data_statistics[n]=null);var r=[];if("metabolite"===n)for(var t in this.nodes){t=this.nodes[t];k.isUndefined(t.data)?console.error("metabolite missing "):null!==t.data&&r.push(t.data)}else if("reaction"==n)for(var e in this.reactions){e=this.reactions[e];k.isUndefined(e.data)?console.error("reaction data missing "):null!==e.data&&r.push(e.data)}if(0===r.length)return i=null===this.data_statistics[n],this.data_statistics[n]=null,"reaction"===n?this.callback_manager.run("calc_data_stats__reaction",null,!i):this.callback_manager.run("calc_data_stats__metabolite",null,!i),!i;null===this.data_statistics[n]&&(this.data_statistics[n]={});var i,o,a=!0,s=V.quartiles(r);return[["min",F_(Math.min)],["max",F_(Math.max)],["mean",V.mean],["Q1",function(){return s[0]}],["median",function(){return s[1]}],["Q3",function(){return s[2]}]].forEach(function(t){var e=t[0];(t=0===r.length?null:(0,t[1])(r))!=this.data_statistics[n][e]&&(a=!1),this.data_statistics[n][e]=t}.bind(this)),this.data_statistics[n].min===this.data_statistics[n].max&&null!==this.data_statistics[n].min&&(i=this.data_statistics[n].min,o=this.data_statistics[n].max,this.data_statistics[n].min=i-1-.1*Math.abs(i),this.data_statistics[n].max=o+1+.1*Math.abs(o)),"reaction"===n?this.callback_manager.run("calc_data_stats__reaction",null,!a):this.callback_manager.run("calc_data_stats__metabolite",null,!a),!a}},{key:"get_coords_for_node",value:function(t){t=this.nodes[t];return{x:t.x,y:t.y}}},{key:"get_selected_node_ids",value:function(){var e=[];return this.sel.select("#nodes").selectAll(".selected").each(function(t){e.push(t.node_id)}),e}},{key:"getSelectedNodes",value:function(){var e={};return this.sel.select("#nodes").selectAll(".selected").each(function(t){e[t.node_id]=this.nodes[t.node_id]}.bind(this)),e}},{key:"get_selected_text_label_ids",value:function(){var e=[];return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e.push(t.text_label_id)}),e}},{key:"get_selected_text_labels",value:function(){var e={};return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e[t.text_label_id]=this.text_labels[t.text_label_id]}.bind(this)),e}},{key:"select_all",value:function(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",!0)}},{key:"select_none",value:function(){this.sel.selectAll(".selected").classed("selected",!1)}},{key:"invert_selection",value:function(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",function(){return!tn(this).classed("selected")})}},{key:"select_metabolite_with_id",value:function(n){var r,i;this.deselect_text_labels(),this.sel.select("#nodes").selectAll(".node").classed("selected",function(t){var e=String(t.node_id)==String(n);return e&&(r={x:(i=t).x,y:t.y}),e}),this.sel.selectAll(".start-reaction-target").style("visibility","hidden"),this.callback_manager.run("select_metabolite_with_id",null,i,r)}},{key:"select_selectable",value:function(t,e,n){n=!k.isUndefined(n)&&n;var r,i,o=this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label"),t=-1==tn(t).attr("class").indexOf("text-label")?t.parentNode:t,n=(n?tn(t).classed("selected",!tn(t).classed("selected")):(o.classed("selected",!1),tn(t).classed("selected",!0)),this.sel.select("#nodes").selectAll(".selected")),a=0;n.each(function(t){r={x:(i=t).x,y:t.y},a++}),this.callback_manager.run("select_selectable",null,a,i,r)}},{key:"select_single_node",value:function(){var n=null;return this.sel.select("#nodes").selectAll(".selected").classed("selected",function(t,e){return 0===e&&(n=t,!0)}),n}},{key:"deselect_nodes",value:function(){this.sel.select("#nodes").selectAll(".node").classed("selected",!1),this.callback_manager.run("deselect_nodes")}},{key:"select_text_label",value:function(t,e){this.deselect_nodes(),this.sel.select("#text-labels").selectAll(".text-label").classed("selected",function(t){return e===t}),this.sel.select("#text-labels").selectAll(".selected").each(function(t){t.x}),this.callback_manager.run("select_text_label")}},{key:"deselect_text_labels",value:function(){this.sel.select("#text-labels").selectAll(".text-label").classed("selected",!1)}},{key:"align_vertical",value:function(){return this._align(!1)}},{key:"align_horizontal",value:function(){return this._align(!0)}},{key:"_align",value:function(s){function e(t,e){var n=[];t.map(function(t){t=r_(l.nodes[t.nodeId],t.nodeId,l.reactions,l.beziers,t.displacement);n=V.uniqueConcat([n,t.reaction_ids])}),e.map(function(t){var e=l.reactions[t.reactionId].segments[t.segmentId];e[t.bez]=V.c_plus_c(e[t.bez],t.displacement),l.beziers[t.bezierId].x=e[t.bez].x,l.beziers[t.bezierId].y=e[t.bez].y}),l.draw_these_nodes(t.map(function(t){return t.nodeId})),l.draw_these_reactions(n,!0)}var l=this,c=this.getSelectedNodes(),t=k.pick(c,function(t){return"metabolite"!==t.node_type||t.node_is_primary}),n=0<Object.keys(t).length,r=n?t:c,t=Object.keys(r),u=t.reduce(function(t,e){return t+(s?r[e].y:r[e].x)},0)/t.length,h=k.pairs(r).map(function(t){var t=D_(t,2),e=t[0],t=t[1];return{nodeId:e,displacement:s?{x:0,y:u-t.y}:{x:u-t.x,y:0}}}),d=[],f={};n&&k.mapObject(r,function(a,t){a.connected_segments.map(function(t){var n=t.segment_id,r=t.reaction_id,t=l.reactions[r].segments[n],e=t.to_node_id===a.node_id,i=e?t.from_node_id:t.to_node_id,o=l.nodes[i],e=e?"b2":"b1";o.node_id in c&&t[e]&&(d.push({reactionId:r,segmentId:n,bez:e,bezierId:n+"_"+e,displacement:s?{x:0,y:a.y-t[e].y}:{x:a.x-t[e].x,y:0}}),"metabolite"!==o.node_type||o.node_is_primary||i in f||(t=o.connected_segments.filter(function(t){var e=l.reactions[r].segments[n];return e.to_node_id===o.node_id?e.from_node_id in c:e.to_node_id in c}),o.connected_segments.length<=t.length&&(h.push({nodeId:i,displacement:s?{x:0,y:u-a.y}:{x:u-a.x,y:0}}),f[i]=!0)))})});this.undo_stack.push(function(){function t(t){return t.map(function(t){return I_(I_({},t),{},{displacement:{x:-t.displacement.x,y:-t.displacement.y}})})}e(t(h),t(d))},function(){e(h,d)}).do(),this.set_status(n?"Aligned reactions":"Aligned nodes",3e3)}},{key:"delete_selected",value:function(){var t=this.getSelectedNodes(),e=this.get_selected_text_labels();(1<=Object.keys(t).length||1<=Object.keys(e).length)&&this.delete_selectable(t,e,!0)}},{key:"delete_selectable",value:function(s,l,c){var t=this.segments_and_reactions_for_nodes(s),u=t.segment_objs_w_segments,h=t.reactions,d=V.clone(s),f=V.clone(u),p=V.clone(h),g=V.clone(l),e=function(t,e,n,r){this.delete_node_data(Object.keys(s)),this.delete_segment_data(n),this.delete_reaction_data(Object.keys(e)),this.delete_text_label_data(Object.keys(r));n=!1,e=!1;this.has_data_on_reactions&&(n=this.calc_data_stats("reaction")),this.has_data_on_nodes&&(e=this.calc_data_stats("metabolite")),c&&(n?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(),e?this.draw_all_nodes(!0):this.clear_deleted_nodes(),this.clear_deleted_text_labels())}.bind(this);e(s,h,u,l),this.undo_stack.push(function(){this.extend_nodes(d),this.extend_reactions(p);var t,e,n=Object.keys(p);for(t in f){var r=f[t],i=r.segment,i=([(this.reactions[r.reaction_id].segments[r.segment_id]=i).from_node_id,i.to_node_id].forEach(function(t){t in d||this.nodes[t].connected_segments.push({reaction_id:r.reaction_id,segment_id:r.segment_id})}.bind(this)),r.segment_id),o=r.reaction_id,a={};a[i]=r.segment,V.extend(this.beziers,l_(a,o)),-1===n.indexOf(r.reaction_id)&&n.push(r.reaction_id)}this.has_data_on_reactions?this.calc_data_stats("reaction")?this.draw_all_reactions(!0,!1):this.draw_these_reactions(n):c&&this.draw_these_reactions(n),this.has_data_on_nodes?(e=this.calc_data_stats("metabolite"),c&&(e?this.draw_all_nodes(!1):this.draw_these_nodes(Object.keys(d)))):c&&this.draw_these_nodes(Object.keys(d)),V.extend(this.text_labels,g),c&&this.draw_these_text_labels(Object.keys(g)),l=V.clone(g),s=V.clone(d),u=V.clone(f),h=V.clone(p)}.bind(this),function(){e(s,h,u,l)}.bind(this))}},{key:"delete_node_data",value:function(t){var e=this;t.forEach(function(t){!e.enable_search||"metabolite"!==e.nodes[t].node_type||e.search_index.remove("n"+t)&&e.search_index.remove("n_name"+t)||console.warn("Could not find deleted metabolite in search index"),delete e.nodes[t]})}},{key:"delete_segment_data",value:function(t){for(var e in t){var n=t[e],e=this.reactions[n.reaction_id];if(!(n.segment_id in e.segments))return;var r=e.segments[n.segment_id];[r.from_node_id,r.to_node_id].forEach(function(t){t in this.nodes&&((t=this.nodes[t]).connected_segments=t.connected_segments.filter(function(t){return t.segment_id!=n.segment_id}))}.bind(this)),["b1","b2"].forEach(function(t){t=n.segment_id+"_"+t;delete this.beziers[t]}.bind(this)),delete e.segments[n.segment_id]}}},{key:"delete_reaction_data",value:function(t){t.forEach(function(t){var e,n,r=this.reactions[t];for(e in r.segments)["b1","b2"].forEach(function(t){t=e+"_"+t;delete this.beziers[t]}.bind(this));for(n in delete this.reactions[t],this.search_index.remove("r"+t)&&this.search_index.remove("r_name"+t)||console.warn("Could not find deleted reaction "+t+" in search index"),r.genes)this.search_index.remove("r"+t+"_g"+n)&&this.search_index.remove("r"+t+"_g_name"+n)||console.warn("Could not find deleted gene "+n+" in search index")}.bind(this))}},{key:"delete_text_label_data",value:function(t){t.forEach(function(t){delete this.text_labels[t],this.search_index.remove("l"+t)||console.warn("Could not find deleted text label in search index")}.bind(this))}},{key:"_extend_and_draw_metabolite",value:function(t,e){this.extend_nodes(t);t=[e];if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");this.apply_metabolite_data_to_map(this.imported_metabolite_data,t)?this.draw_all_nodes(!1):this.draw_these_nodes(t)}else this.draw_these_nodes(t)}},{key:"new_reaction_from_scratch",value:function(t,e,n){var r=this;if(this.cobra_model){var i=V.clone(this.cobra_model.reactions[t]);if(0===k.size(i.metabolites))throw Error("No metabolites in reaction "+i.bigg_id);var o=k.map(i.metabolites,function(t,e){return[t,e]}).filter(function(t){return t[0]<0}).map(function(t){return t[1]}),o=(0<o.length?o:Object.keys(i.metabolites))[0],i=this.cobra_model.metabolites[o],a=String(++this.largest_ids.nodes),s=t_(V.to_radians(n),0,1,!0,o,!0),e={connected_segments:[],x:e.x,y:e.y,node_is_primary:!0,label_x:e.x+s.x,label_y:e.y+s.y,name:i.name,bigg_id:o,node_type:"metabolite"},l={},c=(l[a]=e,this._extend_and_draw_metabolite(l,a),V.clone(l)),s=this.new_reaction_for_metabolite(t,a,n,!1),u=s.redo,h=s.undo;this.undo_stack.push(function(){h(),r.delete_node_data(Object.keys(l)),l=V.clone(c),r.clear_deleted_nodes(),r.deselect_nodes()},function(){r._extend_and_draw_metabolite(l,a),u()})}else console.error("No CobraModel. Cannot build new reaction")}},{key:"extend_nodes",value:function(t){if(this.enable_search)for(var e in t){var n=t[e];"metabolite"==n.node_type&&(this.search_index.insert("n"+e,{name:n.bigg_id,data:{type:"metabolite",node_id:e}}),this.search_index.insert("n_name"+e,{name:n.name,data:{type:"metabolite",node_id:e}}))}V.extend(this.nodes,t)}},{key:"extend_reactions",value:function(t){if(this.enable_search)for(var e in t){var n,r=t[e];for(n in this.search_index.insert("r"+e,{name:r.bigg_id,data:{type:"reaction",reaction_id:e}}),this.search_index.insert("r_name"+e,{name:r.name,data:{type:"reaction",reaction_id:e}}),r.genes){var i=r.genes[n];this.search_index.insert("r"+e+"_g"+n,{name:i.bigg_id,data:{type:"reaction",reaction_id:e}}),this.search_index.insert("r"+e+"_g_name"+n,{name:i.name,data:{type:"reaction",reaction_id:e}})}}V.extend(this.reactions,t)}},{key:"_extend_and_draw_reaction",value:function(t,e,n,r){this.extend_reactions(e),V.extend(this.beziers,n),this.delete_node_data([r]),this.extend_nodes(t);n=Object.keys(e);if(this.has_data_on_reactions){var i=!1;if(this.imported_reaction_data)i=this.apply_reaction_data_to_map(this.imported_reaction_data,n);else{if(!this.imported_gene_data)throw new Error("imported_gene_data or imported_reaction_data should not be null");i=this.apply_gene_data_to_map(this.imported_gene_data,n)}i?this.draw_all_reactions(!0,!1):this.draw_these_reactions(n)}else this.draw_these_reactions(n);var o,e=Object.keys(t);if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");(i=this.apply_metabolite_data_to_map(this.imported_metabolite_data,e))?this.draw_all_nodes(!1):this.draw_these_nodes(e)}else this.draw_these_nodes(e);for(o in t){var a=t[o];a.node_is_primary&&o!=r&&(this.select_metabolite_with_id(o),a={x:a.x,y:a.y},this.zoomContainer)&&this.zoomContainer.translateOffScreen(a)}}},{key:"new_reaction_for_metabolite",value:function(t,e,n,r){function i(){delete l[e],a.delete_node_data(Object.keys(l)),a.delete_reaction_data(Object.keys(c)),a.select_metabolite_with_id(e),l=V.clone(h),c=V.clone(d),u=V.clone(f),a.has_data_on_reactions&&a.calc_data_stats("reaction")?a.draw_all_reactions(!0,!0):a.clear_deleted_reactions(!0),a.has_data_on_nodes&&a.calc_data_stats("metabolite")?a.draw_all_nodes(!0):a.clear_deleted_nodes()}function o(){a._extend_and_draw_reaction(l,c,u,e)}var a=this,s=(void 0===r&&(r=!0),this.nodes[e]),t=e_(0,this.cobra_model.reactions[t],this.cobra_model.metabolites,e,V.clone(s),this.largest_ids,this.settings.get("cofactors"),n),l=t.new_nodes,c=t.new_reactions,u=t.new_beziers,h=(this._extend_and_draw_reaction(l,c,u,e),V.clone(l)),d=V.clone(c),f=V.clone(u);return r&&this.undo_stack.push(i,o),{undo:i,redo:o}}},{key:"cycle_primary_node",value:function(){var e=this.getSelectedNodes();if(!k.isEmpty(e)){var n,r=Object.keys(e)[0],a=(e[r],this.reactions),s=this.nodes,i=[];if(s[r].connected_segments.forEach(function(e){var t;n=[e.reaction_id];try{if(void 0===(t=a[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}i.push(t.from_node_id==r?t.to_node_id:t.from_node_id)}),1!=i.length)console.error("Only connected nodes with a single reaction can be selected");else{var o=i[0],l=[r];s[o].connected_segments.forEach(function(e){var t;try{if(void 0===(t=a[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}e=t.from_node_id==o?t.to_node_id:t.from_node_id;"metabolite"==s[e].node_type&&e!=r&&l.push(String(e))});for(var t,c=0;c<l.length;c++)if(1<s[l[c]].connected_segments.length)return void console.error("Only connected nodes with a single reaction can be selected");for(t in e)if(t!=r&&-1==l.indexOf(t))return void console.warn("Selected nodes are not on the same reaction");var u,h=[],e=s[l[l.length-1]],d=e.node_is_primary,f={x:e.x,y:e.y,label_x:e.label_x,label_y:e.label_y},e=(1<e.connected_segments.length&&console.warn("Too many connected segments for node "+e.node_id),e.connected_segments[0]);try{if(void 0===(u=a[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.error("Could not find connected segment "+e.segment_id)}var p,g,m={b1:u.b1,b2:u.b2},e=(l.forEach(function(t){var e=s[t],n=e.node_is_primary,r={x:e.x,y:e.y,label_x:e.label_x,label_y:e.label_y},i=e.connected_segments[0],i=a[i.reaction_id].segments[i.segment_id],o={b1:i.b1,b2:i.b2};e.node_is_primary=d,e.x=f.x,e.y=f.y,e.label_x=f.label_x,e.label_y=f.label_y,i.b1=m.b1,i.b2=m.b2,d=n,f=r,m=o,e.node_is_primary&&(p=t),h.push(t)}),s[o].connected_segments),_=[e[g=e.length-1]];e.forEach(function(t,e){g!=e&&_.push(t)}),s[o].connected_segments=_,this.draw_these_nodes(h),this.draw_these_reactions(n),this.select_metabolite_with_id(p)}}}},{key:"toggle_selected_node_primary",value:function(){var t=this.get_selected_node_ids(),e=function(t){var n={},e=this.settings.get("hide_secondary_metabolites");if(t.forEach(function(t){var e;t in this.nodes?"metabolite"==(e=this.nodes[t]).node_type&&(e.node_is_primary=!e.node_is_primary,n[t]=e):console.warn("Could not find node: "+t)}.bind(this)),this.draw_these_nodes(Object.keys(n)),e){var r,i=this.segments_and_reactions_for_nodes(n),o={};for(r in i.segment_objs_w_segments)o[i.segment_objs_w_segments[r].reaction_id]=!0;this.draw_these_reactions(Object.keys(o))}}.bind(this);e(t),this.undo_stack.push(function(){e(t)},function(){e(t)})}},{key:"segments_and_reactions_for_nodes",value:function(t){var e,n,r={},i={},o={},a=this.reactions;for(e in t)t[e].connected_segments.forEach(function(t){var e;try{if(void 0===(e=a[t.reaction_id].segments[t.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segments for node")}var n=V.clone(t);n.segment=V.clone(e),r[t.segment_id]=n,t.reaction_id in o||(o[t.reaction_id]=[]),o[t.reaction_id].push(t.segment_id)});for(n in o){var s,l=a[n],c=o[n],u=!0;for(s in l.segments)-1==c.indexOf(s)&&(u=!1);u&&(i[n]=l)}return{segment_objs_w_segments:r,reactions:i}}},{key:"add_label_to_search_index",value:function(t,e){this.search_index.insert("l"+t,{name:e,data:{type:"text_label",text_label_id:t}})}},{key:"new_text_label",value:function(t,e){r=this.largest_ids,n=e,t=t;var n,r={id:String(++r.text_labels),label:{text:n,x:t.x,y:t.y}};return this.text_labels[r.id]=r.label,this.draw_these_text_labels([r.id]),""!==e&&this.add_label_to_search_index(r.id,e),r.id}},{key:"edit_text_label",value:function(r,t,e,i){if(k.isUndefined(i)&&(i=!1),""===t)throw new Error("Should not be called for empty string");var n=function(t,e){this.text_labels[r].text=t,e&&this.draw_these_text_labels([r]);var e="l"+r,n=this.search_index.remove(e);i||n||console.warn("Could not find modified text label in search index"),this.search_index.insert(e,{name:t,data:{type:"text_label",text_label_id:r}})}.bind(this),o=V.clone(this.text_labels[r]);n(t,e),this.undo_stack.push(function(){i?(this.delete_text_label_data([r]),this.clear_deleted_text_labels()):n(o.text,!0)}.bind(this),function(){i?(this.text_labels[r]=V.clone(o),this.text_labels[r].text=t,this.draw_these_text_labels([r]),this.add_label_to_search_index(r,t)):n(t,!0)}.bind(this))}},{key:"zoom_extent_nodes",value:function(t){this._zoom_extent(t,"nodes")}},{key:"zoom_extent_canvas",value:function(t){this._zoom_extent(t,"canvas")}},{key:"_zoom_extent",value:function(t,e){k.isUndefined(t)&&(t="nodes"===e?.2:0),k.isUndefined(e)&&(e="canvas");var n,r,i=this.get_size();if(t*=i.height,"nodes"===e){var o,a={x:null,y:null},s={x:null,y:null};for(o in this.nodes){var l=this.nodes[o];null===a.x&&(a.x=l.x),null===a.y&&(a.y=l.y),null===s.x&&(s.x=l.x),null===s.y&&(s.y=l.y),a.x=Math.min(a.x,l.x),a.y=Math.min(a.y,l.y),s.x=Math.max(s.x,l.x),s.y=Math.max(s.y,l.y)}n=Math.min((i.width-2*t)/(s.x-a.x),(i.height-2*t)/(s.y-a.y)),r={x:-a.x*n+t+(i.width-2*t-(s.x-a.x)*n)/2,y:-a.y*n+t+(i.height-2*t-(s.y-a.y)*n)/2}}else{if("canvas"!=e)return console.error("Did not recognize mode");n=Math.min((i.width-2*t)/this.canvas.width,(i.height-2*t)/this.canvas.height),r={x:-this.canvas.x*n+t+(i.width-2*t-this.canvas.width*n)/2,y:-this.canvas.y*n+t+(i.height-2*t-this.canvas.height*n)/2}}return this.zoomContainer.goTo(n,r),null}},{key:"get_size",value:function(){return this.zoomContainer.get_size()}},{key:"zoom_to_reaction",value:function(t){var t=this.reactions[t],e=this.get_size(),t={x:.5*-t.label_x+e.width/2,y:.5*-t.label_y+e.height/2};this.zoomContainer.goTo(.5,t)}},{key:"zoom_to_node",value:function(t){var t=this.nodes[t],e=this.get_size(),t={x:.5*-t.label_x+e.width/2,y:.5*-t.label_y+e.height/2};this.zoomContainer.goTo(.5,t)}},{key:"zoom_to_text_label",value:function(t){var t=this.text_labels[t],e=this.get_size(),t={x:.5*-t.x+e.width/2,y:.5*-t.y+e.height/2};this.zoomContainer.goTo(.5,t)}},{key:"highlight_reaction",value:function(t){this.highlight(this.sel.selectAll("#r"+t).selectAll("text"))}},{key:"highlight_node",value:function(t){this.highlight(this.sel.selectAll("#n"+t).selectAll("text"))}},{key:"highlight_text_label",value:function(t){this.highlight(this.sel.selectAll("#l"+t).selectAll("text"))}},{key:"highlight",value:function(t){this.sel.selectAll(".highlight").classed("highlight",!1),null!==t&&t.classed("highlight",!0)}},{key:"save",value:function(){V.download_json(this.map_for_export(),this.map_name)}},{key:"map_for_export",value:function(){var t,e,n,r=[{map_name:this.map_name,map_id:this.map_id,map_description:this.map_description,homepage:"https://escher.github.io",schema:"https://escher.github.io/escher/jsonschema/1-0-0#"},{reactions:V.clone(this.reactions),nodes:V.clone(this.nodes),text_labels:V.clone(this.text_labels),canvas:this.canvas.sizeAndLocation()}];for(t in r[1].reactions){var i,o=r[1].reactions[t],a={};for(i in["name","bigg_id","reversibility","label_x","label_y","gene_reaction_rule","genes","metabolites"].forEach(function(t){a[t]=o[t]}),a.segments={},o.segments){var s=o.segments[i],l={};["from_node_id","to_node_id","b1","b2"].forEach(function(t){l[t]=s[t]}),a.segments[i]=l}r[1].reactions[t]=a}for(e in r[1].nodes){var c=r[1].nodes[e],u={};("metabolite"===c.node_type?["node_type","x","y","bigg_id","name","label_x","label_y","node_is_primary"]:["node_type","x","y"]).forEach(function(t){u[t]=c[t]}),r[1].nodes[e]=u}for(n in r[1].text_labels){var h=r[1].text_labels[n],d={};["x","y","text"].forEach(function(t){d[t]=h[t]}),r[1].text_labels[n]=d}var f=r[1].canvas,p={};return["x","y","width","height"].forEach(function(t){p[t]=f[t]}),r[1].canvas=p,r}},{key:"saveMap",value:function(t,e,n){var r=this,i=(this.callback_manager.run(t),this.zoomContainer.windowScale),o=this.zoomContainer.windowTranslate,a=this.canvas.sizeAndLocation(),s={w:this.canvas.mouseNode.attr("width"),h:this.canvas.mouseNode.attr("height"),transform:this.canvas.mouseNode.attr("transform")};"gif"===n?this.settings.get("reaction_data")&&V.downloadGif("".concat(V.get_current_date(),"_").concat(this.map_name),this.scale.reaction_color):this.zoomContainer._goToSvg(1,{x:-a.x,y:-a.y},function(){r.svg.attr("width",a.width),r.svg.attr("height",a.height),r.canvas.mouseNode.attr("width","0px"),r.canvas.mouseNode.attr("height","0px"),r.canvas.mouseNode.attr("transform",null);var t=r.sel.selectAll(".multimarker-circle,.midmarker-circle,#canvas,.bezier,#rotation-center,.direction-arrow,.start-reaction-target").style("visibility","hidden");"svg"===n?V.downloadSvg("saved_map",r.svg,!0):"png"===n&&V.downloadPng("saved_map",r.svg),r.zoomContainer._goToSvg(i,o,function(){r.svg.attr("width",null),r.svg.attr("height",null),r.canvas.mouseNode.attr("width",s.w),r.canvas.mouseNode.attr("height",s.h),r.canvas.mouseNode.attr("transform",s.transform),t.style("visibility",null),r.callback_manager.run(e)})})}},{key:"save_svg",value:function(){this.saveMap("before_svg_export","after_svg_export","svg")}},{key:"save_png",value:function(){this.saveMap("before_png_export","after_png_export","png")}},{key:"save_gif",value:function(){this.saveMap("before_gif_export","after_gif_export","gif")}},{key:"convert_map",value:function(){var a=this;if(this.callback_manager.run("before_convert_map"),!this.has_cobra_model())throw Error("No COBRA model loaded.");var t,e,n=this.cobra_model,r={},s=["name","gene_reaction_rule","genes"],i={},o=["name"],l=!1;for(t in this.reactions){var c,u,h=this.reactions[t],l=!1,d=function(){var r=n.reactions[u];if(r.bigg_id==h.bigg_id){s.forEach(function(t){h[t]=r[t]});var t,i=!0,o=null;for(t in r.metabolites)if(0===(e=>{var t=r.metabolites[e],n=k.find(h.metabolites,function(t){return t.bigg_id===e});return void 0===n||(n=n.coefficient,!0===(o=null===o?0<t!=0<n:o)&&0<t==0<n)||!1===o&&0<t!=0<n?(i=!1,0):void 0})(t))break;if(o&&i){h.metabolites.forEach(function(t){t.coefficient=-t.coefficient});for(c in h.segments)(()=>{var e=h.segments[c],n=(e.reversibility=h.reversibility,a.nodes[e.from_node_id]),r=a.nodes[e.to_node_id];h.metabolites.forEach(function(t){t.bigg_id===n.bigg_id?e.from_node_coefficient=t.coefficient:t.bigg_id===r.bigg_id&&(e.to_node_coefficient=t.coefficient)})})()}if(!i)return console.warn("Metabolites for ".concat(r.bigg_id," are different in model and map. Could\n not check and fix direction.")),1;l=!0}};for(u in n.reactions)if(d())break;l||(r[t]=!0)}for(e in this.nodes){var f=this.nodes[e];if("metabolite"==f.node_type){for(var p in l=!1,n.metabolites){var g=n.metabolites[p];g.bigg_id==f.bigg_id&&(o.forEach(function(t){f[t]=g[t]}),l=!0)}l||(i[e]=!0)}}var m=Object.keys(r).length,_=Object.keys(i).length;0===m&&0===_?this.set_status("Successfully converted attributes.",1e4):(0===_?this.set_status("Converted attributes, but count not find "+m+" reactions in the model.",1e4):0===m?this.set_status("Converted attributes, but count not find "+_+" metabolites in the model.",1e4):this.set_status("Converted attributes, but count not find "+m+" reactions and "+_+" metabolites in the model.",1e4),this.settings.set("highlight_missing",!0)),this.draw_everything(),this.callback_manager.run("after_convert_map")}},{key:"import_background",value:function(e){var t,n=this;this.callback_manager.run("before_import_background"),e instanceof File?((t=new FileReader).onload=function(t){t=t.target.result;document.getElementById("canvas-background").setAttribute("href",t),document.getElementById("canvas-background").setAttribute("display",""),n.callback_manager.run("after_import_background")},t.readAsDataURL(e)):"string"==typeof e&&fetch(e).then(function(t){return t.blob()}).then(function(t){var e=new FileReader;e.onloadend=function(){var t=e.result;document.getElementById("canvas-background").setAttribute("href",t),document.getElementById("canvas-background").setAttribute("display",""),n.callback_manager.run("after_import_background")},e.readAsDataURL(t)}).catch(function(t){console.error("Failed to load image from URL: ".concat(e),t)})}},{key:"clear_background",value:function(){this.callback_manager.run("before_clear_background"),document.getElementById("canvas-background").setAttribute("href",""),document.getElementById("canvas-background").setAttribute("display","none"),this.callback_manager.run("after_clear_background")}}])&&L_(t.prototype,e),n&&L_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();let ee=t=>()=>t;function W_(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function U_(t){t.preventDefault(),t.stopImmediatePropagation()}var Y_={name:"drag"},G_={name:"space"},V_={name:"handle"},Q_={name:"center"};let{abs:ne,max:W,min:U}=Math;function q_(t){return[+t[0],+t[1]]}function H_(t){return[q_(t[0]),q_(t[1])]}var Z_={name:"x",handles:["w","e"].map(rb),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},X_={name:"y",handles:["n","s"].map(rb),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},J_={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(rb),input:function(t){return null==t?null:H_(t)},output:function(t){return t}},K_={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$_={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},tb={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},eb={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},nb={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function rb(t){return{type:t}}function ib(t){return!t.ctrlKey&&!t.button}function ob(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ab(){return navigator.maxTouchPoints||"ontouchstart"in this}function sb(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function lb(t){t=t.__brush;return t?t.dim.output(t.selection):null}function cb(D){var j,e=ob,L=ib,n=ab,P=!0,i=Ht("start","brush","end"),r=6;function o(t){var e=t.property("__brush",u).selectAll(".overlay").data([rb("overlay")]),e=(e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",K_.overlay).merge(e).each(function(){var t=sb(this).extent;tn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([rb("selection")]).enter().append("rect").attr("class","selection").attr("cursor",K_.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges"),t.selectAll(".handle").data(D.handles,function(t){return t.type}));e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return K_[t.type]}),t.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",l).on("touchend.brush touchcancel.brush",c).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){var t=tn(this),e=sb(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-r/2:e[0][0]-r/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-r/2:e[0][1]-r/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+r:r}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+r:r})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function R(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new a(t,e,n):r}function a(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function s(t){var o,i,a,s,l,c,u,h,d,f,p,g,m,_,b,y,v,A,w,x,E,C,k,M,B,T,S,e,n,z,r;function N(t){for(var e of t.changedTouches||[t])for(var n of T)n.identifier===e.identifier&&(n.cur=_n(e,o));var r,i;!k||M||B||1!==T.length||(r=T[0],ne(r.cur[0]-r[0])>ne(r.cur[1]-r[1])?B=!0:M=!0);for(i of T)i.cur&&(i[0]=i.cur[0],i[1]=i.cur[1]);C=!0,U_(t),O(t)}function O(t){var e,n=T[0],r=n.point0;switch(x=n[0]-r[0],E=n[1]-r[1],a){case G_:case Y_:s&&(x=W(h-d,U(_-b,x)),f=d+x,y=b+x),l&&(E=W(p-g,U(v-A,E)),m=g+E,w=A+E);break;case V_:T[1]?(s&&(f=W(h,U(_,T[0][0])),y=W(h,U(_,T[1][0])),s=1),l&&(m=W(p,U(v,T[0][1])),w=W(p,U(v,T[1][1])),l=1)):(s<0?(x=W(h-d,U(_-d,x)),f=d+x,y=b):0<s&&(x=W(h-b,U(_-b,x)),f=d,y=b+x),l<0?(E=W(p-g,U(v-g,E)),m=g+E,w=A):0<l&&(E=W(p-A,U(v-A,E)),m=g,w=A+E));break;case Q_:s&&(f=W(h,U(_,d-x*s)),y=W(h,U(_,b+x*s))),l&&(m=W(p,U(v,g-E*l)),w=W(p,U(v,A+E*l)))}y<f&&(s*=-1,e=d,d=b,b=e,e=f,f=y,y=e,i in $_)&&z.attr("cursor",K_[i=$_[i]]),w<m&&(l*=-1,e=g,g=A,A=e,e=m,m=w,w=e,i in tb)&&z.attr("cursor",K_[i=tb[i]]),c.selection&&(u=c.selection),M&&(f=u[0][0],y=u[1][0]),B&&(m=u[0][1],w=u[1][1]),u[0][0]===f&&u[0][1]===m&&u[1][0]===y&&u[1][1]===w||(c.selection=[[f,m],[y,w]],F.call(o),S.brush(t,a.name))}function I(t){if(t.stopImmediatePropagation(),t.touches){if(t.touches.length)return;j&&clearTimeout(j),j=setTimeout(function(){j=null},500)}else Jp(t.view,C),r.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;n.attr("pointer-events","all"),z.attr("cursor",K_.overlay),c.selection&&(u=c.selection),(e=u)[0][0]!==e[1][0]&&e[0][1]!==e[1][1]||(c.selection=null,F.call(o)),S.end(t,a.name)}j&&!t.touches||L.apply(this,arguments)&&(o=this,i=t.target.__data__.type,a="selection"===(P&&t.metaKey?i="overlay":i)?Y_:P&&t.altKey?Q_:V_,s=D===X_?null:eb[i],l=D===Z_?null:nb[i],e=(c=sb(o)).extent,u=c.selection,h=e[0][0],p=e[0][1],_=e[1][0],v=e[1][1],E=x=0,k=s&&l&&P&&t.shiftKey,T=Array.from(t.touches||[t],t=>{var e=t.identifier;return(t=_n(t,o)).point0=t.slice(),t.identifier=e,t}),_m(o),S=R(o,arguments,!0).beforestart(),"overlay"===i?(u&&(C=!0),e=[T[0],T[1]||T[0]],c.selection=u=[[d=D===X_?h:U(e[0][0],e[1][0]),g=D===Z_?p:U(e[0][1],e[1][1])],[b=D===X_?_:W(e[0][0],e[1][0]),A=D===Z_?v:W(e[0][1],e[1][1])]],1<T.length&&O(t)):(d=u[0][0],g=u[0][1],b=u[1][0],A=u[1][1]),f=d,m=g,y=b,w=A,n=tn(o).attr("pointer-events","none"),z=n.selectAll(".overlay").attr("cursor",K_[i]),t.touches?(S.moved=N,S.ended=I):(r=tn(t.view).on("mousemove.brush",N,!0).on("mouseup.brush",I,!0),P&&r.on("keydown.brush",function(t){switch(t.keyCode){case 16:k=s&&l;break;case 18:a===V_&&(s&&(b=y-x*s,d=f+x*s),l&&(A=w-E*l,g=m+E*l),a=Q_,O(t));break;case 32:a!==V_&&a!==Q_||(s<0?b=y-x:0<s&&(d=f-x),l<0?A=w-E:0<l&&(g=m-E),a=G_,z.attr("cursor",K_.selection),O(t));break;default:return}U_(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:k&&(M=B=k=!1,O(t));break;case 18:a===Q_&&(s<0?b=y:0<s&&(d=f),l<0?A=w:0<l&&(g=m),a=V_,O(t));break;case 32:a===G_&&(a=t.altKey?(s&&(b=y-x*s,d=f+x*s),l&&(A=w-E*l,g=m+E*l),Q_):(s<0?b=y:0<s&&(d=f),l<0?A=w:0<l&&(g=m),V_),z.attr("cursor",K_[i]),O(t));break;default:return}U_(t)},!0),Xp(t.view)),F.call(o),S.start(t,a.name))}function l(t){R(this,arguments).moved(t)}function c(t){R(this,arguments).ended(t)}function u(){var t=this.__brush||{selection:null};return t.extent=H_(e.apply(this,arguments)),t.dim=D,t}return o.move=function(t,s,r){t.tween?t.on("start.brush",function(t){R(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){R(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,r=R(e,arguments),t=n.selection,i=D.input("function"==typeof s?s.apply(this,arguments):s,n.extent),o=Df(t,i);function a(t){n.selection=1===t&&null===i?null:o(t),F.call(e),r.brush()}return null!==t&&null!==i?a:a(1)}):t.each(function(){var t=arguments,e=this.__brush,n=D.input("function"==typeof s?s.apply(this,t):s,e.extent),t=R(this,t).beforestart();_m(this),e.selection=null===n?null:n,F.call(this),t.start(r).brush(r).end(r)})},o.clear=function(t,e){o.move(t,null,e)},a.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(t,e,n){var r=tn(this.that).datum();i.call(t,this.that,new W_(t,{sourceEvent:e,target:o,selection:D.output(this.state.selection),mode:n,dispatch:i}),r)}},o.extent=function(t){return arguments.length?(e="function"==typeof t?t:ee(H_(t)),o):e},o.filter=function(t){return arguments.length?(L="function"==typeof t?t:ee(!!t),o):L},o.touchable=function(t){return arguments.length?(n="function"==typeof t?t:ee(!!t),o):n},o.handleSize=function(t){return arguments.length?(r=+t,o):r},o.keyModifiers=function(t){return arguments.length?(P=!!t,o):P},o.on=function(){var t=i.on.apply(i,arguments);return t===i?o:t},o}function ub(t){return(ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=ub(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=ub(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ub(t)?t:t+""))(r.key),r)}}var db=(()=>{function o(t,e,n,r){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.brushSel=t.append("g").attr("id","brush-container");var i=this.brushSel.node(),t=t.select(r).node().nextSibling;i!==t&&i.parentNode.insertBefore(i,t),this.enabled=e,this.map=n}return t=o,(e=[{key:"brushIsEnabled",value:function(){return this.map.sel.select(".brush").empty()}},{key:"toggle",value:function(t){(t=void 0===t?!this.enabled:t)?this.setupSelectionBrush():this.brushSel.selectAll("*").remove()}},{key:"turnOffCrosshair",value:function(t){t.selectAll("rect").attr("cursor",null)}},{key:"setupSelectionBrush",value:function(){var t=this,e=this.map,n=this.brushSel,r=e.sel.selectAll("#nodes,#text-labels"),i=e.canvas.sizeAndLocation(),o=i.width,a=i.height,s=i.x,i=i.y,l=this.turnOffCrosshair.bind(this),c=(n.selectAll("*").remove(),!1),u=cb(J_).extent([[s,i],[s+o,i+a]]).on("start",function(){t.turnOffCrosshair(n),e.settings.get("hide_secondary_metabolites")&&(e.settings.set("hide_secondary_metabolites",!1),e.draw_everything(),e.set_status("Showing secondary metabolites. You can hide them again in Settings.",2e3))}).on("brush",function(t){var t=t.shiftKey,n=lb(this);null!==n&&(t?r.selectAll(".node:not(.selected),.text-label:not(.selected)"):r.selectAll(".node,.text-label")).classed("selected",function(t){var e=t.x,t=t.y;return n[0][0]<=e&&e<n[1][0]&&n[0][1]<=t&&t<n[1][1]})}).on("end",function(){l(n),null===lb(this)?c?c=!1:e.select_none():(c=!0,n.call(u.move,null))});n.call(u),l(n)}}])&&hb(t.prototype,e),n&&hb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();function fb(t){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=fb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=fb(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==fb(t)?t:t+""))(r.key),r)}}function gb(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?mb(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mb(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function mb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var _b=(()=>{function e(t,r){var i=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._options=t,this.statusBus=new Fv;t=k.chain(t).mapObject(function(t,e){var n=k.contains(r,e),e=i.createSetting(e,t,n);return[e.bus,e.stream,e.acceptedStream]}).pairs().map(function(t){var t=gb(t,2),e=t[0],t=gb(t[1],3);return[[e,t[0]],[e,t[1]],[e,t[2]]]}).unzip().map(function(t){return k.object(t)}).value(),t=gb(t,3);this.busses=t[0],this.streams=t[1],this.acceptedStreams=t[2]}return t=e,(n=[{key:"createSetting",value:function(e,t,n){var r=this,i=new Fv,n=(n?(n=this.statusBus,na(i,n.toProperty(null)).scan({savedValue:null,currentValue:null,lastStatus:null},function(t,e){var n=t.savedValue,r=t.currentValue,t=t.lastStatus,e=gb(e,2),i=e[0],e=e[1],t=t!==e;return t&&"hold"===e?{savedValue:r,currentValue:r,lastStatus:e}:t||"hold"!==e?t&&"abandon"===e?{savedValue:null,currentValue:n,lastStatus:e}:t&&"accept"===e?{savedValue:null,currentValue:r,lastStatus:e}:{savedValue:null,currentValue:i,lastStatus:e}:{savedValue:n,currentValue:i,lastStatus:e}}).skip(1).map(function(t){return t.currentValue}).skipDuplicates()):i).toEventStream(),o=n.sampledBy(this.statusBus.filter(function(t){return"accept"===t||"abandon"===t})).merge(n.filter(this.statusBus.map(function(t){return"accept"===t}).toProperty(!0)));return n.onValue(function(t){r._options[e]=t}),i.push(t),{bus:i,stream:n,acceptedStream:o}}},{key:"set_conditional",value:function(t,e){return console.warn("set_conditional is deprecated. Use Settings.set() instead"),this.set(t,e)}},{key:"set",value:function(t,e){if(!(t in this.busses))throw new Error("Invalid setting name ".concat(t));this.busses[t].push(e)}},{key:"get_option",value:function(t){return console.warn("get_option is deprecated. Use Settings.get() instead"),this.get(t)}},{key:"get",value:function(t){return this._options[t]}},{key:"holdChanges",value:function(){this.statusBus.push("hold")}},{key:"abandonChanges",value:function(){this.statusBus.push("abandon")}},{key:"acceptChanges",value:function(){this.statusBus.push("accept")}}])&&pb(t.prototype,n),r&&pb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r})();function bb(t){return(bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=bb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=bb(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==bb(t)?t:t+""))(r.key),r)}}var vb=(()=>{function r(t,e,n){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");t=t.append("div").attr("id","text-edit-input");this.placedDiv=qt(t,e),this.placedDiv.hide(),this.input=t.append("input"),this.map=e,this.setUpMapCallbacks(e),this.zoomContainer=n,this.setUpZoomCallbacks(n),this.isNew=!1}return t=r,(e=[{key:"setUpMapCallbacks",value:function(t){var n=this;t.callback_manager.set("edit_text_label.text_edit_input",function(t,e){n.show(t,e)}),t.callback_manager.set("new_text_label.text_edit_input",function(t){null!==n.activeTarget&&n._acceptChanges(n.activeTarget.target),n.hide(),n._addAndEdit(t)}),t.callback_manager.set("hide_text_label_editor.text_edit_input",function(){n.hide()})}},{key:"setUpZoomCallbacks",value:function(t){var e=this;t.callbackManager.set("zoom.text_edit_input",function(){e.activeTarget&&e._acceptChanges(e.activeTarget.target),e.is_visible()&&e.hide()}),t.callbackManager.set("go_to.text_edit_input",function(){e.activeTarget&&e._acceptChanges(e.activeTarget.target),e.is_visible()&&e.hide()})}},{key:"is_visible",value:function(){return this.placedDiv.is_visible()}},{key:"show",value:function(t,e){var n=this;this.activeTarget&&this._acceptChanges(this.activeTarget.target),this.activeTarget={target:t,coords:e},t.each(function(t){n.input.node().value=t.text}),this.placedDiv.place(e),this.input.node().focus(),this.clearEscape=this.map.key_manager.addEscapeListener(function(){n._acceptChanges(t),n.hide()},!0),this.clearEnter=this.map.key_manager.addEnterListener(function(){n._acceptChanges(t),n.hide()},!0)}},{key:"hide",value:function(){this.isNew=!1,this.placedDiv.hide(),this.input.attr("value",""),this.activeTarget=null,this.clearEscape&&this.clearEscape(),this.clearEscape=null,this.clearEnter&&this.clearEnter(),this.clearEnter=null}},{key:"_acceptChanges",value:function(t){var e,n=this,r=this.input.node().value;""===r?t.each(function(t){var e={};e[t.text_label_id]=n.map.text_labels[t.text_label_id],n.map.delete_selectable({},e,!0)}):(e=[],t.each(function(t){n.map.edit_text_label(t.text_label_id,r,!0,n.isNew),e.push(t.text_label_id)}))}},{key:"_addAndEdit",value:function(t){this.isNew=!0;var e=this.map.new_text_label(t,""),n=this.map.sel.select("#text-labels").selectAll(".text-label").filter(function(t){return t.text_label_id===e});n.select("text").classed("edit-text-cursor",!0),this.show(n,t)}}])&&yb(t.prototype,e),n&&yb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();function Ab(t){return(Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wb(){return(wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)!{}.hasOwnProperty.call(r,n)||(t[n]=r[n])}return t}).apply(null,arguments)}function xb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Ab(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Ab(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ab(t)?t:t+""))(r.key),r)}}function Eb(t,e,n){e=kb(e);var r=t,e=Cb()?Reflect.construct(e,n||[],kb(t).constructor):e.apply(t,n);if(!e||"object"!=Ab(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Cb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Cb=function(){return!!t})()}function kb(t){return(kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mb(t,e){return(Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Bb=(()=>{function e(t){if(this instanceof e)return(t=Eb(this,e,[t])).state={},t;throw new TypeError("Cannot call a class as a function")}var t,n=e,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&Mb(n,r),n=e,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.connectSetStateFn(function(t){return e.setState(t)})}},{key:"is_visible",value:function(){return this.state.display}},{key:"render",value:function(){var e=this;return this.state.display?He(this.props.component,wb({setDisplay:function(t){return e.setState({display:t})},ref:this.props.refPassthrough},this.state)):null}}])&&xb(n.prototype,r),t&&xb(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n})();let x=function(t,e,n,r){Fi(He(Bb,{component:t,connectSetStateFn:n,ref:e,refPassthrough:4<arguments.length&&void 0!==arguments[4]?arguments[4]:null}),r,0<r.children.length?r.firstChild:void 0)};function Tb(t){return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Tb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Tb(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Tb(t)?t:t+""))(r.key),r)}}function zb(t,e,n){e=Ob(e);var r=t,e=Nb()?Reflect.construct(e,n||[],Ob(t).constructor):e.apply(t,n);if(!e||"object"!=Tb(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Nb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Nb=function(){return!!t})()}function Ob(t){return(Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ib(t,e){return(Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}let re=(()=>{function e(t){if(this instanceof e)return(t=zb(this,e,[t])).setWrapperRef=t.setWrapperRef.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t.state={visible:!1},t;throw new TypeError("Cannot call a class as a function")}var t,n=e,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&Ib(n,r),n=e,(r=[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.handleClickOutside)}},{key:"setWrapperRef",value:function(t){this.wrapperRef=t}},{key:"handleClickOutside",value:function(t){this.wrapperRef&&!this.wrapperRef.contains(t.target)&&this.setState({visible:!1})}},{key:"render",value:function(){var t=this;return He("div",{className:"selector"},He("div",{className:["selectorTitle",this.props.disabled?"disabled":""].join(" "),ref:this.setWrapperRef,onClick:function(){t.props.disabled||t.setState({visible:!t.state.visible})}},"Preset Scale Selections",He("i",{className:"icon-sort-down"})),He("div",{className:"selectorMenu",style:this.state.visible?{display:"block"}:{display:"none"}},this.props.children.map(function(t){return t})))}}])&&Sb(n.prototype,r),t&&Sb(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n})(),ie=re,oe=Le(72),t=Le.n(oe),ae=Le(825),e=Le.n(ae),se=Le(659),r=Le.n(se),le=Le(56),o=Le.n(le),ce=Le(540),a=Le.n(ce),ue=Le(113),s=Le.n(ue),he=Le(965),E={};function Db(t){return(Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Db(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Db(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Db(t)?t:t+""))(r.key),r)}}function Lb(t,e,n){e=Fb(e);var r=t,e=Pb()?Reflect.construct(e,n||[],Fb(t).constructor):e.apply(t,n);if(!e||"object"!=Db(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Pb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Pb=function(){return!!t})()}function Fb(t){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rb(t,e){return(Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}E.styleTagTransform=s(),E.setAttributes=o(),E.insert=r().bind(null,"head"),E.domAPI=e(),E.insertStyleElement=a(),t()(he.A,E),he.A&&he.A.locals;let de=(()=>{function n(){var t=this,e=n;if(t instanceof e)return Lb(this,n,arguments);throw new TypeError("Cannot call a class as a function")}var t,e=n,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Rb(e,r),e=n,(r=[{key:"setUpDrag",value:function(){var n,t,r=this;tn(this.base).select(".pickerBox").on("mousedown.drag",null),this.props.disabled||(n=0,t=rg().on("start",function(t){n=t.x,r.props.focus&&r.props.focus()}).on("drag",function(t){"value"!==r.props.type&&r.props.onChange&&r.props.onChange("type","value");var e=t.x-n,t=(n=t.x,r.props.value+e/r.props.trackWidth*(r.props.max-r.props.min)),e=Math.max(r.props.min,Math.min(r.props.max,t));r.props.onChange("value",e)}).container(function(){return r.base.parentNode.parentNode}),tn(this.base).select(".pickerBox").call(t))}},{key:"componentDidUpdate",value:function(){this.setUpDrag()}},{key:"componentDidMount",value:function(){this.setUpDrag()}},{key:"render",value:function(){var e=this;return He("div",{className:"picker",style:{left:"".concat(this.props.location*this.props.trackWidth,"px"),zIndex:this.props.zIndex}},this.props.showTrash&&He("div",{className:"trashDiv"},He("i",{className:"icon-trash-empty","aria-hidden":"true",onClick:function(){e.props.remove&&e.props.remove()}})),He("div",{className:"pickerBox",onClick:function(){e.props.focus&&e.props.focus()}}),He("div",{className:["pickerOptions",.8<this.props.location?"rightOptions":""].join(" ")},He("input",{type:"text",className:"option",value:this.props.disabled?"":"value"===this.props.type?parseFloat(this.props.value.toFixed(2)):"".concat(this.props.type," (").concat(parseFloat(this.props.value.toFixed(2)),")"),disabled:this.props.disabled,onInput:function(t){t=parseFloat(t.target.value);isNaN(t)||e.props.onChange("value",t)},onFocus:function(t){t.target.select(),e.props.focus&&e.props.focus()}}),He("select",{className:"typePicker",value:this.props.type,onChange:function(t){e.props.onChange&&e.props.onChange("type",t.target.value)},disabled:this.props.disabled,onFocus:function(t){e.props.focus&&e.props.focus()}},He("option",{value:"value"},"Value"),He("option",{value:"min"},"Min"),He("option",{value:"mean"},"Mean"),He("option",{value:"Q1"},"Q1"),He("option",{value:"median"},"Median"),He("option",{value:"Q3"},"Q3"),He("option",{value:"max"},"Max")),He("div",{className:"colorOptions"},He("input",{type:"text",className:"colorText",onInput:function(t){e.props.onChange&&e.props.onChange("color",t.target.value)},onFocus:function(t){t.target.select(),e.props.focus&&e.props.focus()},value:this.props.color||"",disabled:this.props.disabled}),He("input",{type:"color",className:"colorWheel",onInput:function(t){e.props.onChange&&e.props.onChange("color",t.target.value)},onFocus:function(t){t.target.select(),e.props.focus&&e.props.focus()},value:this.props.color||"",disabled:this.props.disabled})),He("input",{type:"text",className:"option",onInput:function(t){e.props.onChange&&e.props.onChange("size",parseInt(t.target.value))},onFocus:function(t){t.target.select(),e.props.focus&&e.props.focus()},value:this.props.size,disabled:this.props.disabled}),this.props.duration&&He("input",{type:"text",className:"option",onInput:function(t){e.props.onChange&&e.props.onChange("duration",parseInt(t.target.value))},onFocus:function(t){t.target.select(),e.props.focus&&e.props.focus()},value:this.props.duration,disabled:this.props.disabled})))}}])&&jb(e.prototype,r),t&&jb(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})(),fe=de,pe=Le(894);var Wb=Le.n(pe),Ye=Le(342);function Ub(t){return(Ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yb(t,e,n){return(e=qb(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gb(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||((t,e)=>{var n;if(t)return"string"==typeof t?Vb(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vb(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Vb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qb(r.key),r)}}function qb(t){t=((t,e)=>{if("object"!=Ub(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Ub(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==Ub(t)?t:t+""}function Hb(t,e,n){e=Xb(e);var r=t,e=Zb()?Reflect.construct(e,n||[],Xb(t).constructor):e.apply(t,n);if(!e||"object"!=Ub(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Zb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Zb=function(){return!!t})()}function Xb(t){return(Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jb(t,e){return(Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(Pe={}).styleTagTransform=s(),Pe.setAttributes=o(),Pe.insert=r().bind(null,"head"),Pe.domAPI=e(),Pe.insertStyleElement=a(),t()(Ye.A,Pe),Ye.A&&Ye.A.locals;let ge=(()=>{function n(){var t=this,e=n;if(t instanceof e)return Hb(this,n,arguments);throw new TypeError("Cannot call a class as a function")}var t,e=n,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Jb(e,r),e=n,(r=[{key:"sortScale",value:function(){var e=this;return k.sortBy(this.props.scale,function(t){return"value"===t.type?t.value:e.props.stats[t.type]})}},{key:"placePickers",value:function(){var e=this.props.stats,t=this.props.scale.reduce(function(t,e){var t=Gb(t,2),n=t[0],t=t[1];return"value"===e.type?[Math.min(e.value,n),Math.max(e.value,t)]:[n,t]},[e.min,e.max]),t=Gb(t,2),n=t[0],r=t[1];return{pickerLocations:this.props.scale.map(function(t){return(("value"===t.type?t.value:e[t.type])-n)/(r-n)}),absoluteMax:r,absoluteMin:n}}},{key:"scaleChange",value:function(t,e,n){var r=null;"type"===e&&"value"!==n?(r=Wb()(this.props.scale,Yb({},t,Yb(Yb({},e,{$set:n}),"$unset",["value"]))),this.props.onChange(r)):"value"===e&&"value"!==this.props.scale[t].type?(r=Wb()(this.props.scale,Yb({},t,Yb(Yb({},e,{$set:n}),"type",{$set:"value"}))),this.props.onChange(r)):"value"===n?(r=Wb()(this.props.scale,Yb({},t,Yb(Yb({},e,{$set:n}),"$merge",{value:this.props.stats[this.props.scale[t].type]}))),this.props.onChange(r)):isNaN(parseFloat(n))&&("#"!==n[0]||"color"!==e)||(r=Wb()(this.props.scale,Yb({},t,Yb({},e,{$set:n}))),this.props.onChange(r))}},{key:"addColorStop",value:function(t){t=Wb()(this.props.scale,{$push:[{type:"value",value:t.layerX/t.target.clientWidth*this.props.stats.max+(1-t.layerX/t.target.clientWidth)*this.props.stats.min,color:"#9696ff",size:20,duration:1}]});this.props.onChange(t)}},{key:"makeGradient",value:function(n,r){var i=this,t=this.sortScale();return(t.length<2?[{type:"min",color:"#f1ecfa"},{type:"max",color:"#f1ecfa"}]:t).map(function(t){var e="value"===t.type?t.value:i.props.stats[t.type];return" ".concat(t.color," ").concat((e-n)/(r-n)*100,"%")}).toString()}},{key:"removeColorStop",value:function(t){t=Wb()(this.props.scale,{$splice:[[[t],1]]});this.props.onChange(t)}},{key:"render",value:function(){var e,r,i,t,o=this;return this.props.stats?(t=this.placePickers(),e=t.pickerLocations,r=t.absoluteMax,i=t.absoluteMin,t=this.props.scale.map(function(t,n){return"value"!==t.type?He(fe,{trackWidth:400,type:t.type,location:e[n],onChange:function(t,e){return o.scaleChange(n,t,e)},focus:function(){return o.setState({focusedPicker:n})},remove:function(){return o.removeColorStop(n)},min:i,max:r,value:o.props.stats[t.type],color:t.color,size:t.size,duration:t.duration,zIndex:o.state.focusedPicker===n?"2":"0",showTrash:3<=o.props.scale.length}):null!=t.value?He(fe,{trackWidth:400,type:t.type,location:e[n],onChange:function(t,e){return o.scaleChange(n,t,e)},focus:function(){return o.setState({focusedPicker:n})},remove:function(){return o.removeColorStop(n)},min:i,max:r,value:t.value,color:t.color,size:t.size,duration:t.duration,zIndex:o.state.focusedPicker===n?"2":"0",showTrash:3<=o.props.scale.length}):void 0}),He("div",{className:"scaleEditor"},He("div",null,He("i",{className:"settingsTip"},"To add a color stop to the scale, click the gradient"),He("div",{className:"scaleTrack",style:{width:400}},He("div",{className:"gradient",onClick:function(t){return o.addColorStop(t)},style:{background:"linear-gradient(to right,".concat(this.makeGradient(i,r),")")}}),t)),He("div",{className:"scaleLabels"},He("label",null,"Value:"),He("label",null,"Color:"),He("label",null,"Size:"),"Reaction"===this.props.type&&He("label",{title:"The seconds a reaction animation will last. The bigger the number, the slower the animation. And number must be greater than 0."},"Speed:")),He("div",{className:"noDataStyle"},He("label",{className:"styleHeader"},"Styles for reactions with no data"),He("br",null),He("label",null,"Color:"),He("input",{type:"text",className:"colorInput",value:this.props.noDataColor,onInput:function(t){return o.props.onNoDataColorChange(t.target.value)}}),He("input",{type:"color",className:"colorWheel",value:this.props.noDataColor,onInput:function(t){return o.props.onNoDataColorChange(t.target.value)}}),He("label",null,"Size:"),He("input",{type:"text",className:"sizeInput",value:this.props.noDataSize,onInput:function(t){return o.props.onNoDataSizeChange(parseFloat(t.target.value))}})))):He("div",{className:"scaleEditor"},He("div",null,He("div",{className:"scaleTrack disabled",style:{width:400}},this.props.type," data not loaded",He(fe,{location:0,trackWidth:400,disabled:!0}),He(fe,{location:1,trackWidth:400,disabled:!0}))),He("div",{className:"scaleLabels"},He("label",null,"Value:"),He("label",null,"Color:"),He("label",null,"Size:")),He("div",{className:"noDataStyle"},He("label",{className:"styleHeader"},"Styles for reactions with no data"),He("br",null),He("label",null,"Color:"),He("input",{type:"text",className:"colorInput",disabled:!0}),He("input",{type:"color",className:"colorWheel",disabled:!0}),He("label",null,"Size:"),He("input",{type:"text",className:"sizeInput",disabled:!0})))}}])&&Qb(e.prototype,r),t&&Qb(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})();function Kb(t){return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Kb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Kb(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Kb(t)?t:t+""))(r.key),r)}}function ty(t,e,n){e=ny(e);var r=t,e=ey()?Reflect.construct(e,n||[],ny(t).constructor):e.apply(t,n);if(!e||"object"!=Kb(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function ey(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ey=function(){return!!t})()}function ny(t){return(ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ry(t,e){return(ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}let me=(()=>{function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var e=ty(this,i,[t]),n=[];if(t.scale)for(var r=0;r<t.scale.length;r++)n.push(t.scale[r].color);return e.state={colors:n},e}var t,e=i,n=Ze;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ry(e,n),e=i,(n=[{key:"render",value:function(){var t=this;return He("div",{className:"scaleSelection",onClick:function(){return t.props.onClick()}},He("div",null,this.props.name),He("div",{className:"scaleColors"},this.state.colors.map(function(t){return He("i",{className:"icon-blank",style:{color:t}})})))}}])&&$b(e.prototype,n),t&&$b(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})(),_e=me,be=Le(605),C={};function iy(t){return(iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oy(t){return(t=>{if(Array.isArray(t))return ay(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,e)=>{var n;if(t)return"string"==typeof t?ay(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ay(t,e):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function ay(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=iy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=iy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==iy(t)?t:t+""))(r.key),r)}}function ly(t,e,n){e=uy(e);var r=t,e=cy()?Reflect.construct(e,n||[],uy(t).constructor):e.apply(t,n);if(!e||"object"!=iy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function cy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(cy=function(){return!!t})()}function uy(t){return(uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hy(t,e){return(hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}C.styleTagTransform=s(),C.setAttributes=o(),C.insert=r().bind(null,"head"),C.domAPI=e(),C.insertStyleElement=a(),t()(be.A,C),be.A&&be.A.locals;let ye=(()=>{function n(){var t=this,e=n;if(t instanceof e)return ly(this,n,arguments);throw new TypeError("Cannot call a class as a function")}var t,e=n,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&hy(e,r),e=n,(r=[{key:"componentWillMount",value:function(){var t=this;this.props.settings.holdChanges(),this.setState({clearEscape:this.props.map.key_manager.addEscapeListener(function(){return t.abandonChanges()},!0),clearEnter:this.props.map.key_manager.addKeyListener(["enter"],function(){return t.saveChanges()},!0)})}},{key:"componentWillUnmount",value:function(){this.state.clearEscape(),this.state.clearEnter()}},{key:"abandonChanges",value:function(){this.props.settings.abandonChanges(),this.props.setDisplay(!1)}},{key:"saveChanges",value:function(){this.props.settings.acceptChanges(),this.props.setDisplay(!1)}},{key:"handleStyle",value:function(t,e){var n=this.props.settings.get(e),r=n.indexOf(t);-1===r?this.props.settings.set(e,[].concat(oy(n),[t])):this.props.settings.set(e,[].concat(oy(n.slice(0,r)),oy(n.slice(r+1))))}},{key:"render",value:function(){var t=this,n=this.props.settings,r=n.get("enable_tooltips")||[],e=this.props.map.get_data_statistics();return He("div",{className:"settingsBackground"},He("div",{className:"settingsBoxContainer"},He("button",{className:"discardChanges btn",onClick:function(){return t.abandonChanges()}},He("i",{className:"icon-cancel","aria-hidden":"true"})),He("button",{className:"saveChanges btn",onClick:function(){return t.saveChanges()}},He("i",{className:"icon-ok","aria-hidden":"true"})),He("div",{className:"settingsBox"},He("div",{className:"settingsTip"},He("i",null,"Tip: Hover over an option to see more details about it.")),He("hr",null),He("div",{className:"title"},"View and build options"),He("div",{className:"settingsContainer"},He("table",{className:"radioSelection"},He("tr",{title:"The identifiers that are show in the reaction, gene, and metabolite labels on the map."},He("td",{className:"optionLabel"},"Identifiers:"),He("td",{className:"singleLine"},He("label",{className:"optionGroup"},He("input",{type:"radio",name:"identifiers",onClick:function(){n.set("identifiers_on_map","bigg_id")},checked:"bigg_id"===n.get("identifiers_on_map")}),"ID's"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"identifiers",onClick:function(){n.set("identifiers_on_map","name")},checked:"name"===n.get("identifiers_on_map")}),"Descriptive names")))),He("table",{className:"radioSelection"},He("tr",{title:"Open the item in VMH or BiGG Models when the label is clicked"},He("td",{className:"optionLabel"},"Open in vmh:"),He("td",{className:"singleLine"},He("label",{className:"optionGroup"},He("input",{type:"radio",name:"open_in_vmh",onClick:function(){n.set("open_in_vmh",!0),window.localStorage.setItem("open_in_vmh",!0)},checked:n.get("open_in_vmh")}),"vmh"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"open_in_vmh",onClick:function(){n.set("open_in_vmh",!1),window.localStorage.setItem("open_in_vmh",!1)},checked:!n.get("open_in_vmh")}),"BiGG")))),He("table",{className:"radioSelection"},He("tr",{title:"The "},He("td",{className:"optionLabel",title:"Animation Line Style"},"Line Style:"),He("td",{className:"singleLine"},He("label",{className:"optionGroup"},He("input",{type:"radio",name:"animation_line_style",onClick:function(){n.set("animation_line_style","dashed")},checked:"dashed"===n.get("animation_line_style")}),"Dash"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"animation_line_style",onClick:function(){n.set("animation_line_style","dotted")},checked:"dotted"===n.get("animation_line_style")}),"Dot")))),He("label",{title:"If checked, then the scroll wheel and trackpad will control zoom rather than pan."},He("input",{type:"checkbox",onClick:function(){"zoom"===n.get("scroll_behavior")?n.set("scroll_behavior","pan"):n.set("scroll_behavior","zoom")},checked:"zoom"===n.get("scroll_behavior")}),"Scroll to zoom (instead of scroll to pan)"),He("label",{title:"If checked, then only the primary metabolites will be displayed."},He("input",{type:"checkbox",onClick:function(){return n.set("hide_secondary_metabolites",!n.get("hide_secondary_metabolites"))},checked:n.get("hide_secondary_metabolites")}),"Hide secondary metabolites"),He("label",{title:"If checked, then gene reaction rules will be displayed below each reaction label. (Gene reaction rules are always shown when gene data is loaded.)"},He("input",{type:"checkbox",onClick:function(){return n.set("show_gene_reaction_rules",!n.get("show_gene_reaction_rules"))},checked:n.get("show_gene_reaction_rules")}),"Show gene reaction rules"),He("label",{title:"If checked, hide all reaction, gene, and metabolite labels"},He("input",{type:"checkbox",onClick:function(){return n.set("hide_all_labels",!n.get("hide_all_labels"))},checked:n.get("hide_all_labels")}),"Hide reaction, gene, and metabolite labels"),He("label",{title:"If checked, then allow duplicate reactions during model building."},He("input",{type:"checkbox",onClick:function(){return n.set("allow_building_duplicate_reactions",!n.get("allow_building_duplicate_reactions"))},checked:n.get("allow_building_duplicate_reactions")}),"Allow duplicate reactions"),He("label",{title:"If checked, then highlight in red all the reactions on the map that are not present in the loaded model."},He("input",{type:"checkbox",onClick:function(){n.set("highlight_missing",!n.get("highlight_missing"))},checked:n.get("highlight_missing")}),"Highlight reactions not in model"),He("label",{title:"If checked, then the reactions with no flux will be hidden from the map when you loaded the reaction data."},He("input",{type:"checkbox",onClick:function(){n.set("hide_no_data_reaction",!n.get("hide_no_data_reaction"))},checked:n.get("hide_no_data_reaction")}),"Hide no data reactions"),He("label",{title:"If true, then use CSS3 3D transforms to speed up panning and zooming."},He("input",{type:"checkbox",onClick:function(){n.set("use_3d_transform",!n.get("use_3d_transform"))},checked:n.get("use_3d_transform")}),"Use 3D transform for responsive panning and zooming"),He("table",{style:{marginTop:"5px"}},He("tr",{title:"Determines over which elements tooltips will display for reactions, metabolites, and genes"},He("td",null,"Show tooltips over:"),He("td",{className:"singleLine"},He("label",{className:"tooltipOption",title:"If checked, tooltips will display over the gene, reaction, and metabolite labels"},He("input",{type:"checkbox",onClick:function(){var t=k.contains(r,"label")?k.filter(r,function(t){return"label"!==t}):[].concat(oy(r),["label"]);n.set("enable_tooltips",t)},checked:k.contains(r,"label")}),"Labels"),He("label",{className:"tooltipOption",title:"If checked, tooltips will display over the reaction line segments and metabolite circles"},He("input",{type:"checkbox",onClick:function(){var e="object",t=k.contains(r,e)?k.filter(r,function(t){return t!==e}):[].concat(oy(r),[e]);n.set("enable_tooltips",t)},checked:k.contains(r,"object")}),"Objects"))))),He("div",{className:"settingsTip",style:{marginTop:"16px"}},He("i",null,"Tip: To increase map performance, turn off text boxes (i.e. labels and gene reaction rules).")),He("hr",null),He("div",{className:"scaleTitle"},He("div",{className:"title"},"Reactions"),He(ie,{disabled:null===e.reaction},Object.values(k.mapObject(w,function(t,e){return He(_e,{name:e,scale:t,onClick:function(){n.set("reaction_scale_preset",e)}})})))),He(ge,{scale:n.get("reaction_scale"),settings:n,type:"Reaction",stats:e.reaction,noDataColor:n.get("reaction_no_data_color"),noDataSize:n.get("reaction_no_data_size"),onChange:function(t){n.set("reaction_scale",t)},onNoDataColorChange:function(t){n.set("reaction_no_data_color",t)},onNoDataSizeChange:function(t){n.set("reaction_no_data_size",t)},abs:-1<n.get("reaction_styles").indexOf("abs")}),He("div",{className:"subheading"},"Reaction or Gene data"),He("table",{className:"radioSelection"},He("tr",null,He("td",{className:"optionLabel",title:"Options for reactions data"},"Options:"),He("td",null,He("label",{className:"optionGroup",title:"If checked, use the absolute value when calculating colors and sizes of reactions on the map"},He("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("abs","reaction_styles")},checked:k.contains(n.get("reaction_styles"),"abs"),disabled:null===e.reaction}),"Absolute value"),He("label",{className:"optionGroup",title:"If checked, then size the thickness of reaction lines according to the value of the reaction data"},He("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("size","reaction_styles")},checked:k.contains(n.get("reaction_styles"),"size"),disabled:null===e.reaction}),"Size"),He("label",{className:"optionGroup",title:"If checked, then color the reaction lines according to the value of the reaction data"},He("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("color","reaction_styles")},checked:k.contains(n.get("reaction_styles"),"color"),disabled:null===e.reaction}),"Color"),He("br",null),He("label",{className:"optionGroup",title:"If checked, then show data values in the reaction labels"},He("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("text","reaction_styles")},checked:k.contains(n.get("reaction_styles"),"text"),disabled:null===e.reaction}),"Text (Show data in label)"))),He("tr",{title:"The function that will be used to compare datasets, when paired data is loaded"},He("td",{className:"optionLabel"},"Comparison:"),He("td",null,He("label",{className:"optionGroup"},He("input",{type:"radio",name:"reactionCompare",onClick:function(){return n.set("reaction_compare_style","fold")},checked:"fold"===n.get("reaction_compare_style"),disabled:null===e.reaction}),"Fold Change"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"reactionCompare",onClick:function(){return n.set("reaction_compare_style","log2_fold")},checked:"log2_fold"===n.get("reaction_compare_style"),disabled:null===e.reaction}),"Log2 (Fold Change)"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"reactionCompare",onClick:function(){return n.set("reaction_compare_style","diff")},checked:"diff"===n.get("reaction_compare_style"),disabled:null===e.reaction}),"Difference")))),He("table",{className:"radioSelection"},He("tr",{title:"The function that will be used to evaluate AND connections in gene reaction rules (AND connections generally connect components of an enzyme complex)"},He("td",{className:"optionLabelWide"},"Method for evaluating AND:"),He("td",null,He("label",{className:"optionGroup"},He("input",{type:"radio",name:"andMethod",onClick:function(){return n.set("and_method_in_gene_reaction_rule","mean")},checked:"mean"===n.get("and_method_in_gene_reaction_rule"),disabled:null===e.reaction}),"Mean"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"andMethod",onClick:function(){return n.set("and_method_in_gene_reaction_rule","min")},checked:"min"===n.get("and_method_in_gene_reaction_rule"),disabled:null===e.reaction}),"Min")))),He("hr",null),He("div",{className:"scaleTitle"},He("div",{className:"title"},"Metabolites"),He(ie,{disabled:null===e.metabolite},Object.values(k.mapObject(w,function(t,e){return He(_e,{name:e,scale:t,onClick:function(){return n.set("metabolite_scale",t)}})})))),He(ge,{scale:n.get("metabolite_scale"),settings:n,type:"Metabolite",stats:e.metabolite,noDataColor:n.get("metabolite_no_data_color"),noDataSize:n.get("metabolite_no_data_size"),onChange:function(t){n.set("metabolite_scale",t)},onNoDataColorChange:function(t){n.set("metabolite_no_data_color",t)},onNoDataSizeChange:function(t){n.set("metabolite_no_data_size",t)},abs:k.contains(n.get("metabolite_styles"),"abs")}),He("div",{className:"subheading"},"Metabolite data"),He("table",{className:"radioSelection"},He("tr",null,He("td",{className:"optionLabel",title:"Options for metabolite data"},"Options:"),He("td",null,He("label",{className:"optionGroup",title:"If checked, use the absolute value when calculating colors and sizes of metabolites on the map"},He("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("abs","metabolite_styles")},checked:k.contains(n.get("metabolite_styles"),"abs"),disabled:null===e.metabolite}),"Absolute value"),He("label",{className:"optionGroup",title:"If checked, then size the thickness of reaction lines according to the value of the metabolite data"},He("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("size","metabolite_styles")},checked:k.contains(n.get("metabolite_styles"),"size"),disabled:null===e.metabolite}),"Size"),He("label",{className:"optionGroup",title:"If checked, then color the reaction lines according to the value of the metabolite data"},He("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("color","metabolite_styles")},checked:k.contains(n.get("metabolite_styles"),"color"),disabled:null===e.metabolite}),"Color"),He("br",null),He("label",{className:"optionGroup",title:"If checked, then show data values in the metabolite labels"},He("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("text","metabolite_styles")},checked:k.contains(n.get("metabolite_styles"),"text"),disabled:null===e.metabolite}),"Text (Show data in label)"))),He("tr",{title:"The function that will be used to compare datasets, when paired data is loaded"},He("td",{className:"optionLabel"},"Comparison:"),He("td",null,He("label",{className:"optionGroup"},He("input",{type:"radio",name:"metaboliteCompare",onClick:function(){return n.set("metabolite_compare_style","fold")},checked:"fold"===n.get("metabolite_compare_style"),disabled:null===e.metabolite}),"Fold Change"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"metaboliteCompare",onClick:function(){return n.set("metabolite_compare_style","log2_fold")},checked:"log2_fold"===n.get("metabolite_compare_style"),disabled:null===e.metabolite}),"Log2 (Fold Change)"),He("label",{className:"optionGroup"},He("input",{type:"radio",name:"metaboliteCompare",onClick:function(){return n.set("metabolite_compare_style","diff")},checked:"diff"===n.get("metabolite_compare_style"),disabled:null===e.metabolite}),"Difference")))))))}}])&&sy(e.prototype,r),t&&sy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})(),ve=ye,Ae=Le(248),M={};function dy(t){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=dy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=dy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==dy(t)?t:t+""))(r.key),r)}}function py(t,e,n){e=my(e);var r=t,e=gy()?Reflect.construct(e,n||[],my(t).constructor):e.apply(t,n);if(!e||"object"!=dy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function gy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(gy=function(){return!!t})()}function my(t){return(my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _y(t,e){return(_y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}M.styleTagTransform=s(),M.setAttributes=o(),M.insert=r().bind(null,"head"),M.domAPI=e(),M.insertStyleElement=a(),t()(Ae.A,M),Ae.A&&Ae.A.locals;let we=(()=>{function e(t){if(this instanceof e)return(t=py(this,e,[t])).state={visible:null},t.setWrapperRef=t.setWrapperRef.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t;throw new TypeError("Cannot call a class as a function")}var t,n=e,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&_y(n,r),n=e,(r=[{key:"componentWillMount",value:function(){this.setState({visible:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.handleClickOutside)}},{key:"componentWillReceiveProps",value:function(t){this.setState({visible:t.visible})}},{key:"setWrapperRef",value:function(t){this.wrapperRef=t}},{key:"handleClickOutside",value:function(t){this.wrapperRef&&!this.wrapperRef.contains(t.target)&&this.setState({visible:!1})}},{key:"render",value:function(){var t=this;return He("li",{className:"dropdown",style:this.props.disabledEditing?{display:"none"}:{display:"block"}},He("div",{className:"dropdownButton",tabindex:"0",ref:this.setWrapperRef,onClick:function(){return t.setState({visible:!t.state.visible})}},this.props.name," ",He("i",{className:"icon-sort-down"})),He("ul",{className:"menu",style:this.state.visible?{display:"block"}:{display:"none"},id:"true"===this.props.rightMenu?"rightMenu":""},this.props.children.map(function(t){return t&&"divider"===t.props.name?He("li",{style:{height:"1px",backgroundColor:"#e5e5e5",padding:"0",margin:"8px 0"}}):t})))}}])&&fy(n.prototype,r),t&&fy(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n})(),B=we;function by(t){return(by="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=by(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=by(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==by(t)?t:t+""))(r.key),r)}}function vy(t,e,n){e=wy(e);var r=t,e=Ay()?Reflect.construct(e,n||[],wy(t).constructor):e.apply(t,n);if(!e||"object"!=by(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Ay(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ay=function(){return!!t})()}function wy(t){return(wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xy(t,e){return(xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}let xe=(()=>{function e(t){if(this instanceof e)return(t=vy(this,e,[t])).assignKeyForInput=t.assignKeyForInput.bind(t),t;throw new TypeError("Cannot call a class as a function")}var t,n=e,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&xy(n,r),n=e,(r=[{key:"handleFileInput",value:function(t){var n=this,e=t.files[0],r=this.props.fileInputProcessor;r?r(e):((r=new window.FileReader).onload=function(){V.load_json_or_csv(e,v.csv_converter,function(t,e){return n.props.onClick(e)})},void 0!==e&&r.readAsText(e)),t.value=null}},{key:"assignKeyForInput",value:function(t){this.props.assignKey&&this.props.assignKey(function(){return t.click()})}},{key:"render",value:function(){var e=this,t=k.contains(this.props.disabledButtons,this.props.name.replace(/ \(.*\)$/,""));return"load"===this.props.type?He("label",{className:"menuButton",tabindex:t?"-1":"0",id:t?"disabled":""},He("input",{type:"file",onChange:function(t){return e.handleFileInput(t.target)},accept:this.props.accept||".json,.csv",disabled:t,ref:this.assignKeyForInput}),this.props.name):this.props.checkMark?He("li",{className:"menuButton",tabindex:t?"-1":"0",onClick:this.props.onClick,id:t?"disabled":""},He("i",{className:"icon-ok","aria-hidden":"true"}," "),this.props.name):He("li",{className:"menuButton",tabindex:t?"-1":"0",onClick:t?null:this.props.onClick,id:t?"disabled":""},this.props.name)}}])&&yy(n.prototype,r),t&&yy(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n})(),T=xe;function Ey(t){return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Ey(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Ey(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ey(t)?t:t+""))(r.key),r)}}function ky(t,e,n){e=By(e);var r=t,e=My()?Reflect.construct(e,n||[],By(t).constructor):e.apply(t,n);if(!e||"object"!=Ey(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function My(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(My=function(){return!!t})()}function By(t){return(By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ty(t,e){return(Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}let Ee=(()=>{function n(){var t=this,e=n;if(t instanceof e)return ky(this,n,arguments);throw new TypeError("Cannot call a class as a function")}var t,e=n,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Ty(e,r),e=n,(r=[{key:"componentWillMount",value:function(){var t=this;this.props.sel.selectAll(".escher-zoom-container").on("touchend.menuBar",function(){return t.setState({dropdownVisible:!1})}).on("click.menuBar",function(){return t.setState({dropdownVisible:!1})})}},{key:"componentWillUnmount",value:function(){this.props.sel.selectAll(".escher-zoom-container").on("touchend.menuBar",null).on("click.menuBar",null)}},{key:"render",value:function(){var e=this,t=this.props.settings.get("enable_keys"),n=this.props.settings.get("disabled_buttons"),r=this.props.map.beziers_enabled,i=this.props.settings.get("full_screen_button");return He("ul",{className:"menu-bar"},He(B,{name:"Map",dropdownVisible:this.props.dropdownVisible},He(T,{name:"Save map JSON"+(t?" (Ctrl+S)":""),onClick:function(){return e.props.saveMap()},disabledButtons:n}),He(T,{name:"Load map JSON"+(t?" (Ctrl+O)":""),onClick:function(t){return e.props.loadMap(t)},assignKey:this.props.assignKeyLoadMap,type:"load",disabledButtons:n}),He(T,{name:"Import Background"+(t?" (Ctrl+I)":""),fileInputProcessor:function(t){return e.props.import_background(t)},accept:"image/*",type:"load",assignKey:this.props.assignKeyImportBackground,disabledButtons:n}),He(T,{name:"Clear Background"+(t?" (Ctrl+Shift+I)":""),onClick:function(){return e.props.clear_background()},disabledButtons:n}),He(T,{name:"Export as SVG"+(t?" (Ctrl+Shift+S)":""),onClick:function(){return e.props.save_svg()},disabledButtons:n}),He(T,{name:"Export as PNG"+(t?" (Ctrl+Shift+P)":""),onClick:function(){return e.props.save_png()},disabledButtons:n}),He(T,{name:"Export as GIF"+(t?" (Ctrl+Shift+G)":""),onClick:function(){return e.props.save_gif()},disabledButtons:n}),He(T,{name:"Clear map",onClick:function(){return e.props.clear_map()},disabledButtons:n})),He(B,{name:"Model",dropdownVisible:this.props.dropdownVisible},He(T,{name:"Load COBRA model JSON"+(t?" (Ctrl+M)":""),onClick:function(t){return e.props.loadModel(t)},assignKey:this.props.assignKeyLoadModel,type:"load",disabledButtons:n}),He(T,{name:"Update names and gene reaction rules using model",onClick:function(){return e.props.updateRules()},disabledButtons:n}),He(T,{name:"Clear model",onClick:function(){return e.props.clearModel()},disabledButtons:n})),He(B,{name:"Data",dropdownVisible:this.props.dropdownVisible},He(T,{name:"Load reaction data",onClick:function(t){return e.props.setReactionData(t)},type:"load",disabledButtons:n}),He(T,{name:"Clear reaction data",onClick:function(){return e.props.clearReactionData()},disabledButtons:n}),He("li",{name:"divider"}),He(T,{name:"Load gene data",onClick:function(t){return e.props.setGeneData(t)},type:"load",disabledButtons:n}),He(T,{name:"Clear gene data",onClick:function(){return e.props.clearGeneData()},disabledButtons:n}),He("li",{name:"divider"}),He(T,{name:"Load metabolite data",onClick:function(t){return e.props.setMetaboliteData(t)},type:"load",disabledButtons:n}),He(T,{name:"Clear metabolite data",onClick:function(){return e.props.clearMetaboliteData()},disabledButtons:n})),He(B,{name:"Edit",rightMenu:"true",dropdownVisible:this.props.dropdownVisible,disabledEditing:!this.props.settings.get("enable_editing")},He(T,{name:"Pan mode"+(t?" (Z)":""),checkMark:"zoom"===this.props.mode,onClick:function(){return e.props.setMode("zoom")},disabledButtons:n}),He(T,{name:"Select mode"+(t?" (V)":""),checkMark:"brush"===this.props.mode,onClick:function(){return e.props.setMode("brush")},disabledButtons:n}),He(T,{name:"Add reaction mode"+(t?" (N)":""),checkMark:"build"===this.props.mode,onClick:function(){return e.props.setMode("build")},disabledButtons:n}),He(T,{name:"Rotate mode"+(t?" (R)":""),checkMark:"rotate"===this.props.mode,onClick:function(){return e.props.setMode("rotate")},disabledButtons:n}),He(T,{name:"Text mode"+(t?" (T)":""),checkMark:"text"===this.props.mode,onClick:function(){return e.props.setMode("text")},disabledButtons:n}),He("li",{name:"divider"}),He(T,{name:"Delete"+(t?" (Del)":""),onClick:function(){return e.props.deleteSelected()},disabledButtons:n}),He(T,{name:"Undo"+(t?" (Ctrl+Z)":""),onClick:function(){return e.props.undo()},disabledButtons:n}),He(T,{name:"Redo"+(t?" (Ctrl+Shift+Z)":""),onClick:function(){return e.props.redo()},disabledButtons:n}),He("li",{name:"divider"}),He(T,{name:"Align vertical".concat(t?" (Alt+L)":""),onClick:this.props.align_vertical,disabledButtons:n}),He(T,{name:"Align horizontal".concat(t?" (Shift+Alt+L)":""),onClick:this.props.align_horizontal,disabledButtons:n}),He(T,{name:"Toggle primary/secondary"+(t?" (P)":""),onClick:function(){return e.props.togglePrimary()},disabledButtons:n}),He(T,{name:"Rotate reactant locations"+(t?" (C)":""),onClick:function(){return e.props.cyclePrimary()},disabledButtons:n}),He("li",{name:"divider"}),He(T,{name:"Select all"+(t?" (Ctrl+A)":""),onClick:function(){return e.props.selectAll()},disabledButtons:n}),He(T,{name:"Select none"+(t?" (Ctrl+Shift+A)":""),onClick:function(){return e.props.selectNone()},disabledButtons:n}),He(T,{name:"Invert selection",onClick:function(){return e.props.invertSelection()},disabledButtons:n})),He(B,{name:"View",rightMenu:"true",dropdownVisible:this.props.dropdownVisible},He(T,{name:"Zoom in".concat(t?" (+)":""),onClick:function(){return e.props.zoom_in()},disabledButtons:n}),He(T,{name:"Zoom out".concat(t?" (-)":""),onClick:function(){return e.props.zoom_out()},disabledButtons:n}),He(T,{name:"Zoom to nodes".concat(t?" (0)":""),onClick:function(){return e.props.zoomExtentNodes()},disabledButtons:n}),He(T,{name:"Zoom to canvas".concat(t?" (1)":""),onClick:function(){return e.props.zoomExtentCanvas()},disabledButtons:n}),He(T,{name:"Find".concat(t?" (F)":""),onClick:function(){return e.props.search()},disabledButtons:n}),He(T,{name:"".concat(r?"Hide":"Show"," control points").concat(t?" (B)":""),onClick:function(){return e.props.toggleBeziers()},disabledButtons:n}),He("li",{name:"divider"}),i&&He(T,{name:"Full screen",onClick:function(){return e.props.full_screen()},checkMark:this.props.isFullScreen,disabledButtons:n}),i&&He("li",{name:"divider"}),He(T,{name:"Settings".concat(t?" (,)":""),onClick:function(){return e.props.renderSettingsMenu()},disabledButtons:n,type:"settings"})),He("div",{className:"switch-container"},He("label",{className:"switch tooltip"},He("input",{type:"checkbox",onClick:function(){e.props.settings.set("show_reaction_data_animation",!e.props.settings.get("show_reaction_data_animation")),e.props.settings.acceptChanges()},checked:this.props.settings.get("show_reaction_data_animation")}),He("span",{className:"slider"}),He("span",{className:"tooltiptext"},"Show flux visualization( animation NOT available in Safari)."))),He("a",{className:"helpButton",target:"#",href:"https://escher.readthedocs.org"},"?"))}}])&&Cy(e.prototype,r),t&&Cy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})(),Ce=Ee,ke=Le(436),S={};function Sy(t){return(Sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Sy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Sy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Sy(t)?t:t+""))(r.key),r)}}function Ny(t,e,n){e=Iy(e);var r=t,e=Oy()?Reflect.construct(e,n||[],Iy(t).constructor):e.apply(t,n);if(!e||"object"!=Sy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Oy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Oy=function(){return!!t})()}function Iy(t){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dy(t,e){return(Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}S.styleTagTransform=s(),S.setAttributes=o(),S.insert=r().bind(null,"head"),S.domAPI=e(),S.insertStyleElement=a(),t()(ke.A,S),ke.A&&ke.A.locals;let Me=(()=>{function n(t){var e;if(this instanceof n)return(e=Ny(this,n,[t])).state={current:0,searchItem:t.searchItem,counter:""},e;throw new TypeError("Cannot call a class as a function")}var t,e=n,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Dy(e,r),e=n,(r=[{key:"componentWillMount",value:function(){var t=this;this.setState({clearEscape:this.props.map.key_manager.addEscapeListener(function(){return t.close()},!0),clearNext:this.props.map.key_manager.addKeyListener(["enter","ctrl+g"],function(){return t.next()},!1),clearPrevious:this.props.map.key_manager.addKeyListener(["shift+enter","shift+ctrl+g"],function(){return t.previous()},!1)})}},{key:"componentDidMount",value:function(){this.inputRef.focus()}},{key:"componentWillUnmount",value:function(){this.state.clearEscape(),this.state.clearNext(),this.state.clearPrevious(),this.props.map.highlight(null)}},{key:"handleInput",value:function(t){var e=this.dropDuplicates(this.props.map.search_index.find(t)),n="";if(null!==e&&t)if(0===e.length)n="0 / 0",this.props.map.highlight(null);else{this.state.current>=e.length&&this.setState({current:0});var n="".concat(this.state.current+1,"/").concat(e.length),r=e[this.state.current];if("reaction"===r.type)this.props.map.zoom_to_reaction(r.reaction_id),this.props.map.highlight_reaction(r.reaction_id);else if("metabolite"===r.type)this.props.map.zoom_to_node(r.node_id),this.props.map.highlight_node(r.node_id);else{if("text_label"!==r.type)throw new Error("Bad search index data type: "+r.type);this.props.map.zoom_to_text_label(r.text_label_id),this.props.map.highlight_text_label(r.text_label_id)}}else this.props.map.highlight(null);this.setState({searchItem:t,current:0,counter:n,results:e})}},{key:"dropDuplicates",value:function(t){var r={metabolite:{type:"m",key:"node_id"},reaction:{type:"r",key:"reaction_id"},text_label:{type:"t",key:"text_label_id"}};return k.uniq(t,function(t){var e=r[t.type],n=e.type,e=e.key;return"".concat(n).concat(t[e])})}},{key:"next",value:function(){this.state.results&&0<this.state.results.length&&this.update((this.state.current+1)%this.state.results.length)}},{key:"previous",value:function(){this.state.results&&0<this.state.results.length&&this.update((this.state.current+this.state.results.length-1)%this.state.results.length)}},{key:"update",value:function(t){this.setState({current:t,counter:"".concat(t+1,"/").concat(this.state.results.length)});t=this.state.results[t];if("reaction"===t.type)this.props.map.zoom_to_reaction(t.reaction_id),this.props.map.highlight_reaction(t.reaction_id);else if("metabolite"===t.type)this.props.map.zoom_to_node(t.node_id),this.props.map.highlight_node(t.node_id);else{if("text_label"!==t.type)throw new Error("Bad search index data type: "+t.type);this.props.map.zoom_to_text_label(t.text_label_id),this.props.map.highlight_text_label(t.text_label_id)}}},{key:"close",value:function(){this.props.setDisplay(!1)}},{key:"render",value:function(){var e=this;return He("div",{className:"search-container"},He("input",{className:"search-field",value:this.state.searchItem,onInput:function(t){return e.handleInput(t.target.value)},ref:function(t){e.inputRef=t}}),He("button",{className:"search-bar-button left btn",onClick:function(){return e.previous()}},He("i",{className:"icon-left-open"})),He("button",{className:"search-bar-button right btn",onClick:function(){return e.next()}},He("i",{className:"icon-right-open"})),He("div",{className:"search-counter"},this.state.counter),He("button",{className:"search-bar-button btn",onClick:function(){return e.close()}},He("i",{className:"icon-cancel"})))}}])&&zy(e.prototype,r),t&&zy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})(),Be=Me,Te=Le(701),z={};function jy(t){return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=jy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=jy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==jy(t)?t:t+""))(r.key),r)}}function Py(t,e,n){e=Ry(e);var r=t,e=Fy()?Reflect.construct(e,n||[],Ry(t).constructor):e.apply(t,n);if(!e||"object"!=jy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Fy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Fy=function(){return!!t})()}function Ry(t){return(Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wy(t,e){return(Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}z.styleTagTransform=s(),z.setAttributes=o(),z.insert=r().bind(null,"head"),z.domAPI=e(),z.insertStyleElement=a(),t()(Te.A,z),Te.A&&Te.A.locals;let Se=(()=>{function n(){var t=this,e=n;if(t instanceof e)return Py(this,n,arguments);throw new TypeError("Cannot call a class as a function")}var t,e=n,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Wy(e,r),e=n,(r=[{key:"render",value:function(){var t=this,e=this.props.settings.get("menu"),n=this.props.settings.get("enable_keys"),r=this.props.settings.get("enable_editing");return He("ul",{className:"button-panel"},He("li",null,He("button",{className:"button btn",onClick:function(){return t.props.zoomContainer.zoom_in()},title:"Zoom in".concat(n?" (+)":"")},He("i",{className:"icon-zoom-in"}))),He("li",null,He("button",{className:"button btn",onClick:function(){return t.props.zoomContainer.zoom_out()},title:"Zoom out".concat(n?" (-)":"")},He("i",{className:"icon-zoom-out"}))),He("li",null,He("button",{className:"button btn",onClick:function(){return t.props.map.zoom_extent_canvas()},title:"Zoom to canvas".concat(n?" (1)":"")},He("i",{className:"icon-resize-full"}))),He("li",{style:{display:!1!==this.props.settings.get("full_screen_button")?"block":"none"}},He("button",{className:"button btn ".concat(this.props.isFullScreen?"active-button":""),onClick:function(){return t.props.full_screen()},title:"Toggle full screen"},He("i",{className:"icon-resize-full-alt"}))),He("li",{className:"grouping",style:{display:"all"===e&&r?"block":"none"}},He("button",{className:"buttonGroup btn",title:"Pan mode".concat(n?" (Z)":""),for:"zoom",id:"zoom"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("zoom")}},He("i",{className:"icon-move"})),He("button",{className:"buttonGroup btn",title:"Select mode".concat(n?" (V)":""),for:"brush",id:"brush"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("brush")}},He("i",{className:"icon-mouse-pointer"})),He("button",{className:"buttonGroup btn",title:"Add reaction mode".concat(n?" (N)":""),for:"build",onClick:function(){return t.props.setMode("build")},id:"build"===this.props.mode?"currentMode":null},He("i",{className:"icon-wrench"})),He("button",{className:"buttonGroup btn",title:"Rotate mode".concat(n?" (R)":""),for:"rotate",id:"rotate"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("rotate")}},He("i",{className:"icon-cw"})),He("button",{className:"buttonGroup btn",title:"Text mode".concat(n?" (T)":""),for:"text",id:"text"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("text")}},He("i",{className:"icon-font"}))),He("li",{className:"grouping",style:{display:"build"===this.props.mode&&"all"===e&&r?"block":"none"}},He("button",{className:"buttonGroup btn",title:"Direction arrow".concat(n?" (←)":""),onClick:function(){return t.props.buildInput.direction_arrow.left()}},He("i",{className:"icon-left-big"})),He("button",{className:"buttonGroup btn",title:"Direction arrow".concat(n?" (→)":""),onClick:function(){return t.props.buildInput.direction_arrow.right()}},He("i",{className:"icon-right-big"})),He("button",{className:"buttonGroup btn",title:"Direction arrow".concat(n?" (↑)":""),onClick:function(){return t.props.buildInput.direction_arrow.up()}},He("i",{className:"icon-up-big"})),He("button",{className:"buttonGroup btn",title:"Direction arrow".concat(n?" (↓)":""),onClick:function(){return t.props.buildInput.direction_arrow.down()}},He("i",{className:"icon-down-big"}))))}}])&&Ly(e.prototype,r),t&&Ly(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})(),ze=Se;function Uy(t){return(Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Uy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Uy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Uy(t)?t:t+""))(r.key),r)}}var Gy=(()=>{function a(t,e,n,r,i){var o=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.div=t.append("div").attr("id","tooltip-container"),this.tooltipRef=null,this.zoomContainer=n,this.setUpZoomCallbacks(n),this.callbackManager=new Lg,this.div.on("mouseover",this.cancelHideTooltip.bind(this)),this.div.on("mouseleave",this.hide.bind(this)),this.map=r,this.setUpMapCallbacks(r),this.settings=i,this.delay_hide_timeout=null,this.currentTooltip=null,x(e,null,function(t){return o.callbackManager.set("pass_props",t)},this.div.node(),function(t){o.tooltipRef=t}),this.passProps({display:!1,disableTooltips:function(){return o.disableTooltips()},openInVmh:function(){return o.settings.get("open_in_vmh")},vmhBasicUrl:function(){return o.settings.get("vmh_basic_url")}})}return t=a,(e=[{key:"disableTooltips",value:function(){this.settings.set("enable_tooltips",!1),this.map.draw_everything(),this.hide(),this.map.set_status("Tooltips disabled. You can enable them again in the\n                         settings menu.",3e3)}},{key:"passProps",value:function(){this.callbackManager.run("pass_props",null,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"setUpMapCallbacks",value:function(t){var n=this;this.placedDiv=qt(this.div,t,void 0,!1),t.callback_manager.set("show_tooltip.tooltip_container",function(t,e){n.show(t,e)}),t.callback_manager.set("hide_tooltip.tooltip_container",function(){return n.hide()}),t.callback_manager.set("delay_hide_tooltip.tooltip_container",function(){return n.delayHide()}),t.sel.selectAll(".canvas-group").on("touchend",function(){return n.hide()})}},{key:"setUpZoomCallbacks",value:function(t){t.callbackManager.set("zoom.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this)),t.callbackManager.set("go_to.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this))}},{key:"is_visible",value:function(){return this.placedDiv.is_visible()}},{key:"show",value:function(t,e){if(this.cancelHideTooltip(),!k.contains(["reaction_label","node_label","gene_label","reaction_object","node_object"],t))throw new Error("Tooltip not supported for object type "+t);var n=null!==this.tooltipRef&&this.tooltipRef.get_size?this.tooltipRef.get_size():{width:270,height:100},r=(this.currentTooltip={type:t,id:e[t.replace("_label","_id").replace("_object","_id")]},this.zoomContainer.windowTranslate),i=this.zoomContainer.windowScale,o=null!==this.map?this.map.get_size():{width:1e3,height:1e3},a={x:0,y:0},s="reaction_object"===t?e.xPos:e.label_x,l="reaction_object"===t?e.yPos:e.label_y,c=i*s+r.x+n.width,u=i*l+r.y+n.height,c=(o.width<500?(c>o.width&&(a.x=-(c-o.width)/i),u>o.height-74&&(a.y=-(u-o.height+77)/i)):(i*s+r.x+.5*n.width>o.width?a.x=-n.width/i:c>o.width&&(a.x=-(c-o.width)/i),i*l+r.y+.5*n.height>o.height-45?a.y=-n.height/i:u>o.height-45&&(a.y=-(u-o.height+47)/i)),{x:s+a.x,y:l+10+a.y});this.placedDiv.place(c),this.passProps({display:!0,biggId:e.bigg_id,name:e.name,loc:c,data:e.data_string,type:t.replace("_label","").replace("node","metabolite").replace("_object","")})}},{key:"hide",value:function(){this.placedDiv.hide(),this.currentTooltip=null}},{key:"delayHide",value:function(){var t=this;this.delayHideTimeout=setTimeout(function(){return t.hide()},100)}},{key:"cancelHideTooltip",value:function(){null!==this.delayHideTimeout&&clearTimeout(this.delayHideTimeout)}}])&&Yy(t.prototype,e),n&&Yy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})(),Re=Le(471);function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Vy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Vy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Vy(t)?t:t+""))(r.key),r)}}function qy(t,e,n){e=Zy(e);var r=t,e=Hy()?Reflect.construct(e,n||[],Zy(t).constructor):e.apply(t,n);if(!e||"object"!=Vy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Hy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hy=function(){return!!t})()}function Zy(t){return(Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xy(t,e){return(Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(Nn={}).styleTagTransform=s(),Nn.setAttributes=o(),Nn.insert=r().bind(null,"head"),Nn.domAPI=e(),Nn.insertStyleElement=a(),t()(Re.A,Nn),Re.A&&Re.A.locals;let Ne=(()=>{function e(){var t;if(this instanceof e)return(t=qy(this,e)).openBigg=t.openBigg.bind(t),t;throw new TypeError("Cannot call a class as a function")}var t,n=e,r=Ze;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&Xy(n,r),n=e,(r=[{key:"decompartmentalizeCheck",value:function(t,e){return"metabolite"===e?V.decompartmentalize(t)[0]:t}},{key:"openBigg",value:function(){var t=this.props.type,e=this.props.biggId,n="http://bigg.ucsd.edu/",n="gene"===t?"".concat(n,"search?query=").concat(e):"".concat(n,"universal/").concat(t,"s/").concat(this.decompartmentalizeCheck(e,t)),t="".concat(this.props.vmhBasicUrl()).concat(e);window.open(this.props.openInVmh()?t:n)}},{key:"capitalizeFirstLetter",value:function(t){return"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):console.warn("capitalizeFirstLetter was passed something other than a string")}},{key:"render",value:function(){var t=this.decompartmentalizeCheck(this.props.biggId,this.props.type),t=this.props.openInVmh()?"Open ".concat(t," in VMH"):"Open ".concat(t," in BiGG Models.");return He("div",{className:"default-tooltip"},He("div",{className:"id"},this.props.biggId),He("div",{className:"name"},"name: ",this.props.name),He("div",{className:"data"},"data: ",this.props.data&&"(nd)"!==this.props.data?this.props.data:"no data"),He("button",{onClick:this.openBigg},t),He("div",{className:"top-right"},He("div",{className:"type-label"},this.capitalizeFirstLetter(this.props.type)),He("a",{onClick:this.props.disableTooltips},"Disable Tooltips")))}}])&&Qy(n.prototype,r),t&&Qy(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Oe=Ne,Ie=Le(284),N={};function Jy(t){return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}})(t,e)||$y(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function $y(t,e){var n;if(t)return"string"==typeof t?tv(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tv(t,e):void 0}function tv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ev(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=Jy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=Jy(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Jy(t)?t:t+""))(r.key),r)}}N.styleTagTransform=s(),N.setAttributes=o(),N.insert=r().bind(null,"head"),N.domAPI=e(),N.insertStyleElement=a(),t()(Ie.A,N),Ie.A&&Ie.A.locals,Fe=Le(982),(On={}).styleTagTransform=s(),On.setAttributes=o(),On.insert=r().bind(null,"head"),On.domAPI=e(),On.insertStyleElement=a(),t()(Fe.A,On),Fe.A&&Fe.A.locals;let De=(()=>{function s(t,e,n,r,i){var o=this;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");r?r instanceof y||(r="node"in r?tn(r.node()):tn(r)):r=tn("body").append("div"),i=i||{},n=n||"svg.escher-svg #mouse-node {\n  fill: none;\n}\nsvg.escher-svg #canvas {\n  stroke: #ccc;\n  stroke-width: 7px;\n  fill: white;\n}\nsvg.escher-svg .resize-rect {\n  fill: black;\n  opacity: 0;\n  stroke: none;\n}\nsvg.escher-svg .label {\n  font-family: sans-serif;\n  font-style: italic;\n  font-weight: bold;\n  font-size: 8px;\n  fill: black;\n  stroke: none;\n  text-rendering: optimizelegibility;\n  cursor: default;\n}\nsvg.escher-svg .reaction-label {\n  font-size: 30px;\n  fill: rgb(32, 32, 120);\n  text-rendering: optimizelegibility;\n}\nsvg.escher-svg .node-label {\n  font-size: 20px;\n}\nsvg.escher-svg .gene-label {\n  font-size: 18px;\n  fill: rgb(32, 32, 120);\n  text-rendering: optimizelegibility;\n  cursor: default;\n}\nsvg.escher-svg .text-label .label {\n  font-size: 50px;\n}\nsvg.escher-svg .text-label-input {\n  font-size: 50px;\n}\nsvg.escher-svg .node-circle {\n  stroke-width: 2px;\n}\nsvg.escher-svg .midmarker-circle, svg.escher-svg .multimarker-circle {\n  fill: white;\n  fill-opacity: 0.2;\n  stroke: rgb(50, 50, 50);\n}\nsvg.escher-svg g.selected .node-circle{\n  stroke-width: 6px;\n  stroke: rgb(20, 113, 199);\n}\nsvg.escher-svg g.selected .label {\n  fill: rgb(20, 113, 199);\n}\nsvg.escher-svg .metabolite-circle {\n  stroke: rgb(162, 69, 16);\n  fill: rgb(224, 134, 91);\n}\nsvg.escher-svg g.selected .metabolite-circle {\n  stroke: rgb(5, 2, 0);\n}\nsvg.escher-svg .segment {\n  stroke: #334E75;\n  stroke-width: 10px;\n  fill: none;\n}\nsvg.escher-svg .arrowhead {\n  fill: #334E75;\n}\nsvg.escher-svg .stoichiometry-label-rect {\n  fill: white;\n  opacity: 0.5;\n}\nsvg.escher-svg .stoichiometry-label {\n  fill: #334E75;\n  font-size: 17px;\n}\nsvg.escher-svg .membrane {\n  fill: none;\n  stroke: rgb(255, 187, 0);\n}\nsvg.escher-svg .brush .extent {\n  fill-opacity: 0.1;\n  fill: black;\n  stroke: #fff;\n  shape-rendering: crispEdges;\n}\nsvg.escher-svg #brush-container .background {\n  fill: none;\n}\nsvg.escher-svg .bezier-circle {\n  fill: rgb(255,255,255);\n}\nsvg.escher-svg .bezier-circle.b1 {\n  stroke: red;\n}\nsvg.escher-svg .bezier-circle.b2 {\n  stroke: blue;\n}\nsvg.escher-svg .connect-line{\n  stroke: rgb(200,200,200);\n}\nsvg.escher-svg .direction-arrow {\n  cursor: default;\n  stroke: black;\n  stroke-width: 1px;\n  fill: white;\n  opacity: 0.3;\n}\nsvg.escher-svg .start-reaction-target {\n  stroke: rgb(100,100,100);\n  fill: none;\n  opacity: 0.5;\n}\nsvg.escher-svg .rotation-center-line {\n  stroke: red;\n  stroke-width: 5px;\n}\nsvg.escher-svg .highlight {\n  fill: #D97000;\n  text-decoration: underline;\n}\nsvg.escher-svg .node-to-combine {\n  stroke-width: 12px !important;\n}\n",this.map_data=t,this.model_data=e,this.embeddedCss=n,this.selection=r,this.menu_div=null,this.button_div=null,this.search_bar_div=null,this.searchBarRef=null,this.semanticOptions=null,this.mode="zoom",this.selection.datum(this),(this.selection.__builder__=this).has_custom_reaction_styles=Boolean(i.reaction_styles);t=V.set_options(i,{menu:"all",scroll_behavior:"pan",use_3d_transform:!1,enable_editing:!0,enable_keys:!0,enable_search:!0,fill_screen:!1,zoom_to_element:null,full_screen_button:!1,ignore_bootstrap:!1,disabled_buttons:null,semantic_zoom:null,starting_reaction:null,never_ask_before_quit:!1,unique_map_id:null,primary_metabolite_radius:20,secondary_metabolite_radius:10,marker_radius:5,gene_font_size:18,hide_secondary_metabolites:!1,show_gene_reaction_rules:!1,hide_all_labels:!1,canvas_size_and_loc:null,reaction_data:null,reaction_styles:["color","size","text"],reaction_compare_style:"log2_fold",reaction_scale:null,reaction_scale_preset:"GaBuGeRd",reaction_no_data_color:"#dcdcdc",reaction_no_data_size:8,show_reaction_data_animation:!1,animation_line_style:"dashed",reaction_data_threshold:Math.pow(10,-6),hide_no_data_reaction:!1,background_image_url:"",gene_data:null,and_method_in_gene_reaction_rule:"mean",metabolite_data:null,metabolite_styles:["color","size","text"],metabolite_compare_style:"log2_fold",metabolite_scale:null,metabolite_scale_preset:"WhYlRd",metabolite_no_data_color:"#ffffff",metabolite_no_data_size:10,identifiers_on_map:"bigg_id",highlight_missing:!1,allow_building_duplicate_reactions:!1,cofactors:["atp","adp","nad","nadh","nadp","nadph","gtp","gdp","h","coa","ump","h2o","ppi"],open_in_vmh:"true"===V.get_local_storage_item("open_in_vmh"),vmh_basic_url:"https://www.vmh.life/#allsearch/",tooltip_component:Oe,enable_tooltips:["label"],enable_keys_with_tooltip:!0,first_load_callback:null},{primary_metabolite_radius:!0,secondary_metabolite_radius:!0,marker_radius:!0,gene_font_size:!0,reaction_no_data_size:!0,metabolite_no_data_size:!0});if(V.check_for_parent_tag(this.selection,"svg"))throw new Error("Builder cannot be placed within an svg node because UI elements are html-based.");this.settings=new _b(t,["identifiers_on_map","scroll_behavior","hide_secondary_metabolites","show_gene_reaction_rules","hide_all_labels","allow_building_duplicate_reactions","highlight_missing","hide_no_data_reaction","open_in_vmh","animation_line_style","enable_tooltips","reaction_scale_preset","reaction_no_data_color","reaction_no_data_size","reaction_scale","reaction_styles","reaction_compare_style","and_method_in_gene_reaction_rule","metabolite_scale_preset","metabolite_scale","metabolite_styles","metabolite_compare_style","metabolite_no_data_color","metabolite_no_data_size"]);var e=this.settings.get("reaction_data"),n=this.settings.get("reaction_data_threshold"),r=e&&V.process_reaction_data(e,n),a=(this.settings.set("reaction_data",r),this.settings.get("fill_screen")&&this.settings.get("full_screen_button")&&(this.settings.set("full_screen_button",!1),console.warn("The option full_screen_button has no effect when fill_screen is true")),this.isFullScreen=!1,this.settings.get("fill_screen")&&(tn("html").classed("fill-screen",!0),tn("body").classed("fill-screen",!0),this.selection.classed("fill-screen-div",!0),this.isFullScreen=!0),this.savedFullScreenSettings=null,this.savedFullScreenParent=null,this.clearFullScreenEscape=null,this.callback_manager=new Lg,this.settings.get("first_load_callback")),i=(null!==a&&this.callback_manager.set("first_load",function(){a(o)}),this.zoom_container=new Xm(this.selection,this.settings.get("scroll_behavior"),this.settings.get("use_3d_transform")),this.zoom_container.callbackManager.set("zoom_change",function(){var e,t,n;o.settings.get("semantic_zoom")&&(e=o.zoom_container.windowScale,t=o.settings.get("semantic_zoom").sort(function(t,e){return t.zoomLevel-e.zoomLevel}).find(function(t){return t.zoomLevel>e}))&&(n=!1,k.mapObject(t.options,function(t,e){o.settings.get(e)!==t&&(o.settings.set(e,t),n=!0)}),n)&&o._updateData(!1,!0)}),this.settings.streams.use_3d_transform.onValue(function(t){o.zoom_container.setUse3dTransform(t)}),this.settings.streams.scroll_behavior.onValue(function(t){o.zoom_container.setScrollBehavior(t)}),this.settings.streams.enable_tooltips.onValue(function(t){o._updateTooltipSetting(t)}),this.mapToolsContainer=null,this.selection.select(".map-tools-container").empty()?this.mapToolsContainer=this.selection.append("div").attr("class","map-tools-container"):this.mapToolsContainer=this.selection.select(".map-tools-container"),this._createStatus(this.selection),this.load_model(this.model_data,!1),this.selection.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline"));this.menu_div=i.append("div"),this.search_bar_div=i.append("div"),this.button_div=this.selection.append("div"),this.selection.select("#legend-config-modal").empty()&&(this.selection.append("div").attr("id","legend-config-modal"),this.selection.append("div").attr("id","legend-config-modal-overlay")),k.delay(function(){o.load_map(o.map_data,!1);var t=o._reactionCheckAddAbs();o._updateData(!0,!0),o.settings.statusBus.onValue(function(t){"accept"===t&&(o._updateData(!0,!0,["reaction","metabolite"],!1),null!==o.zoom_container&&(t=o.settings.get("scroll_behavior"),o.zoom_container.setScrollBehavior(t)),null!==o.map)&&(o.map.draw_all_nodes(!1),o.map.draw_all_reactions(!0,!1),o.map.select_none())}),null!==t&&setTimeout(t,500),k.defer(function(){return o.callback_manager.run("first_load",o)})},50)}return t=s,(e=[{key:"options",get:function(){throw new Error("builder.options is deprecated. Use builder.settings.get() and builder.settings.set() instead.")},set:function(t){throw new Error("builder.options is deprecated. Use builder.settings.get() and builder.settings.set() instead.")}},{key:"load_model",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];k.isNull(t)?this.cobra_model=null:this.cobra_model=Jt.from_cobra_json(t),this.map&&(this.map.cobra_model=this.cobra_model,e&&this._updateData(!0,!1),this.settings.get("highlight_missing"))&&this.map.draw_all_reactions(!1,!1),this.callback_manager.run("load_model",null,t,e)}},{key:"load_map",value:function(t){var e=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r={};if(this.settings.get("semantic_zoom")){var i,o=((t,e)=>{var n,r,i,o,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return i=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){i=!0,n=t},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw n}}};if(Array.isArray(t)||(a=$y(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})(this.settings.get("semantic_zoom"));try{for(o.s();!(i=o.n()).done;){var a=i.value;Object.keys(a.options).map(function(t){void 0===r[t]&&(r[t]=e.settings.get(t))})}}catch(t){o.e(t)}finally{o.f()}this.semanticOptions=Object.assign({},r)}V.remove_child_nodes(this.zoom_container.zoomedSel),V.remove_child_nodes(this.mapToolsContainer);var s=this.zoom_container.zoomedSel,l=this.zoom_container.svg,l=(this.map&&this.map.key_manager.toggle(!1),this.map=null!==t?R_.from_data(t,l,this.embeddedCss,s,this.zoom_container,this.settings,this.cobra_model,this.settings.get("enable_search")):new R_(l,this.embeddedCss,s,this.zoom_container,this.settings,this.cobra_model,this.settings.get("canvas_size_and_loc"),this.settings.get("enable_search")),this.settings.get("background_image_url")&&this.map.import_background(this.settings.get("background_image_url")),this._setupStatus(this.map),this.map.set_status("Loading map ..."),this._updateTooltipSetting(this.settings.get("enable_tooltips")),n&&this._updateData(!1,!0),this.build_input=new Ig(this.mapToolsContainer,this.map,this.zoom_container,this.settings),this.text_edit_input=new vb(this.mapToolsContainer,this.map,this.zoom_container),this.brush=new db(s,!1,this.map,".canvas-group"),this.map.canvas.callbackManager.set("resize",function(){"brush"===e.mode&&e.brush.toggle(!0)}),this.setUpSettingsMenu(this.mapToolsContainer),this.setUpButtonPanel(this.mapToolsContainer),this.mapToolsContainer.append("div").attr("class","search-menu-container")),s=l.append("div").attr("class","search-menu-container-inline"),c=l.append("svg").attr("class","legend-container").append("g").attr("class","legend-group").attr("transform","translate(10, 0)"),c=(c.append("defs").attr("class","legend-defs").append("linearGradient").attr("id","legend-gradient"),c.append("rect").attr("class","legend-rect"),c.append("g").attr("class","legend-axis"),l.append("svg").attr("class","vertical-legend-container"),this.setUpMenuBar(s),this.setUpSearchBar(s),this.tooltip_container=new Gy(this.mapToolsContainer,this.settings.get("tooltip_component"),this.zoom_container,this.map,this.settings),this.map.key_manager.assignedKeys=this.getKeys(),this.map.key_manager.inputList=[this.build_input,this.searchBarRef,function(){return e.settingsMenuRef},this.text_edit_input],this.settings.get("enable_keys_with_tooltip")||this.map.key_manager.inputList.push(this.tooltip_container),this.map.key_manager.update(),this.map.key_manager.toggle(this.settings.get("enable_keys")),this.settings.streams.enable_keys.onValue(function(t){e.map.key_manager.toggle(t)}),this.settings.get("disabled_buttons")||[]);if(this.settings.get("reaction_data")||(c.push("Clear reaction data"),c.push("Export as GIF")),this.settings.get("gene_data")||c.push("Clear gene data"),this.settings.get("metabolite_data")||c.push("Clear metabolite data"),this.settings.get("enable_search")||c.push("Find"),this.settings.get("enable_editing")||c.push("Show control points"),this.settings.set("disabled_buttons",c),this.settings.get("zoom_to_element")){l=this.settings.get("zoom_to_element").type,s=this.settings.get("zoom_to_element").id;if(k.isUndefined(l)||-1===["reaction","node"].indexOf(l))throw new Error('zoom_to_element type must be "reaction" or "node"');if(k.isUndefined(s))throw new Error("zoom_to_element must include id");"reaction"===l?this.map.zoom_to_reaction(s):"node"===l&&this.map.zoom_to_node(s)}else!t&&this.settings.get("starting_reaction")&&null!==this.cobra_model?(l={x:(c=this.zoom_container.get_size()).width/2,y:c.height/4},this.map.new_reaction_from_scratch(this.settings.get("starting_reaction"),l,90),this.map.zoom_extent_nodes()):this.map.zoom_extent_canvas();this.settings.get("enable_editing")?this.zoom_mode():this.view_mode(),this.settings.streams.enable_editing.onValue(function(t){t?e.zoom_mode():e.view_mode()}),this.settings.get("enable_editing")&&this._setupConfirmBeforeExit(),this.map.draw_everything(),this.map.set_status(""),this.callback_manager.run("load_map",null,t,n)}},{key:"passPropsSettingsMenu",value:function(){this.map.callback_manager.run("pass_props_settings_menu",null,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"setUpSettingsMenu",value:function(t){var n=this;this.settingsMenuRef=null,x(ve,function(t){n.settingsMenuRef=t},function(t){return n.map.callback_manager.set("pass_props_settings_menu",t)},t.append("div").node()),this.passPropsSettingsMenu({display:!1,settings:this.settings,map:this.map}),k.mapObject(this.settings.streams,function(t,e){t.onValue(function(t){n.passPropsSettingsMenu()})}),this.settings.streams.reaction_styles.map(function(t){return k.contains(t,"abs")}).skipDuplicates().onValue(function(){return n._updateData(!1,!0)}),this.settings.streams.metabolite_styles.map(function(t){return k.contains(t,"abs")}).skipDuplicates().onValue(function(){return n._updateData(!1,!0)})}},{key:"passPropsMenuBar",value:function(){this.map.callback_manager.run("pass_props_menu_bar",null,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"setUpMenuBar",value:function(t){var n=this;this.menuBarRef=null,x(Ce,function(t){n.menuBarRef=t},function(t){return n.map.callback_manager.set("pass_props_menu_bar",t)},t.append("div").node()),this.passPropsMenuBar({display:"all"===this.settings.get("menu"),settings:this.settings,sel:this.selection,mode:this.mode,map:this.map,saveMap:function(){n.semanticOptions&&(Object.entries(n.semanticOptions).map(function(t){var t=Ky(t,2),e=t[0];n.settings.set(e,t[1])}),n._updateData()),n.map.save()},loadMap:function(t){return n.load_map(t)},assignKeyLoadMap:function(t){n.map.key_manager.assignedKeys.load_map.fn=t},save_svg:function(){return n.map.save_svg()},save_png:function(){return n.map.save_png()},save_gif:function(){return n.map.save_gif()},import_background:function(t){return n.map.import_background(t)},assignKeyImportBackground:function(t){n.map.key_manager.assignedKeys.import_background.fn=t},clear_background:function(){return n.map.clear_background()},clear_map:function(){n.clear_map()},loadModel:function(t){return n.load_model(t,!0)},assignKeyLoadModel:function(t){n.map.key_manager.assignedKeys.load_model.fn=t},clearModel:function(){n.load_model(null),n.callback_manager.run("clear_model")},updateRules:function(){return n.map.convert_map()},setReactionData:function(t){return n.set_reaction_data(t)},clearReactionData:function(){return n.set_reaction_data(null)},setGeneData:function(t){return n.set_gene_data(t)},clearGeneData:function(){return n.set_gene_data(null,!0)},setMetaboliteData:function(t){return n.set_metabolite_data(t)},clearMetaboliteData:function(t){return n.set_metabolite_data(null)},setMode:function(t){return n._setMode(t)},deleteSelected:function(){return n.map.delete_selected()},undo:function(){return n.map.undo_stack.undo()},redo:function(){return n.map.undo_stack.redo()},align_vertical:function(){return n.map.align_vertical()},align_horizontal:function(){return n.map.align_horizontal()},togglePrimary:function(){return n.map.toggle_selected_node_primary()},cyclePrimary:function(){return n.map.cycle_primary_node()},selectAll:function(){return n.map.select_all()},selectNone:function(){return n.map.select_none()},invertSelection:function(){return n.map.invert_selection()},zoom_in:function(){return n.zoom_container.zoom_in()},zoom_out:function(){return n.zoom_container.zoom_out()},zoomExtentNodes:function(){return n.map.zoom_extent_nodes()},zoomExtentCanvas:function(){return n.map.zoom_extent_canvas()},full_screen:function(){return n.full_screen()},search:function(){return n.passPropsSearchBar({display:!0})},toggleBeziers:function(){return n.map.toggle_beziers()},renderSettingsMenu:function(){return n.passPropsSettingsMenu({display:!0})}}),this.map.callback_manager.set("toggle_beziers",function(){n.passPropsMenuBar()}),this.settings.streams.disabled_buttons.onValue(function(t){n.passPropsMenuBar()}),this.callback_manager.set("set_mode",function(t){n.passPropsMenuBar({mode:t})}),this.settings.streams.menu.onValue(function(t){n.passPropsMenuBar({display:"all"===t})}),this.settings.streams.full_screen_button.onValue(function(t){n.passPropsMenuBar()})}},{key:"passPropsSearchBar",value:function(){this.map.callback_manager.run("pass_props_search_bar",null,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"setUpSearchBar",value:function(t){var e=this;this.searchBarRef=null,x(Be,function(t){e.searchBarRef=t},function(t){return e.map.callback_manager.set("pass_props_search_bar",t)},t.append("div").node()),this.passPropsSearchBar({display:!1,searchIndex:this.map.search_index,map:this.map})}},{key:"passPropsButtonPanel",value:function(){this.map.callback_manager.run("pass_props_button_panel",null,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"setUpButtonPanel",value:function(t){var e=this;x(ze,null,function(t){return e.map.callback_manager.set("pass_props_button_panel",t)},t.append("div").node()),this.passPropsButtonPanel({display:k.contains(["all","zoom"],this.settings.get("menu")),mode:this.mode,settings:this.settings,setMode:function(t){return e._setMode(t)},zoomContainer:this.zoom_container,map:this.map,buildInput:this.build_input,full_screen:function(){return e.full_screen()}}),this.callback_manager.set("set_mode",function(t){e.passPropsButtonPanel({mode:t})}),this.settings.streams.full_screen_button.onValue(function(t){e.passPropsButtonPanel()})}},{key:"_setMode",value:function(t){this.mode=t,this.build_input.toggle("build"===t),this.build_input.direction_arrow.toggle("build"===t),this.brush.toggle("brush"===t),this.zoom_container.togglePanDrag("zoom"===t||"view"===t),this.map.canvas.toggleResize("view"!==t),"rotate"===t?(this.map.behavior.toggleSelectableDrag(!1),this.map.behavior.toggleRotationMode(!0)):(this.map.behavior.toggleRotationMode("rotate"===t),this.map.behavior.toggleSelectableDrag("brush"===t)),this.map.behavior.toggleSelectableClick("build"===t||"brush"===t),this.map.behavior.toggleLabelDrag("brush"===t),this.map.behavior.toggleTextLabelEdit("text"===t),this.map.behavior.toggleBezierDrag("brush"===t),"view"!==t&&"text"!==t||this.map.select_none(),"rotate"===t&&this.map.deselect_text_labels(),this.map.draw_everything(),this.callback_manager.run("set_mode",null,t)}},{key:"view_mode",value:function(){this.callback_manager.run("view_mode"),this._setMode("view")}},{key:"build_mode",value:function(){this.callback_manager.run("build_mode"),this._setMode("build")}},{key:"brush_mode",value:function(){this.callback_manager.run("brush_mode"),this._setMode("brush")}},{key:"zoom_mode",value:function(){this.callback_manager.run("zoom_mode"),this._setMode("zoom")}},{key:"rotate_mode",value:function(){this.callback_manager.run("rotate_mode"),this._setMode("rotate")}},{key:"text_mode",value:function(){this.callback_manager.run("text_mode"),this._setMode("text")}},{key:"_reactionCheckAddAbs",value:function(){var t=this,e=this.settings.get("reaction_styles");return!this.settings.get("reaction_data")||this.has_custom_reaction_styles||k.contains(e,"abs")?null:(this.settings.set("reaction_styles",e.concat("abs")),function(){t.map.set_status("Visualizing absolute value of reaction data. Change this option in Settings.",5e3)})}},{key:"set_reaction_data",value:function(t){var e=this.settings.get("reaction_data_threshold"),t=t&&V.process_reaction_data(t,e),e=(this.settings.set("reaction_data",t),t&&(this.settings._options.gene_data=null),this._reactionCheckAddAbs()),e=(this._updateData(!0,!0,["reaction"]),e?e():this.map.set_status(""),this.settings.get("disabled_buttons")||[]),n="Clear reaction data",r="Export as GIF",i="Clear gene data",o=e.indexOf(n);t&&-1!==o?(e.splice(o,1),e.splice(e.indexOf(r),1),-1===e.indexOf(i)&&e.push(i),this.settings.set("disabled_buttons",e)):t||-1!==o||(e.push(n),e.push(r),this.settings.set("disabled_buttons",e))}},{key:"set_gene_data",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=(this.settings.set("gene_data",t),e&&this.settings.set("show_gene_reaction_rules",!1),t&&(this.settings._options.reaction_data=null,this.settings.set("show_gene_reaction_rules",!0)),this._updateData(!0,!0,["reaction"]),this.map.set_status(""),this.settings.get("disabled_buttons")||[]),n=e.indexOf("Clear gene data");-1<n&&t?(e.splice(n,1),-1===e.indexOf("Clear reaction data")&&e.push("Clear reaction data"),this.settings.set("disabled_buttons",e)):-1!==n||t||(e.push("Clear gene data"),this.settings.set("disabled_buttons",e))}},{key:"set_metabolite_data",value:function(t){this.settings.set("metabolite_data",t),this._updateData(!0,!0,["metabolite"]),this.map.set_status("");var e=this.settings.get("disabled_buttons")||[],n="Clear metabolite data",r=e.indexOf(n);-1<r&&t?(e.splice(r,1),this.settings.set("disabled_buttons",e)):-1!==r||t||(e.push(n),this.settings.set("disabled_buttons",e))}},{key:"_makeGeneDataObject",value:function(t,e,n){var r={};return null!==e&&V.extend(r,e.reactions),null!==n&&V.extend(r,n.reactions,!0),v.importAndCheck(t,"gene_data",r)}},{key:"clear_map",value:function(){this.callback_manager.run("clear_map"),this.map.clearMapData(),this._updateData(!0,!0,["reaction","metabolite"],!1),this.map.draw_everything()}},{key:"_updateData",value:function(){var t,e,n,r=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["reaction","metabolite"],s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],l=k.contains(a,"reaction"),c=k.contains(a,"metabolite");c&&o&&null!==this.map&&(t=v.importAndCheck(this.settings.get("metabolite_data"),"metabolite_data"),this.map.apply_metabolite_data_to_map(t),s)&&this.map.draw_all_nodes(!1),l&&(this.settings.get("reaction_data")&&o&&null!==this.map?(e=v.importAndCheck(this.settings.get("reaction_data"),"reaction_data"),this.map.apply_reaction_data_to_map(e),s&&this.map.draw_all_reactions(!1,!1)):this.settings.get("gene_data")&&o&&null!==this.map?(n=this._makeGeneDataObject(this.settings.get("gene_data"),this.cobra_model,this.map),this.map.apply_gene_data_to_map(n),s&&this.map.draw_all_reactions(!1,!1)):o&&null!==this.map&&(this.map.apply_reaction_data_to_map(null),s)&&this.map.draw_all_reactions(!1,!1)),this.update_model_timer&&clearTimeout(this.update_model_timer);this.update_model_timer=setTimeout(function(){c&&i&&null!==r.cobra_model&&(t=t||v.importAndCheck(r.settings.get("metabolite_data"),"metabolite_data"),r.cobra_model.apply_metabolite_data(t,r.settings.get("metabolite_styles"),r.settings.get("metabolite_compare_style"))),l&&(r.settings.get("reaction_data")&&i&&null!==r.cobra_model?(e=e||v.importAndCheck(r.settings.get("reaction_data"),"reaction_data"),r.cobra_model.apply_reaction_data(e,r.settings.get("reaction_styles"),r.settings.get("reaction_compare_style"))):r.settings.get("gene_data")&&i&&null!==r.cobra_model?(n=n||r._makeGeneDataObject(r.settings.get("gene_data"),r.cobra_model,r.map),r.cobra_model.apply_gene_data(n,r.settings.get("reaction_styles"),r.settings.get("identifiers_on_map"),r.settings.get("reaction_compare_style"),r.settings.get("and_method_in_gene_reaction_rule"))):i&&null!==r.cobra_model&&r.cobra_model.apply_reaction_data(null,r.settings.get("reaction_styles"),r.settings.get("reaction_compare_style"))),r.callback_manager.run("update_data",null,i,o,a,s)},5)}},{key:"_createStatus",value:function(t){this.status_bar=t.append("div").attr("id","status")}},{key:"_setupStatus",value:function(t){var e=this;t.callback_manager.set("set_status",function(t){return e.status_bar.html(t)})}},{key:"_updateTooltipSetting",value:function(t){this.map.behavior.toggleLabelMouseover(t&&t.includes("label")),this.map.behavior.toggleObjectMouseover(t&&t.includes("object"))}},{key:"getKeys",value:function(){var t=this,e=this.map,n=this.zoom_container;return{save:{key:"ctrl+s",target:e,fn:e.save},import_background:{key:"ctrl+i",fn:null},clear_background:{key:"ctrl+shift+i",target:e,fn:e.clear_background},save_svg:{key:"ctrl+shift+s",target:e,fn:e.save_svg},save_png:{key:"ctrl+shift+p",target:e,fn:e.save_png},save_gif:{key:"ctrl+shift+g",target:e,fn:e.save_gif},load_map:{key:"ctrl+o",fn:null},convert_map:{target:e,fn:e.convert_map},load_model:{key:"ctrl+m",fn:null},zoom_in_ctrl:{key:"ctrl+=",target:n,fn:n.zoom_in},zoom_in:{key:"=",target:n,fn:n.zoom_in,ignoreWithInput:!0},zoom_out_ctrl:{key:"ctrl+-",target:n,fn:n.zoom_out},zoom_out:{key:"-",target:n,fn:n.zoom_out,ignoreWithInput:!0},extent_nodes_ctrl:{key:"ctrl+0",target:e,fn:e.zoom_extent_nodes},extent_nodes:{key:"0",target:e,fn:e.zoom_extent_nodes,ignoreWithInput:!0},extent_canvas_ctrl:{key:"ctrl+1",target:e,fn:e.zoom_extent_canvas},extent_canvas:{key:"1",target:e,fn:e.zoom_extent_canvas,ignoreWithInput:!0},view_mode:{target:this,fn:this.view_mode,ignoreWithInput:!0},show_settings_ctrl:{key:"ctrl+,",fn:function(){return t.passPropsSettingsMenu({display:!0})}},show_settings:{key:",",fn:function(){return t.passPropsSettingsMenu({display:!0})},ignoreWithInput:!0},build_mode:{key:"n",target:this,fn:this.build_mode,ignoreWithInput:!0,requires:"enable_editing"},zoom_mode:{key:"z",target:this,fn:this.zoom_mode,ignoreWithInput:!0,requires:"enable_editing"},brush_mode:{key:"v",target:this,fn:this.brush_mode,ignoreWithInput:!0,requires:"enable_editing"},rotate_mode:{key:"r",target:this,fn:this.rotate_mode,ignoreWithInput:!0,requires:"enable_editing"},text_mode:{key:"t",target:this,fn:this.text_mode,ignoreWithInput:!0,requires:"enable_editing"},toggle_beziers:{key:"b",target:e,fn:e.toggle_beziers,ignoreWithInput:!0,requires:"enable_editing"},delete_ctrl:{key:"ctrl+backspace",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},delete:{key:"backspace",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},delete_del:{key:"del",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},align_vertical:{key:"alt+l",target:e,fn:e.align_vertical},align_horizontal:{key:"shift+alt+l",target:e,fn:e.align_horizontal},toggle_primary:{key:"p",target:e,fn:e.toggle_selected_node_primary,ignoreWithInput:!0,requires:"enable_editing"},cycle_primary:{key:"c",target:e,fn:e.cycle_primary_node,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_right:{key:"right",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.right,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_down:{key:"down",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.down,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_left:{key:"left",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.left,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_up:{key:"up",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.up,ignoreWithInput:!0,requires:"enable_editing"},undo:{key:"ctrl+z",target:e.undo_stack,fn:e.undo_stack.undo,requires:"enable_editing"},redo:{key:"ctrl+shift+z",target:e.undo_stack,fn:e.undo_stack.redo,requires:"enable_editing"},select_all:{key:"ctrl+a",target:e,fn:e.select_all,ignoreWithInput:!0,requires:"enable_editing"},select_none:{key:"ctrl+shift+a",target:e,fn:e.select_none,ignoreWithInput:!0,requires:"enable_editing"},invert_selection:{target:e,fn:e.invert_selection,requires:"enable_editing"},search_ctrl:{key:"ctrl+f",fn:function(){return t.passPropsSearchBar({display:!0})},requires:"enable_search"},search:{key:"f",fn:function(){return t.passPropsSearchBar({display:!0})},ignoreWithInput:!0,requires:"enable_search"}}}},{key:"_setupConfirmBeforeExit",value:function(){var e=this;window.onbeforeunload=function(t){return e.settings.get("never_ask_before_quit")?null:"You will lose any unsaved changes."}}},{key:"full_screen",value:function(){var t,r=this,i=["menu","scroll_behavior","enable_editing","enable_keys","enable_tooltips"];this.isFullScreen?(tn("html").classed("fill-screen",!1),tn("body").classed("fill-screen",!1),this.selection.classed("fill-screen-div",!1),this.isFullScreen=!1,this.clearFullScreenEscape&&(this.clearFullScreenEscape(),this.clearFullScreenEscape=null),this.savedFullScreenParent&&((t=this.savedFullScreenParent.node()).insertBefore(this.selection.remove().node(),t.firstChild),this.savedFullScreenParent=null),null!==this.savedFullScreenSettings&&k.mapObject(this.savedFullScreenSettings,function(t,e){r.settings.set(e,t)}),this.savedFullScreenSettings=null):(t=this.settings.get("full_screen_button"),k.isObject(t)&&(this.savedFullScreenSettings=k.chain(t).pairs().map(function(t){var e,t=Ky(t,2),n=t[0],t=t[1];return k.contains(i,n)?(e=r.settings.get(n),r.settings.set(n,t),[n,e]):(console.warn("".concat(n," not recognized as an option for full_screen_button")),[null,null])}).filter(function(t){t=Ky(t,2),t=t[0];return t}).object().value()),tn("html").classed("fill-screen",!0),tn("body").classed("fill-screen",!0),this.selection.classed("fill-screen-div",!0),this.isFullScreen=!0,this.savedFullScreenParent=tn(this.selection.node().parentNode),(t=tn("body").node()).insertBefore(this.selection.remove().node(),t.firstChild),this.clearFullScreenEscape=this.map.key_manager.addEscapeListener(function(){return r.full_screen()})),this.map.zoom_extent_canvas(),this.passPropsButtonPanel({isFullScreen:this.isFullScreen}),this.passPropsMenuBar({isFullScreen:this.isFullScreen})}}])&&ev(t.prototype,e),n&&ev(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})(),je=V.class_with_optional_new(De);var nv=Le(280).Pq;function rv(t){return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iv(){return(iv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=((t,e)=>{for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=uv(t)););return t})(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(null,arguments)}function ov(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=rv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=rv(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==rv(t)?t:t+""))(r.key),r)}}function sv(t,e,n){return e&&av(t.prototype,e),n&&av(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lv(t,e,n){e=uv(e);var r=t,e=cv()?Reflect.construct(e,n||[],uv(t).constructor):e.apply(t,n);if(!e||"object"!=rv(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function cv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(cv=function(){return!!t})()}function uv(t){return(uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dv(t,e)}function dv(t,e){return(dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fv,pv,gv,mv=null,_v=null;try{fv=Le(51)}catch(mi){}fv&&(pv=["menu","scroll_behavior","use_3d_transform","enable_editing","enable_keys","full_screen_button","reaction_data","metabolite_data","gene_data"],gv={reaction_data:"set_reaction_data",metabolite_data:"set_metabolite_data",gene_data:"set_gene_data"},mv=(()=>{function t(){return ov(this,t),lv(this,t,arguments)}return hv(t,fv.DOMWidgetView),sv(t,[{key:"render",value:function(){var i=this;if(!fv)throw Error("@jupyter-widgets/base not installed. You must install it to use the jupyter widget");var t=tn(this.el).append("div");this.setHeight(t),k.defer(function(){i.builder=new je(i.getMapData(),i.getModelData(),i.model.get("embedded_css"),t,{first_load_callback:function(r){r.callback_manager.set("clear_map",function(){i.model.set("_loaded_map_json",null),i.model.save_changes()}),r.callback_manager.set("clear_model",function(){i.model.set("_loaded_model_json",null),i.model.save_changes()}),i.model.on("change:height",function(){i.setHeight(t)}),i.model.on("change:_loaded_map_json",function(){r.load_map(i.getMapData())}),i.model.on("change:_loaded_model_json",function(){r.load_model(i.getModelData())}),k.mapObject(r.settings.acceptedStreams,function(t,e){var n;i.model.keys().includes(e)&&(null!==(n=i.model.get(e))?e in gv?r[gv[e]](n):r.settings.set(e,n):(i.model.set(e,r.settings.get(e)),i.model.save_changes()),i.model.on("change:".concat(e),function(){var t=i.model.get(e);k.isEqual(t,r.settings.get(e))||(e in gv?r[gv[e]](t):r.settings.set(e,t),pv.includes(e))||r.map.draw_everything()})),t.onValue(function(t){k.isEqual(t,i.model.get(e))||(i.model.set(e,t),i.model.save_changes())})}),r.map.draw_everything()}})})}},{key:"setHeight",value:function(t){t.style("height","".concat(this.model.get("height"),"px"))}},{key:"getMapData",value:function(){var t=this.model.get("_loaded_map_json");return t?JSON.parse(t):null}},{key:"getModelData",value:function(){var t=this.model.get("_loaded_model_json");return t?JSON.parse(t):null}}])})(),_v=(()=>{function o(){return ov(this,o),lv(this,o,arguments)}return hv(o,fv.DOMWidgetModel),sv(o,[{key:"defaults",value:function(){return k.extend((t=o,e="defaults",n=this,i=iv(uv(1&(r=3)?t.prototype:t),e,n),(2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i)([])),{_model_name:"EscherMapModel",_view_name:"EscherMapView",_model_module:"escher",_view_module:"escher",_model_module_version:"1.8.1",_view_module_version:"1.8.1"});var t,e,n,r,i}}])})());
/**
* @license
*
* Escher
* Author: Zachary King
*
* The MIT License (MIT)
*
* This software is Copyright © 2015 The Regents of the University of
* California. All Rights Reserved.
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/
var bv="1.8.1",yv={_:k,underscore:k,preact:An,baconjs:wn,mousetrap:Ha(),vkbeautify:Za(),d3_selection:y,d3_select:tn,d3_json:Rs.Pq}}return vn});
//# sourceMappingURL=escher.min.js.map